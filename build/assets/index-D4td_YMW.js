const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LeadListManager-Xue_loWR.js","assets/vendor-bXYm9Nr0.js","assets/ui-ByK4YB5C.js","assets/TeamManagement-CCQGhgS_.js"])))=>i.map(i=>d[i]);
import{a as e,b as t,g as n,R as i,r,u as s,B as a,c as o,d as l,N as c}from"./vendor-bXYm9Nr0.js";import{P as u,C as d,a as h,b as p,M as f,E as m,U as g,c as v,B as y,S as b,d as _,e as x,f as w,D as k,g as S,h as C,i as E,j as N,R as T,k as j,l as P,m as I,n as D,o as A,p as L,X as R,A as O,q as M,r as z,s as F,L as $,t as U,Z as H,K as W,H as V,u as B,v as q,w as G}from"./ui-ByK4YB5C.js";function Q(e,t){for(var n=0;n<t.length;n++){const i=t[n];if("string"!=typeof i&&!Array.isArray(i))for(const t in i)if("default"!==t&&!(t in e)){const n=Object.getOwnPropertyDescriptor(i,t);n&&Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:()=>i[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var J,K,X={exports:{}},Y={};var Z,ee,te,ne,ie=(K||(K=1,X.exports=function(){if(J)return Y;J=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(t,n,i){var r=null;if(void 0!==i&&(r=""+i),void 0!==n.key&&(r=""+n.key),"key"in n)for(var s in i={},n)"key"!==s&&(i[s]=n[s]);else i=n;return n=i.ref,{$$typeof:e,type:t,key:r,ref:void 0!==n?n:null,props:i}}return Y.Fragment=t,Y.jsx=n,Y.jsxs=n,Y}()),X.exports),re={exports:{}},se={},ae={exports:{}},oe={};function le(){return ee||(ee=1,ae.exports=(Z||(Z=1,function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,s=e[i];if(!(0<r(s,t)))break e;e[i]=t,e[n]=s,n=i}}function n(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,s=e.length,a=s>>>1;i<a;){var o=2*(i+1)-1,l=e[o],c=o+1,u=e[c];if(0>r(l,n))c<s&&0>r(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[o]=n,i=o);else{if(!(c<s&&0>r(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function r(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,d=null,h=3,p=!1,f=!1,m=!1,g=!1,v="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function _(e){for(var r=n(c);null!==r;){if(null===r.callback)i(c);else{if(!(r.startTime<=e))break;i(c),r.sortIndex=r.expirationTime,t(l,r)}r=n(c)}}function x(e){if(m=!1,_(e),!f)if(null!==n(l))f=!0,k||(k=!0,w());else{var t=n(c);null!==t&&I(x,t.startTime-e)}}var w,k=!1,S=-1,C=5,E=-1;function N(){return!(!g&&e.unstable_now()-E<C)}function T(){if(g=!1,k){var t=e.unstable_now();E=t;var r=!0;try{e:{f=!1,m&&(m=!1,y(S),S=-1),p=!0;var s=h;try{t:{for(_(t),d=n(l);null!==d&&!(d.expirationTime>t&&N());){var a=d.callback;if("function"==typeof a){d.callback=null,h=d.priorityLevel;var o=a(d.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof o){d.callback=o,_(t),r=!0;break t}d===n(l)&&i(l),_(t)}else i(l);d=n(l)}if(null!==d)r=!0;else{var u=n(c);null!==u&&I(x,u.startTime-t),r=!1}}break e}finally{d=null,h=s,p=!1}r=void 0}}finally{r?w():k=!1}}}if("function"==typeof b)w=function(){b(T)};else if("undefined"!=typeof MessageChannel){var j=new MessageChannel,P=j.port2;j.port1.onmessage=T,w=function(){P.postMessage(null)}}else w=function(){v(T,0)};function I(t,n){S=v(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e||(C=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(i,r,s){var a=e.unstable_now();switch(s="object"==typeof s&&null!==s&&"number"==typeof(s=s.delay)&&0<s?a+s:a,i){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return i={id:u++,callback:r,priorityLevel:i,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(i.sortIndex=s,t(c,i),null===n(l)&&i===n(c)&&(m?(y(S),S=-1):m=!0,I(x,s-a))):(i.sortIndex=o,t(l,i),f||p||(f=!0,k||(k=!0,w()))),i},e.unstable_shouldYield=N,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(oe)),oe)),ae.exports}function ce(){if(te)return se;te=1;var n=le(),i=e(),r=t();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function o(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function l(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function c(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(o(e)!==e)throw Error(s(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),b=Symbol.for("react.consumer"),_=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),T=Symbol.iterator;function j(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=T&&e[T]||e["@@iterator"])?e:null}var P=Symbol.for("react.client.reference");function I(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===P?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case g:return"Fragment";case y:return"Profiler";case v:return"StrictMode";case w:return"Suspense";case k:return"SuspenseList";case E:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case m:return"Portal";case _:return e.displayName||"Context";case b:return(e._context.displayName||"Context")+".Consumer";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case S:return null!==(t=e.displayName||null)?t:I(e.type)||"Memo";case C:t=e._payload,e=e._init;try{return I(e(t))}catch(n){}}return null}var D=Array.isArray,A=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R={pending:!1,data:null,method:null,action:null},O=[],M=-1;function z(e){return{current:e}}function F(e){0>M||(e.current=O[M],O[M]=null,M--)}function $(e,t){M++,O[M]=e.current,e.current=t}var U,H,W=z(null),V=z(null),B=z(null),q=z(null);function G(e,t){switch($(B,t),$(V,e),$(W,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?bd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=_d(t=bd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}F(W),$(W,e)}function Q(){F(W),F(V),F(B)}function J(e){null!==e.memoizedState&&$(q,e);var t=W.current,n=_d(t,e.type);t!==n&&($(V,e),$(W,n))}function K(e){V.current===e&&(F(W),F(V)),q.current===e&&(F(q),hh._currentValue=R)}function X(e){if(void 0===U)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);U=t&&t[1]||"",H=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+U+e+H}var Y=!1;function Z(e,t){if(!e||Y)return"";Y=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(r){var i=r}Reflect.construct(e,[],n)}else{try{n.call()}catch(s){i=s}e.call(n.prototype)}}else{try{throw Error()}catch(a){i=a}(n=e())&&"function"==typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&i&&"string"==typeof o.stack)return[o.stack,i.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),a=s[0],o=s[1];if(a&&o){var l=a.split("\n"),c=o.split("\n");for(r=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(i===l.length||r===c.length)for(i=l.length-1,r=c.length-1;1<=i&&0<=r&&l[i]!==c[r];)r--;for(;1<=i&&0<=r;i--,r--)if(l[i]!==c[r]){if(1!==i||1!==r)do{if(i--,0>--r||l[i]!==c[r]){var u="\n"+l[i].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=i&&0<=r);break}}}finally{Y=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?X(n):""}function ee(e,t){switch(e.tag){case 26:case 27:case 5:return X(e.type);case 16:return X("Lazy");case 13:return e.child!==t&&null!==t?X("Suspense Fallback"):X("Suspense");case 19:return X("SuspenseList");case 0:case 15:return Z(e.type,!1);case 11:return Z(e.type.render,!1);case 1:return Z(e.type,!0);case 31:return X("Activity");default:return""}}function ne(e){try{var t="",n=null;do{t+=ee(e,n),n=e,e=e.return}while(e);return t}catch(i){return"\nError generating stack: "+i.message+"\n"+i.stack}}var ie=Object.prototype.hasOwnProperty,re=n.unstable_scheduleCallback,ae=n.unstable_cancelCallback,oe=n.unstable_shouldYield,ce=n.unstable_requestPaint,ue=n.unstable_now,de=n.unstable_getCurrentPriorityLevel,he=n.unstable_ImmediatePriority,pe=n.unstable_UserBlockingPriority,fe=n.unstable_NormalPriority,me=n.unstable_LowPriority,ge=n.unstable_IdlePriority,ve=n.log,ye=n.unstable_setDisableYieldValue,be=null,_e=null;function xe(e){if("function"==typeof ve&&ye(e),_e&&"function"==typeof _e.setStrictMode)try{_e.setStrictMode(be,e)}catch(t){}}var we=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ke(e)/Se|0)|0},ke=Math.log,Se=Math.LN2;var Ce=256,Ee=262144,Ne=4194304;function Te(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function je(e,t,n){var i=e.pendingLanes;if(0===i)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var o=134217727&i;return 0!==o?0!==(i=o&~s)?r=Te(i):0!==(a&=o)?r=Te(a):n||0!==(n=o&~e)&&(r=Te(n)):0!==(o=i&~s)?r=Te(o):0!==a?r=Te(a):n||0!==(n=i&~e)&&(r=Te(n)),0===r?0:0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(n=t&-t)||32===s&&4194048&n)?t:r}function Pe(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ie(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function De(){var e=Ne;return!(62914560&(Ne<<=1))&&(Ne=4194304),e}function Ae(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Le(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Re(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-we(t);e.entangledLanes|=t,e.entanglements[i]=1073741824|e.entanglements[i]|261930&n}function Oe(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-we(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function Me(e,t){var n=t&-t;return 0!==((n=42&n?1:ze(n))&(e.suspendedLanes|t))?0:n}function ze(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Fe(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function $e(){var e=L.p;return 0!==e?e:void 0===(e=window.event)?32:Th(e.type)}function Ue(e,t){var n=L.p;try{return L.p=e,t()}finally{L.p=n}}var He=Math.random().toString(36).slice(2),We="__reactFiber$"+He,Ve="__reactProps$"+He,Be="__reactContainer$"+He,qe="__reactEvents$"+He,Ge="__reactListeners$"+He,Qe="__reactHandles$"+He,Je="__reactResources$"+He,Ke="__reactMarker$"+He;function Xe(e){delete e[We],delete e[Ve],delete e[qe],delete e[Ge],delete e[Qe]}function Ye(e){var t=e[We];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Be]||n[We]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=zd(e);null!==e;){if(n=e[We])return n;e=zd(e)}return t}n=(e=n).parentNode}return null}function Ze(e){if(e=e[We]||e[Be]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function et(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(s(33))}function tt(e){var t=e[Je];return t||(t=e[Je]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function nt(e){e[Ke]=!0}var it=new Set,rt={};function st(e,t){at(e,t),at(e+"Capture",t)}function at(e,t){for(rt[e]=t,e=0;e<t.length;e++)it.add(t[e])}var ot=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),lt={},ct={};function ut(e,t,n){if(r=t,ie.call(ct,r)||!ie.call(lt,r)&&(ot.test(r)?ct[r]=!0:(lt[r]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var i=t.toLowerCase().slice(0,5);if("data-"!==i&&"aria-"!==i)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var r}function dt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ht(e,t,n,i){if(null===i)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+i)}}function pt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ft(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function mt(e){if(!e._valueTracker){var t=ft(e)?"checked":"value";e._valueTracker=function(e,t,n){var i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&void 0!==i&&"function"==typeof i.get&&"function"==typeof i.set){var r=i.get,s=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function gt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=ft(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function vt(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var yt=/[\n"\\]/g;function bt(e){return e.replace(yt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function _t(e,t,n,i,r,s,a,o){e.name="",null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+pt(t)):e.value!==""+pt(t)&&(e.value=""+pt(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?wt(e,a,pt(t)):null!=n?wt(e,a,pt(n)):null!=i&&e.removeAttribute("value"),null==r&&null!=s&&(e.defaultChecked=!!s),null!=r&&(e.checked=r&&"function"!=typeof r&&"symbol"!=typeof r),null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o?e.name=""+pt(o):e.removeAttribute("name")}function xt(e,t,n,i,r,s,a,o){if(null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s&&(e.type=s),null!=t||null!=n){if(("submit"===s||"reset"===s)&&null==t)return void mt(e);n=null!=n?""+pt(n):"",t=null!=t?""+pt(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}i="function"!=typeof(i=null!=i?i:r)&&"symbol"!=typeof i&&!!i,e.checked=o?e.checked:!!i,e.defaultChecked=!!i,null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a&&(e.name=a),mt(e)}function wt(e,t,n){"number"===t&&vt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function kt(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+pt(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function St(e,t,n){null==t||((t=""+pt(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+pt(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function Ct(e,t,n,i){if(null==t){if(null!=i){if(null!=n)throw Error(s(92));if(D(i)){if(1<i.length)throw Error(s(93));i=i[0]}n=i}null==n&&(n=""),t=n}n=pt(t),e.defaultValue=n,(i=e.textContent)===n&&""!==i&&null!==i&&(e.value=i),mt(e)}function Et(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Nt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tt(e,t,n){var i=0===t.indexOf("--");null==n||"boolean"==typeof n||""===n?i?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":i?e.setProperty(t,n):"number"!=typeof n||0===n||Nt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function jt(e,t,n){if(null!=t&&"object"!=typeof t)throw Error(s(62));if(e=e.style,null!=n){for(var i in n)!n.hasOwnProperty(i)||null!=t&&t.hasOwnProperty(i)||(0===i.indexOf("--")?e.setProperty(i,""):"float"===i?e.cssFloat="":e[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&n[r]!==i&&Tt(e,r,i)}else for(var a in t)t.hasOwnProperty(a)&&Tt(e,a,t[a])}function Pt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var It=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Dt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function At(e){return Dt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Lt(){}var Rt=null;function Ot(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Mt=null,zt=null;function Ft(e){var t=Ze(e);if(t&&(e=t.stateNode)){var n=e[Ve]||null;e:switch(e=t.stateNode,t.type){case"input":if(_t(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+bt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=i[Ve]||null;if(!r)throw Error(s(90));_t(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)(i=n[t]).form===e.form&&gt(i)}break e;case"textarea":St(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&kt(e,!!n.multiple,t,!1)}}}var $t=!1;function Ut(e,t,n){if($t)return e(t,n);$t=!0;try{return e(t)}finally{if($t=!1,(null!==Mt||null!==zt)&&(tu(),Mt&&(t=Mt,e=zt,zt=Mt=null,Ft(t),e)))for(t=0;t<e.length;t++)Ft(e[t])}}function Ht(e,t){var n=e.stateNode;if(null===n)return null;var i=n[Ve]||null;if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(s(231,t,typeof n));return n}var Wt=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Vt=!1;if(Wt)try{var Bt={};Object.defineProperty(Bt,"passive",{get:function(){Vt=!0}}),window.addEventListener("test",Bt,Bt),window.removeEventListener("test",Bt,Bt)}catch(Zh){Vt=!1}var qt=null,Gt=null,Qt=null;function Jt(){if(Qt)return Qt;var e,t,n=Gt,i=n.length,r="value"in qt?qt.value:qt.textContent,s=r.length;for(e=0;e<i&&n[e]===r[e];e++);var a=i-e;for(t=1;t<=a&&n[i-t]===r[s-t];t++);return Qt=r.slice(e,1<t?1-t:void 0)}function Kt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Xt(){return!0}function Yt(){return!1}function Zt(e){function t(t,n,i,r,s){for(var a in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?Xt:Yt,this.isPropagationStopped=Yt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Xt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Xt)},persist:function(){},isPersistent:Xt}),t}var en,tn,nn,rn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sn=Zt(rn),an=h({},rn,{view:0,detail:0}),on=Zt(an),ln=h({},an,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==nn&&(nn&&"mousemove"===e.type?(en=e.screenX-nn.screenX,tn=e.screenY-nn.screenY):tn=en=0,nn=e),en)},movementY:function(e){return"movementY"in e?e.movementY:tn}}),cn=Zt(ln),un=Zt(h({},ln,{dataTransfer:0})),dn=Zt(h({},an,{relatedTarget:0})),hn=Zt(h({},rn,{animationName:0,elapsedTime:0,pseudoElement:0})),pn=Zt(h({},rn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),fn=Zt(h({},rn,{data:0})),mn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=vn[e])&&!!t[e]}function bn(){return yn}var _n=Zt(h({},an,{key:function(e){if(e.key){var t=mn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Kt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?gn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bn,charCode:function(e){return"keypress"===e.type?Kt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Kt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),xn=Zt(h({},ln,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),wn=Zt(h({},an,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bn})),kn=Zt(h({},rn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Sn=Zt(h({},ln,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Cn=Zt(h({},rn,{newState:0,oldState:0})),En=[9,13,27,32],Nn=Wt&&"CompositionEvent"in window,Tn=null;Wt&&"documentMode"in document&&(Tn=document.documentMode);var jn=Wt&&"TextEvent"in window&&!Tn,Pn=Wt&&(!Nn||Tn&&8<Tn&&11>=Tn),In=String.fromCharCode(32),Dn=!1;function An(e,t){switch(e){case"keyup":return-1!==En.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ln(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Rn=!1;var On={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!On[e.type]:"textarea"===t}function zn(e,t,n,i){Mt?zt?zt.push(i):zt=[i]:Mt=i,0<(t=sd(t,"onChange")).length&&(n=new sn("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Fn=null,$n=null;function Un(e){Xu(e,0)}function Hn(e){if(gt(et(e)))return e}function Wn(e,t){if("change"===e)return t}var Vn=!1;if(Wt){var Bn;if(Wt){var qn="oninput"in document;if(!qn){var Gn=document.createElement("div");Gn.setAttribute("oninput","return;"),qn="function"==typeof Gn.oninput}Bn=qn}else Bn=!1;Vn=Bn&&(!document.documentMode||9<document.documentMode)}function Qn(){Fn&&(Fn.detachEvent("onpropertychange",Jn),$n=Fn=null)}function Jn(e){if("value"===e.propertyName&&Hn($n)){var t=[];zn(t,$n,e,Ot(e)),Ut(Un,t)}}function Kn(e,t,n){"focusin"===e?(Qn(),$n=n,(Fn=t).attachEvent("onpropertychange",Jn)):"focusout"===e&&Qn()}function Xn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Hn($n)}function Yn(e,t){if("click"===e)return Hn(t)}function Zn(e,t){if("input"===e||"change"===e)return Hn(t)}var ei="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function ti(e,t){if(ei(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!ie.call(t,r)||!ei(e[r],t[r]))return!1}return!0}function ni(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ii(e,t){var n,i=ni(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ni(i)}}function ri(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ri(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function si(e){for(var t=vt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=vt((e=t.contentWindow).document)}return t}function ai(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var oi=Wt&&"documentMode"in document&&11>=document.documentMode,li=null,ci=null,ui=null,di=!1;function hi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;di||null==li||li!==vt(i)||("selectionStart"in(i=li)&&ai(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},ui&&ti(ui,i)||(ui=i,0<(i=sd(ci,"onSelect")).length&&(t=new sn("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=li)))}function pi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var fi={animationend:pi("Animation","AnimationEnd"),animationiteration:pi("Animation","AnimationIteration"),animationstart:pi("Animation","AnimationStart"),transitionrun:pi("Transition","TransitionRun"),transitionstart:pi("Transition","TransitionStart"),transitioncancel:pi("Transition","TransitionCancel"),transitionend:pi("Transition","TransitionEnd")},mi={},gi={};function vi(e){if(mi[e])return mi[e];if(!fi[e])return e;var t,n=fi[e];for(t in n)if(n.hasOwnProperty(t)&&t in gi)return mi[e]=n[t];return e}Wt&&(gi=document.createElement("div").style,"AnimationEvent"in window||(delete fi.animationend.animation,delete fi.animationiteration.animation,delete fi.animationstart.animation),"TransitionEvent"in window||delete fi.transitionend.transition);var yi=vi("animationend"),bi=vi("animationiteration"),_i=vi("animationstart"),xi=vi("transitionrun"),wi=vi("transitionstart"),ki=vi("transitioncancel"),Si=vi("transitionend"),Ci=new Map,Ei="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ni(e,t){Ci.set(e,t),st(t,[e])}Ei.push("scrollEnd");var Ti="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e)},ji=[],Pi=0,Ii=0;function Di(){for(var e=Pi,t=Ii=Pi=0;t<e;){var n=ji[t];ji[t++]=null;var i=ji[t];ji[t++]=null;var r=ji[t];ji[t++]=null;var s=ji[t];if(ji[t++]=null,null!==i&&null!==r){var a=i.pending;null===a?r.next=r:(r.next=a.next,a.next=r),i.pending=r}0!==s&&Oi(n,r,s)}}function Ai(e,t,n,i){ji[Pi++]=e,ji[Pi++]=t,ji[Pi++]=n,ji[Pi++]=i,Ii|=i,e.lanes|=i,null!==(e=e.alternate)&&(e.lanes|=i)}function Li(e,t,n,i){return Ai(e,t,n,i),Mi(e)}function Ri(e,t){return Ai(e,null,null,t),Mi(e)}function Oi(e,t,n){e.lanes|=n;var i=e.alternate;null!==i&&(i.lanes|=n);for(var r=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(i=s.alternate)&&(i.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(r=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,r&&null!==t&&(r=31-we(n),null===(i=(e=s.hiddenUpdates)[r])?e[r]=[t]:i.push(t),t.lane=536870912|n),s):null}function Mi(e){if(50<qc)throw qc=0,Gc=null,Error(s(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var zi={};function Fi(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $i(e,t,n,i){return new Fi(e,t,n,i)}function Ui(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Hi(e,t){var n=e.alternate;return null===n?((n=$i(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Wi(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Vi(e,t,n,i,r,a){var o=0;if(i=e,"function"==typeof e)Ui(e)&&(o=1);else if("string"==typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,n,W.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case E:return(e=$i(31,n,t,r)).elementType=E,e.lanes=a,e;case g:return Bi(n.children,r,a,t);case v:o=8,r|=24;break;case y:return(e=$i(12,n,t,2|r)).elementType=y,e.lanes=a,e;case w:return(e=$i(13,n,t,r)).elementType=w,e.lanes=a,e;case k:return(e=$i(19,n,t,r)).elementType=k,e.lanes=a,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case _:o=10;break e;case b:o=9;break e;case x:o=11;break e;case S:o=14;break e;case C:o=16,i=null;break e}o=29,n=Error(s(130,null===e?"null":typeof e,"")),i=null}return(t=$i(o,n,t,r)).elementType=e,t.type=i,t.lanes=a,t}function Bi(e,t,n,i){return(e=$i(7,e,i,t)).lanes=n,e}function qi(e,t,n){return(e=$i(6,e,null,t)).lanes=n,e}function Gi(e){var t=$i(18,null,null,0);return t.stateNode=e,t}function Qi(e,t,n){return(t=$i(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ji=new WeakMap;function Ki(e,t){if("object"==typeof e&&null!==e){var n=Ji.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ne(t)},Ji.set(e,t),t)}return{value:e,source:t,stack:ne(t)}}var Xi=[],Yi=0,Zi=null,er=0,tr=[],nr=0,ir=null,rr=1,sr="";function ar(e,t){Xi[Yi++]=er,Xi[Yi++]=Zi,Zi=e,er=t}function or(e,t,n){tr[nr++]=rr,tr[nr++]=sr,tr[nr++]=ir,ir=e;var i=rr;e=sr;var r=32-we(i)-1;i&=~(1<<r),n+=1;var s=32-we(t)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,rr=1<<32-we(t)+r|n<<r|i,sr=s+e}else rr=1<<s|n<<r|i,sr=e}function lr(e){null!==e.return&&(ar(e,1),or(e,1,0))}function cr(e){for(;e===Zi;)Zi=Xi[--Yi],Xi[Yi]=null,er=Xi[--Yi],Xi[Yi]=null;for(;e===ir;)ir=tr[--nr],tr[nr]=null,sr=tr[--nr],tr[nr]=null,rr=tr[--nr],tr[nr]=null}function ur(e,t){tr[nr++]=rr,tr[nr++]=sr,tr[nr++]=ir,rr=t.id,sr=t.overflow,ir=e}var dr=null,hr=null,pr=!1,fr=null,mr=!1,gr=Error(s(519));function vr(e){throw kr(Ki(Error(s(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),gr}function yr(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[We]=e,t[Ve]=i,n){case"dialog":Yu("cancel",t),Yu("close",t);break;case"iframe":case"object":case"embed":Yu("load",t);break;case"video":case"audio":for(n=0;n<Ju.length;n++)Yu(Ju[n],t);break;case"source":Yu("error",t);break;case"img":case"image":case"link":Yu("error",t),Yu("load",t);break;case"details":Yu("toggle",t);break;case"input":Yu("invalid",t),xt(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":Yu("invalid",t);break;case"textarea":Yu("invalid",t),Ct(t,i.value,i.defaultValue,i.children)}"string"!=typeof(n=i.children)&&"number"!=typeof n&&"bigint"!=typeof n||t.textContent===""+n||!0===i.suppressHydrationWarning||dd(t.textContent,n)?(null!=i.popover&&(Yu("beforetoggle",t),Yu("toggle",t)),null!=i.onScroll&&Yu("scroll",t),null!=i.onScrollEnd&&Yu("scrollend",t),null!=i.onClick&&(t.onclick=Lt),t=!0):t=!1,t||vr(e,!0)}function br(e){for(dr=e.return;dr;)switch(dr.tag){case 5:case 31:case 13:return void(mr=!1);case 27:case 3:return void(mr=!0);default:dr=dr.return}}function _r(e){if(e!==dr)return!1;if(!pr)return br(e),pr=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||xd(e.type,e.memoizedProps)),t=!t),t&&hr&&vr(e),br(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));hr=Md(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));hr=Md(e)}else 27===n?(n=hr,Td(e.type)?(e=Od,Od=null,hr=e):hr=n):hr=dr?Rd(e.stateNode.nextSibling):null;return!0}function xr(){hr=dr=null,pr=!1}function wr(){var e=fr;return null!==e&&(null===Dc?Dc=e:Dc.push.apply(Dc,e),fr=null),e}function kr(e){null===fr?fr=[e]:fr.push(e)}var Sr=z(null),Cr=null,Er=null;function Nr(e,t,n){$(Sr,t._currentValue),t._currentValue=n}function Tr(e){e._currentValue=Sr.current,F(Sr)}function jr(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Pr(e,t,n,i){var r=e.child;for(null!==r&&(r.return=e);null!==r;){var a=r.dependencies;if(null!==a){var o=r.child;a=a.firstContext;e:for(;null!==a;){var l=a;a=r;for(var c=0;c<t.length;c++)if(l.context===t[c]){a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),jr(a.return,n,e),i||(o=null);break e}a=l.next}}else if(18===r.tag){if(null===(o=r.return))throw Error(s(341));o.lanes|=n,null!==(a=o.alternate)&&(a.lanes|=n),jr(o,n,e),o=null}else o=r.child;if(null!==o)o.return=r;else for(o=r;null!==o;){if(o===e){o=null;break}if(null!==(r=o.sibling)){r.return=o.return,o=r;break}o=o.return}r=o}}function Ir(e,t,n,i){e=null;for(var r=t,a=!1;null!==r;){if(!a)if(524288&r.flags)a=!0;else if(262144&r.flags)break;if(10===r.tag){var o=r.alternate;if(null===o)throw Error(s(387));if(null!==(o=o.memoizedProps)){var l=r.type;ei(r.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(r===q.current){if(null===(o=r.alternate))throw Error(s(387));o.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(null!==e?e.push(hh):e=[hh])}r=r.return}null!==e&&Pr(t,e,n,i),t.flags|=262144}function Dr(e){for(e=e.firstContext;null!==e;){if(!ei(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ar(e){Cr=e,Er=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Lr(e){return Or(Cr,e)}function Rr(e,t){return null===Cr&&Ar(e),Or(e,t)}function Or(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===Er){if(null===e)throw Error(s(308));Er=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Er=Er.next=t;return n}var Mr="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},zr=n.unstable_scheduleCallback,Fr=n.unstable_NormalPriority,$r={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ur(){return{controller:new Mr,data:new Map,refCount:0}}function Hr(e){e.refCount--,0===e.refCount&&zr(Fr,function(){e.controller.abort()})}var Wr=null,Vr=0,Br=0,qr=null;function Gr(){if(0===--Vr&&null!==Wr){null!==qr&&(qr.status="fulfilled");var e=Wr;Wr=null,Br=0,qr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Qr=A.S;A.S=function(e,t){Rc=ue(),"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===Wr){var n=Wr=[];Vr=0,Br=Vu(),qr={status:"pending",value:void 0,then:function(e){n.push(e)}}}Vr++,t.then(Gr,Gr)}(0,t),null!==Qr&&Qr(e,t)};var Jr=z(null);function Kr(){var e=Jr.current;return null!==e?e:gc.pooledCache}function Xr(e,t){$(Jr,null===t?Jr.current:t.pool)}function Yr(){var e=Kr();return null===e?null:{parent:$r._currentValue,pool:e}}var Zr=Error(s(460)),es=Error(s(474)),ts=Error(s(542)),ns={then:function(){}};function is(e){return"fulfilled"===(e=e.status)||"rejected"===e}function rs(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Lt,Lt),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ls(e=t.reason),e;default:if("string"==typeof t.status)t.then(Lt,Lt);else{if(null!==(e=gc)&&100<e.shellSuspendCounter)throw Error(s(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ls(e=t.reason),e}throw as=t,Zr}}function ss(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"==typeof t&&"function"==typeof t.then)throw as=t,Zr;throw t}}var as=null;function os(){if(null===as)throw Error(s(459));var e=as;return as=null,e}function ls(e){if(e===Zr||e===ts)throw Error(s(483))}var cs=null,us=0;function ds(e){var t=us;return us+=1,null===cs&&(cs=[]),rs(cs,e,t)}function hs(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function ps(e,t){if(t.$$typeof===p)throw Error(s(525));throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function fs(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(e,t){return(e=Hi(e,t)).index=0,e.sibling=null,e}function a(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=67108866,n):i:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=qi(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,i){var s=n.type;return s===g?d(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===C&&ss(s)===t.type)?(hs(t=r(t,n.props),n),t.return=e,t):(hs(t=Vi(n.type,n.key,n.props,null,e.mode,i),n),t.return=e,t)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Qi(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function d(e,t,n,i,s){return null===t||7!==t.tag?((t=Bi(n,e.mode,i,s)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=qi(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case f:return hs(n=Vi(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case m:return(t=Qi(t,e.mode,n)).return=e,t;case C:return h(e,t=ss(t),n)}if(D(t)||j(t))return(t=Bi(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return h(e,ds(t),n);if(t.$$typeof===_)return h(e,Rr(e,t),n);ps(e,t)}return null}function p(e,t,n,i){var r=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==r?null:l(e,t,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case f:return n.key===r?c(e,t,n,i):null;case m:return n.key===r?u(e,t,n,i):null;case C:return p(e,t,n=ss(n),i)}if(D(n)||j(n))return null!==r?null:d(e,t,n,i,null);if("function"==typeof n.then)return p(e,t,ds(n),i);if(n.$$typeof===_)return p(e,t,Rr(e,n),i);ps(e,n)}return null}function v(e,t,n,i,r){if("string"==typeof i&&""!==i||"number"==typeof i||"bigint"==typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"==typeof i&&null!==i){switch(i.$$typeof){case f:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case m:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case C:return v(e,t,n,i=ss(i),r)}if(D(i)||j(i))return d(t,e=e.get(n)||null,i,r,null);if("function"==typeof i.then)return v(e,t,n,ds(i),r);if(i.$$typeof===_)return v(e,t,n,Rr(t,i),r);ps(t,i)}return null}function y(l,c,u,d){if("object"==typeof u&&null!==u&&u.type===g&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case f:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===g){if(7===c.tag){n(l,c.sibling),(d=r(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===b||"object"==typeof b&&null!==b&&b.$$typeof===C&&ss(b)===c.type){n(l,c.sibling),hs(d=r(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===g?((d=Bi(u.props.children,l.mode,d,u.key)).return=l,l=d):(hs(d=Vi(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return o(l);case m:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=r(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=Qi(u,l.mode,d)).return=l,l=d}return o(l);case C:return y(l,c,u=ss(u),d)}if(D(u))return function(r,s,o,l){for(var c=null,u=null,d=s,f=s=0,m=null;null!==d&&f<o.length;f++){d.index>f?(m=d,d=null):m=d.sibling;var g=p(r,d,o[f],l);if(null===g){null===d&&(d=m);break}e&&d&&null===g.alternate&&t(r,d),s=a(g,s,f),null===u?c=g:u.sibling=g,u=g,d=m}if(f===o.length)return n(r,d),pr&&ar(r,f),c;if(null===d){for(;f<o.length;f++)null!==(d=h(r,o[f],l))&&(s=a(d,s,f),null===u?c=d:u.sibling=d,u=d);return pr&&ar(r,f),c}for(d=i(d);f<o.length;f++)null!==(m=v(d,r,f,o[f],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?f:m.key),s=a(m,s,f),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach(function(e){return t(r,e)}),pr&&ar(r,f),c}(l,c,u,d);if(j(u)){if("function"!=typeof(b=j(u)))throw Error(s(150));return function(r,o,l,c){if(null==l)throw Error(s(151));for(var u=null,d=null,f=o,m=o=0,g=null,y=l.next();null!==f&&!y.done;m++,y=l.next()){f.index>m?(g=f,f=null):g=f.sibling;var b=p(r,f,y.value,c);if(null===b){null===f&&(f=g);break}e&&f&&null===b.alternate&&t(r,f),o=a(b,o,m),null===d?u=b:d.sibling=b,d=b,f=g}if(y.done)return n(r,f),pr&&ar(r,m),u;if(null===f){for(;!y.done;m++,y=l.next())null!==(y=h(r,y.value,c))&&(o=a(y,o,m),null===d?u=y:d.sibling=y,d=y);return pr&&ar(r,m),u}for(f=i(f);!y.done;m++,y=l.next())null!==(y=v(f,r,m,y.value,c))&&(e&&null!==y.alternate&&f.delete(null===y.key?m:y.key),o=a(y,o,m),null===d?u=y:d.sibling=y,d=y);return e&&f.forEach(function(e){return t(r,e)}),pr&&ar(r,m),u}(l,c,u=b.call(u),d)}if("function"==typeof u.then)return y(l,c,ds(u),d);if(u.$$typeof===_)return y(l,c,Rr(l,u),d);ps(l,u)}return"string"==typeof u&&""!==u||"number"==typeof u||"bigint"==typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=r(c,u)).return=l,l=d):(n(l,c),(d=qi(u,l.mode,d)).return=l,l=d),o(l)):n(l,c)}return function(e,t,n,i){try{us=0;var r=y(e,t,n,i);return cs=null,r}catch(a){if(a===Zr||a===ts)throw a;var s=$i(29,a,null,e.mode);return s.lanes=i,s.return=e,s}}}var ms=fs(!0),gs=fs(!1),vs=!1;function ys(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function _s(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function xs(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,2&mc){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=Mi(e),Oi(e,null,n),t}return Ai(e,i,t,n),Mi(e)}function ws(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Oe(e,n)}}function ks(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?r=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?r=s=t:s=s.next=t}else r=s=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Ss=!1;function Cs(){if(Ss){if(null!==qr)throw qr}}function Es(e,t,n,i){Ss=!1;var r=e.updateQueue;vs=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(null!==o){r.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=r.baseState;for(a=0,u=c=l=null,o=s;;){var p=-536870913&o.lane,f=p!==o.lane;if(f?(yc&p)===p:(i&p)===p){0!==p&&p===Br&&(Ss=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var m=e,g=o;p=t;var v=n;switch(g.tag){case 1:if("function"==typeof(m=g.payload)){d=m.call(v,d,p);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null==(p="function"==typeof(m=g.payload)?m.call(v,d,p):m))break e;d=h({},d,p);break e;case 2:vs=!0}}null!==(p=o.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=r.callbacks)?r.callbacks=[p]:f.push(p))}else f={lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=p;if(null===(o=o.next)){if(null===(o=r.shared.pending))break;o=(f=o).next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}null===u&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null===s&&(r.shared.lanes=0),Ec|=a,e.lanes=a,e.memoizedState=d}}function Ns(e,t){if("function"!=typeof e)throw Error(s(191,e));e.call(t)}function Ts(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Ns(n[e],t)}var js=z(null),Ps=z(0);function Is(e,t){$(Ps,e=Sc),$(js,t),Sc=e|t.baseLanes}function Ds(){$(Ps,Sc),$(js,js.current)}function As(){Sc=Ps.current,F(js),F(Ps)}var Ls=z(null),Rs=null;function Os(e){var t=e.alternate;$(Us,1&Us.current),$(Ls,e),null===Rs&&(null===t||null!==js.current||null!==t.memoizedState)&&(Rs=e)}function Ms(e){$(Us,Us.current),$(Ls,e),null===Rs&&(Rs=e)}function zs(e){22===e.tag?($(Us,Us.current),$(Ls,e),null===Rs&&(Rs=e)):Fs()}function Fs(){$(Us,Us.current),$(Ls,Ls.current)}function $s(e){F(Ls),Rs===e&&(Rs=null),F(Us)}var Us=z(0);function Hs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Ad(n)||Ld(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(128&t.flags)return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ws=0,Vs=null,Bs=null,qs=null,Gs=!1,Qs=!1,Js=!1,Ks=0,Xs=0,Ys=null,Zs=0;function ea(){throw Error(s(321))}function ta(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ei(e[n],t[n]))return!1;return!0}function na(e,t,n,i,r,s){return Ws=s,Vs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,A.H=null===e||null===e.memoizedState?yo:bo,Js=!1,s=n(i,r),Js=!1,Qs&&(s=ra(t,n,i,r)),ia(e),s}function ia(e){A.H=vo;var t=null!==Bs&&null!==Bs.next;if(Ws=0,qs=Bs=Vs=null,Gs=!1,Xs=0,Ys=null,t)throw Error(s(300));null===e||Ro||null!==(e=e.dependencies)&&Dr(e)&&(Ro=!0)}function ra(e,t,n,i){Vs=e;var r=0;do{if(Qs&&(Ys=null),Xs=0,Qs=!1,25<=r)throw Error(s(301));if(r+=1,qs=Bs=null,null!=e.updateQueue){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,null!=a.memoCache&&(a.memoCache.index=0)}A.H=_o,a=t(n,i)}while(Qs);return a}function sa(){var e=A.H,t=e.useState()[0];return t="function"==typeof t.then?da(t):t,e=e.useState()[0],(null!==Bs?Bs.memoizedState:null)!==e&&(Vs.flags|=1024),t}function aa(){var e=0!==Ks;return Ks=0,e}function oa(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function la(e){if(Gs){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Gs=!1}Ws=0,qs=Bs=Vs=null,Qs=!1,Xs=Ks=0,Ys=null}function ca(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===qs?Vs.memoizedState=qs=e:qs=qs.next=e,qs}function ua(){if(null===Bs){var e=Vs.alternate;e=null!==e?e.memoizedState:null}else e=Bs.next;var t=null===qs?Vs.memoizedState:qs.next;if(null!==t)qs=t,Bs=e;else{if(null===e){if(null===Vs.alternate)throw Error(s(467));throw Error(s(310))}e={memoizedState:(Bs=e).memoizedState,baseState:Bs.baseState,baseQueue:Bs.baseQueue,queue:Bs.queue,next:null},null===qs?Vs.memoizedState=qs=e:qs=qs.next=e}return qs}function da(e){var t=Xs;return Xs+=1,null===Ys&&(Ys=[]),e=rs(Ys,e,t),t=Vs,null===(null===qs?t.memoizedState:qs.next)&&(t=t.alternate,A.H=null===t||null===t.memoizedState?yo:bo),e}function ha(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return da(e);if(e.$$typeof===_)return Lr(e)}throw Error(s(438,String(e)))}function pa(e){var t=null,n=Vs.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var i=Vs.alternate;null!==i&&(null!==(i=i.updateQueue)&&(null!=(i=i.memoCache)&&(t={data:i.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Vs.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=N;return t.index++,n}function fa(e,t){return"function"==typeof t?t(e):t}function ma(e){return ga(ua(),Bs,e)}function ga(e,t,n){var i=e.queue;if(null===i)throw Error(s(311));i.lastRenderedReducer=n;var r=e.baseQueue,a=i.pending;if(null!==a){if(null!==r){var o=r.next;r.next=a.next,a.next=o}t.baseQueue=r=a,i.pending=null}if(a=e.baseState,null===r)e.memoizedState=a;else{var l=o=null,c=null,u=t=r.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(yc&h)===h:(Ws&h)===h){var p=u.revertLane;if(0===p)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Br&&(d=!0);else{if((Ws&p)===p){u=u.next,p===Br&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,o=a):c=c.next=h,Vs.lanes|=p,Ec|=p}h=u.action,Js&&n(a,h),a=u.hasEagerState?u.eagerState:n(a,h)}else p={lane:h,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=p,o=a):c=c.next=p,Vs.lanes|=h,Ec|=h;u=u.next}while(null!==u&&u!==t);if(null===c?o=a:c.next=l,!ei(a,e.memoizedState)&&(Ro=!0,d&&null!==(n=qr)))throw n;e.memoizedState=a,e.baseState=o,e.baseQueue=c,i.lastRenderedState=a}return null===r&&(i.lanes=0),[e.memoizedState,i.dispatch]}function va(e){var t=ua(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,a=t.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{a=e(a,o.action),o=o.next}while(o!==r);ei(a,t.memoizedState)||(Ro=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function ya(e,t,n){var i=Vs,r=ua(),a=pr;if(a){if(void 0===n)throw Error(s(407));n=n()}else n=t();var o=!ei((Bs||r).memoizedState,n);if(o&&(r.memoizedState=n,Ro=!0),r=r.queue,Wa(xa.bind(null,i,r,e),[e]),r.getSnapshot!==t||o||null!==qs&&1&qs.memoizedState.tag){if(i.flags|=2048,za(9,{destroy:void 0},_a.bind(null,i,r,n,t),null),null===gc)throw Error(s(349));a||127&Ws||ba(i,t,n)}return n}function ba(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Vs.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Vs.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function _a(e,t,n,i){t.value=n,t.getSnapshot=i,wa(t)&&ka(e)}function xa(e,t,n){return n(function(){wa(t)&&ka(e)})}function wa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ei(e,n)}catch(i){return!0}}function ka(e){var t=Ri(e,2);null!==t&&Kc(t,e,2)}function Sa(e){var t=ca();if("function"==typeof e){var n=e;if(e=n(),Js){xe(!0);try{n()}finally{xe(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:e},t}function Ca(e,t,n,i){return e.baseState=n,ga(e,Bs,"function"==typeof i?i:fa)}function Ea(e,t,n,i,r){if(fo(e))throw Error(s(485));if(null!==(e=t.action)){var a={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){a.listeners.push(e)}};null!==A.T?n(!0):a.isTransition=!1,i(a),null===(n=t.pending)?(a.next=t.pending=a,Na(t,a)):(a.next=n.next,t.pending=n.next=a)}}function Na(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var s=A.T,a={};A.T=a;try{var o=n(r,i),l=A.S;null!==l&&l(a,o),Ta(e,t,o)}catch(c){Pa(e,t,c)}finally{null!==s&&null!==a.types&&(s.types=a.types),A.T=s}}else try{Ta(e,t,s=n(r,i))}catch(u){Pa(e,t,u)}}function Ta(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then(function(n){ja(e,t,n)},function(n){return Pa(e,t,n)}):ja(e,t,n)}function ja(e,t,n){t.status="fulfilled",t.value=n,Ia(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Na(e,n)))}function Pa(e,t,n){var i=e.pending;if(e.pending=null,null!==i){i=i.next;do{t.status="rejected",t.reason=n,Ia(t),t=t.next}while(t!==i)}e.action=null}function Ia(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Da(e,t){return t}function Aa(e,t){if(pr){var n=gc.formState;if(null!==n){e:{var i=Vs;if(pr){if(hr){t:{for(var r=hr,s=mr;8!==r.nodeType;){if(!s){r=null;break t}if(null===(r=Rd(r.nextSibling))){r=null;break t}}r="F!"===(s=r.data)||"F"===s?r:null}if(r){hr=Rd(r.nextSibling),i="F!"===r.data;break e}}vr(i)}i=!1}i&&(t=n[0])}}return(n=ca()).memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Da,lastRenderedState:t},n.queue=i,n=uo.bind(null,Vs,i),i.dispatch=n,i=Sa(!1),s=po.bind(null,Vs,!1,i.queue),r={state:t,dispatch:null,action:e,pending:null},(i=ca()).queue=r,n=Ea.bind(null,Vs,r,s,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function La(e){return Ra(ua(),Bs,e)}function Ra(e,t,n){if(t=ga(e,t,Da)[0],e=ma(fa)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var i=da(t)}catch(a){if(a===Zr)throw ts;throw a}else i=t;var r=(t=ua()).queue,s=r.dispatch;return n!==t.memoizedState&&(Vs.flags|=2048,za(9,{destroy:void 0},Oa.bind(null,r,n),null)),[i,s,e]}function Oa(e,t){e.action=t}function Ma(e){var t=ua(),n=Bs;if(null!==n)return Ra(t,n,e);ua(),t=t.memoizedState;var i=(n=ua()).queue.dispatch;return n.memoizedState=e,[t,i,!1]}function za(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},null===(t=Vs.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Vs.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Fa(){return ua().memoizedState}function $a(e,t,n,i){var r=ca();Vs.flags|=e,r.memoizedState=za(1|t,{destroy:void 0},n,void 0===i?null:i)}function Ua(e,t,n,i){var r=ua();i=void 0===i?null:i;var s=r.memoizedState.inst;null!==Bs&&null!==i&&ta(i,Bs.memoizedState.deps)?r.memoizedState=za(t,s,n,i):(Vs.flags|=e,r.memoizedState=za(1|t,s,n,i))}function Ha(e,t){$a(8390656,8,e,t)}function Wa(e,t){Ua(2048,8,e,t)}function Va(e){var t=ua().memoizedState;return function(e){Vs.flags|=4;var t=Vs.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Vs.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(2&mc)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function Ba(e,t){return Ua(4,2,e,t)}function qa(e,t){return Ua(4,4,e,t)}function Ga(e,t){if("function"==typeof t){e=e();var n=t(e);return function(){"function"==typeof n?n():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function Qa(e,t,n){n=null!=n?n.concat([e]):null,Ua(4,4,Ga.bind(null,t,e),n)}function Ja(){}function Ka(e,t){var n=ua();t=void 0===t?null:t;var i=n.memoizedState;return null!==t&&ta(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Xa(e,t){var n=ua();t=void 0===t?null:t;var i=n.memoizedState;if(null!==t&&ta(t,i[1]))return i[0];if(i=e(),Js){xe(!0);try{e()}finally{xe(!1)}}return n.memoizedState=[i,t],i}function Ya(e,t,n){return void 0===n||1073741824&Ws&&!(261930&yc)?e.memoizedState=t:(e.memoizedState=n,e=Jc(),Vs.lanes|=e,Ec|=e,n)}function Za(e,t,n,i){return ei(n,t)?n:null!==js.current?(e=Ya(e,n,i),ei(e,t)||(Ro=!0),e):42&Ws&&(!(1073741824&Ws)||261930&yc)?(e=Jc(),Vs.lanes|=e,Ec|=e,t):(Ro=!0,e.memoizedState=n)}function eo(e,t,n,i,r){var s=L.p;L.p=0!==s&&8>s?s:8;var a,o,l,c=A.T,u={};A.T=u,po(e,!1,t,n);try{var d=r(),h=A.S;if(null!==h&&h(u,d),null!==d&&"object"==typeof d&&"function"==typeof d.then)ho(e,t,(a=i,o=[],l={status:"pending",value:null,reason:null,then:function(e){o.push(e)}},d.then(function(){l.status="fulfilled",l.value=a;for(var e=0;e<o.length;e++)(0,o[e])(a)},function(e){for(l.status="rejected",l.reason=e,e=0;e<o.length;e++)(0,o[e])(void 0)}),l),Qc());else ho(e,t,i,Qc())}catch(p){ho(e,t,{then:function(){},status:"rejected",reason:p},Qc())}finally{L.p=s,null!==c&&null!==u.types&&(c.types=u.types),A.T=c}}function to(){}function no(e,t,n,i){if(5!==e.tag)throw Error(s(476));var r=io(e).queue;eo(e,r,t,R,null===n?to:function(){return ro(e),n(i)})}function io(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:R,baseState:R,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:R},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function ro(e){var t=io(e);null===t.next&&(t=e.alternate.memoizedState),ho(e,t.next.queue,{},Qc())}function so(){return Lr(hh)}function ao(){return ua().memoizedState}function oo(){return ua().memoizedState}function lo(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Qc(),i=xs(t,e=_s(n),n);return null!==i&&(Kc(i,t,n),ws(i,t,n)),t={cache:Ur()},void(e.payload=t)}t=t.return}}function co(e,t,n){var i=Qc();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},fo(e)?mo(t,n):null!==(n=Li(e,t,n,i))&&(Kc(n,e,i),go(n,t,i))}function uo(e,t,n){ho(e,t,n,Qc())}function ho(e,t,n,i){var r={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(fo(e))mo(t,r);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(r.hasEagerState=!0,r.eagerState=o,ei(o,a))return Ai(e,t,r,0),null===gc&&Di(),!1}catch(l){}if(null!==(n=Li(e,t,r,i)))return Kc(n,e,i),go(n,t,i),!0}return!1}function po(e,t,n,i){if(i={lane:2,revertLane:Vu(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},fo(e)){if(t)throw Error(s(479))}else null!==(t=Li(e,n,i,2))&&Kc(t,e,2)}function fo(e){var t=e.alternate;return e===Vs||null!==t&&t===Vs}function mo(e,t){Qs=Gs=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function go(e,t,n){if(4194048&n){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Oe(e,n)}}var vo={readContext:Lr,use:ha,useCallback:ea,useContext:ea,useEffect:ea,useImperativeHandle:ea,useLayoutEffect:ea,useInsertionEffect:ea,useMemo:ea,useReducer:ea,useRef:ea,useState:ea,useDebugValue:ea,useDeferredValue:ea,useTransition:ea,useSyncExternalStore:ea,useId:ea,useHostTransitionStatus:ea,useFormState:ea,useActionState:ea,useOptimistic:ea,useMemoCache:ea,useCacheRefresh:ea};vo.useEffectEvent=ea;var yo={readContext:Lr,use:ha,useCallback:function(e,t){return ca().memoizedState=[e,void 0===t?null:t],e},useContext:Lr,useEffect:Ha,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,$a(4194308,4,Ga.bind(null,t,e),n)},useLayoutEffect:function(e,t){return $a(4194308,4,e,t)},useInsertionEffect:function(e,t){$a(4,2,e,t)},useMemo:function(e,t){var n=ca();t=void 0===t?null:t;var i=e();if(Js){xe(!0);try{e()}finally{xe(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=ca();if(void 0!==n){var r=n(t);if(Js){xe(!0);try{n(t)}finally{xe(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=co.bind(null,Vs,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},ca().memoizedState=e},useState:function(e){var t=(e=Sa(e)).queue,n=uo.bind(null,Vs,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ja,useDeferredValue:function(e,t){return Ya(ca(),e,t)},useTransition:function(){var e=Sa(!1);return e=eo.bind(null,Vs,e.queue,!0,!1),ca().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=Vs,r=ca();if(pr){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===gc)throw Error(s(349));127&yc||ba(i,t,n)}r.memoizedState=n;var a={value:n,getSnapshot:t};return r.queue=a,Ha(xa.bind(null,i,a,e),[e]),i.flags|=2048,za(9,{destroy:void 0},_a.bind(null,i,a,n,t),null),n},useId:function(){var e=ca(),t=gc.identifierPrefix;if(pr){var n=sr;t="_"+t+"R_"+(n=(rr&~(1<<32-we(rr)-1)).toString(32)+n),0<(n=Ks++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=Zs++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:so,useFormState:Aa,useActionState:Aa,useOptimistic:function(e){var t=ca();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=po.bind(null,Vs,!0,n),n.dispatch=t,[e,t]},useMemoCache:pa,useCacheRefresh:function(){return ca().memoizedState=lo.bind(null,Vs)},useEffectEvent:function(e){var t=ca(),n={impl:e};return t.memoizedState=n,function(){if(2&mc)throw Error(s(440));return n.impl.apply(void 0,arguments)}}},bo={readContext:Lr,use:ha,useCallback:Ka,useContext:Lr,useEffect:Wa,useImperativeHandle:Qa,useInsertionEffect:Ba,useLayoutEffect:qa,useMemo:Xa,useReducer:ma,useRef:Fa,useState:function(){return ma(fa)},useDebugValue:Ja,useDeferredValue:function(e,t){return Za(ua(),Bs.memoizedState,e,t)},useTransition:function(){var e=ma(fa)[0],t=ua().memoizedState;return["boolean"==typeof e?e:da(e),t]},useSyncExternalStore:ya,useId:ao,useHostTransitionStatus:so,useFormState:La,useActionState:La,useOptimistic:function(e,t){return Ca(ua(),0,e,t)},useMemoCache:pa,useCacheRefresh:oo};bo.useEffectEvent=Va;var _o={readContext:Lr,use:ha,useCallback:Ka,useContext:Lr,useEffect:Wa,useImperativeHandle:Qa,useInsertionEffect:Ba,useLayoutEffect:qa,useMemo:Xa,useReducer:va,useRef:Fa,useState:function(){return va(fa)},useDebugValue:Ja,useDeferredValue:function(e,t){var n=ua();return null===Bs?Ya(n,e,t):Za(n,Bs.memoizedState,e,t)},useTransition:function(){var e=va(fa)[0],t=ua().memoizedState;return["boolean"==typeof e?e:da(e),t]},useSyncExternalStore:ya,useId:ao,useHostTransitionStatus:so,useFormState:Ma,useActionState:Ma,useOptimistic:function(e,t){var n=ua();return null!==Bs?Ca(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:pa,useCacheRefresh:oo};function xo(e,t,n,i){n=null==(n=n(i,t=e.memoizedState))?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}_o.useEffectEvent=Va;var wo={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Qc(),r=_s(i);r.payload=t,null!=n&&(r.callback=n),null!==(t=xs(e,r,i))&&(Kc(t,e,i),ws(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Qc(),r=_s(i);r.tag=1,r.payload=t,null!=n&&(r.callback=n),null!==(t=xs(e,r,i))&&(Kc(t,e,i),ws(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Qc(),i=_s(n);i.tag=2,null!=t&&(i.callback=t),null!==(t=xs(e,i,n))&&(Kc(t,e,n),ws(t,e,n))}};function ko(e,t,n,i,r,s,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!ti(n,i)||!ti(r,s))}function So(e,t,n,i){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&wo.enqueueReplaceState(t,t.state,null)}function Co(e,t){var n=t;if("ref"in t)for(var i in n={},t)"ref"!==i&&(n[i]=t[i]);if(e=e.defaultProps)for(var r in n===t&&(n=h({},n)),e)void 0===n[r]&&(n[r]=e[r]);return n}function Eo(e){Ti(e)}function No(e){}function To(e){Ti(e)}function jo(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Po(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function Io(e,t,n){return(n=_s(n)).tag=3,n.payload={element:null},n.callback=function(){jo(e,t)},n}function Do(e){return(e=_s(e)).tag=3,e}function Ao(e,t,n,i){var r=n.type.getDerivedStateFromError;if("function"==typeof r){var s=i.value;e.payload=function(){return r(s)},e.callback=function(){Po(t,n,i)}}var a=n.stateNode;null!==a&&"function"==typeof a.componentDidCatch&&(e.callback=function(){Po(t,n,i),"function"!=typeof r&&(null===zc?zc=new Set([this]):zc.add(this));var e=i.stack;this.componentDidCatch(i.value,{componentStack:null!==e?e:""})})}var Lo=Error(s(461)),Ro=!1;function Oo(e,t,n,i){t.child=null===e?gs(t,null,n,i):ms(t,e.child,n,i)}function Mo(e,t,n,i,r){n=n.render;var s=t.ref;if("ref"in i){var a={};for(var o in i)"ref"!==o&&(a[o]=i[o])}else a=i;return Ar(t),i=na(e,t,n,a,s,r),o=aa(),null===e||Ro?(pr&&o&&lr(t),t.flags|=1,Oo(e,t,i,r),t.child):(oa(e,t,r),al(e,t,r))}function zo(e,t,n,i,r){if(null===e){var s=n.type;return"function"!=typeof s||Ui(s)||void 0!==s.defaultProps||null!==n.compare?((e=Vi(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Fo(e,t,s,i,r))}if(s=e.child,!ol(e,r)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:ti)(a,i)&&e.ref===t.ref)return al(e,t,r)}return t.flags|=1,(e=Hi(s,i)).ref=t.ref,e.return=t,t.child=e}function Fo(e,t,n,i,r){if(null!==e){var s=e.memoizedProps;if(ti(s,i)&&e.ref===t.ref){if(Ro=!1,t.pendingProps=i=s,!ol(e,r))return t.lanes=e.lanes,al(e,t,r);131072&e.flags&&(Ro=!0)}}return qo(e,t,n,i,r)}function $o(e,t,n,i){var r=i.children,s=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===i.mode){if(128&t.flags){if(s=null!==s?s.baseLanes|n:n,null!==e){for(i=t.child=e.child,r=0;null!==i;)r=r|i.lanes|i.childLanes,i=i.sibling;i=r&~s}else i=0,t.child=null;return Ho(e,t,s,n,i)}if(!(536870912&n))return i=t.lanes=536870912,Ho(e,t,null!==s?s.baseLanes|n:n,n,i);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Xr(0,null!==s?s.cachePool:null),null!==s?Is(t,s):Ds(),zs(t)}else null!==s?(Xr(0,s.cachePool),Is(t,s),Fs(),t.memoizedState=null):(null!==e&&Xr(0,null),Ds(),Fs());return Oo(e,t,r,n),t.child}function Uo(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Ho(e,t,n,i,r){var s=Kr();return s=null===s?null:{parent:$r._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},null!==e&&Xr(0,null),Ds(),zs(t),null!==e&&Ir(e,t,i,!0),t.childLanes=r,null}function Wo(e,t){return(t=tl({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Vo(e,t,n){return ms(t,e.child,null,n),(e=Wo(t,t.pendingProps)).flags|=2,$s(t),t.memoizedState=null,e}function Bo(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(s(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function qo(e,t,n,i,r){return Ar(t),n=na(e,t,n,i,void 0,r),i=aa(),null===e||Ro?(pr&&i&&lr(t),t.flags|=1,Oo(e,t,n,r),t.child):(oa(e,t,r),al(e,t,r))}function Go(e,t,n,i,r,s){return Ar(t),t.updateQueue=null,n=ra(t,i,n,r),ia(e),i=aa(),null===e||Ro?(pr&&i&&lr(t),t.flags|=1,Oo(e,t,n,s),t.child):(oa(e,t,s),al(e,t,s))}function Qo(e,t,n,i,r){if(Ar(t),null===t.stateNode){var s=zi,a=n.contextType;"object"==typeof a&&null!==a&&(s=Lr(a)),s=new n(i,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=wo,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=i,s.state=t.memoizedState,s.refs={},ys(t),a=n.contextType,s.context="object"==typeof a&&null!==a?Lr(a):zi,s.state=t.memoizedState,"function"==typeof(a=n.getDerivedStateFromProps)&&(xo(t,n,a,i),s.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof s.getSnapshotBeforeUpdate||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||(a=s.state,"function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),a!==s.state&&wo.enqueueReplaceState(s,s.state,null),Es(t,i,s,r),Cs(),s.state=t.memoizedState),"function"==typeof s.componentDidMount&&(t.flags|=4194308),i=!0}else if(null===e){s=t.stateNode;var o=t.memoizedProps,l=Co(n,o);s.props=l;var c=s.context,u=n.contextType;a=zi,"object"==typeof u&&null!==u&&(a=Lr(u));var d=n.getDerivedStateFromProps;u="function"==typeof d||"function"==typeof s.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(o||c!==a)&&So(t,s,i,a),vs=!1;var h=t.memoizedState;s.state=h,Es(t,i,s,r),Cs(),c=t.memoizedState,o||h!==c||vs?("function"==typeof d&&(xo(t,n,d,i),c=t.memoizedState),(l=vs||ko(t,n,l,i,h,c,a))?(u||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.flags|=4194308)):("function"==typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),s.props=i,s.state=c,s.context=a,i=l):("function"==typeof s.componentDidMount&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,bs(e,t),u=Co(n,a=t.memoizedProps),s.props=u,d=t.pendingProps,h=s.context,c=n.contextType,l=zi,"object"==typeof c&&null!==c&&(l=Lr(c)),(c="function"==typeof(o=n.getDerivedStateFromProps)||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==d||h!==l)&&So(t,s,i,l),vs=!1,h=t.memoizedState,s.state=h,Es(t,i,s,r),Cs();var p=t.memoizedState;a!==d||h!==p||vs||null!==e&&null!==e.dependencies&&Dr(e.dependencies)?("function"==typeof o&&(xo(t,n,o,i),p=t.memoizedState),(u=vs||ko(t,n,u,i,h,p,l)||null!==e&&null!==e.dependencies&&Dr(e.dependencies))?(c||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(i,p,l),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(i,p,l)),"function"==typeof s.componentDidUpdate&&(t.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=p),s.props=i,s.state=p,s.context=l,i=u):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return s=i,Bo(e,t),i=!!(128&t.flags),s||i?(s=t.stateNode,n=i&&"function"!=typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&i?(t.child=ms(t,e.child,null,r),t.child=ms(t,null,n,r)):Oo(e,t,n,r),t.memoizedState=s.state,e=t.child):e=al(e,t,r),e}function Jo(e,t,n,i){return xr(),t.flags|=256,Oo(e,t,n,i),t.child}var Ko={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xo(e){return{baseLanes:e,cachePool:Yr()}}function Yo(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=jc),e}function Zo(e,t,n){var i,r=t.pendingProps,a=!1,o=!!(128&t.flags);if((i=o)||(i=(null===e||null!==e.memoizedState)&&!!(2&Us.current)),i&&(a=!0,t.flags&=-129),i=!!(32&t.flags),t.flags&=-33,null===e){if(pr){if(a?Os(t):Fs(),(e=hr)?null!==(e=null!==(e=Dd(e,mr))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ir?{id:rr,overflow:sr}:null,retryLane:536870912,hydrationErrors:null},(n=Gi(e)).return=t,t.child=n,dr=t,hr=null):e=null,null===e)throw vr(t);return Ld(e)?t.lanes=32:t.lanes=536870912,null}var l=r.children;return r=r.fallback,a?(Fs(),l=tl({mode:"hidden",children:l},a=t.mode),r=Bi(r,a,n,null),l.return=t,r.return=t,l.sibling=r,t.child=l,(r=t.child).memoizedState=Xo(n),r.childLanes=Yo(e,i,n),t.memoizedState=Ko,Uo(null,r)):(Os(t),el(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(o)256&t.flags?(Os(t),t.flags&=-257,t=nl(e,t,n)):null!==t.memoizedState?(Fs(),t.child=e.child,t.flags|=128,t=null):(Fs(),l=r.fallback,a=t.mode,r=tl({mode:"visible",children:r.children},a),(l=Bi(l,a,n,null)).flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,ms(t,e.child,null,n),(r=t.child).memoizedState=Xo(n),r.childLanes=Yo(e,i,n),t.memoizedState=Ko,t=Uo(null,r));else if(Os(t),Ld(l)){if(i=l.nextSibling&&l.nextSibling.dataset)var u=i.dgst;i=u,(r=Error(s(419))).stack="",r.digest=i,kr({value:r,source:null,stack:null}),t=nl(e,t,n)}else if(Ro||Ir(e,t,n,!1),i=0!==(n&e.childLanes),Ro||i){if(null!==(i=gc)&&(0!==(r=Me(i,n))&&r!==c.retryLane))throw c.retryLane=r,Ri(e,r),Kc(i,e,r),Lo;Ad(l)||lu(),t=nl(e,t,n)}else Ad(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,hr=Rd(l.nextSibling),dr=t,pr=!0,fr=null,mr=!1,null!==e&&ur(t,e),(t=el(t,r.children)).flags|=4096);return t}return a?(Fs(),l=r.fallback,a=t.mode,u=(c=e.child).sibling,(r=Hi(c,{mode:"hidden",children:r.children})).subtreeFlags=65011712&c.subtreeFlags,null!==u?l=Hi(u,l):(l=Bi(l,a,n,null)).flags|=2,l.return=t,r.return=t,r.sibling=l,t.child=r,Uo(null,r),r=t.child,null===(l=e.child.memoizedState)?l=Xo(n):(null!==(a=l.cachePool)?(c=$r._currentValue,a=a.parent!==c?{parent:c,pool:c}:a):a=Yr(),l={baseLanes:l.baseLanes|n,cachePool:a}),r.memoizedState=l,r.childLanes=Yo(e,i,n),t.memoizedState=Ko,Uo(e.child,r)):(Os(t),e=(n=e.child).sibling,(n=Hi(n,{mode:"visible",children:r.children})).return=t,n.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n,t.memoizedState=null,n)}function el(e,t){return(t=tl({mode:"visible",children:t},e.mode)).return=e,e.child=t}function tl(e,t){return(e=$i(22,e,null,t)).lanes=0,e}function nl(e,t,n){return ms(t,e.child,null,n),(e=el(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function il(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),jr(e.return,t,n)}function rl(e,t,n,i,r,s){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r,treeForkCount:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r,a.treeForkCount=s)}function sl(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;i=i.children;var a=Us.current,o=!!(2&a);if(o?(a=1&a|2,t.flags|=128):a&=1,$(Us,a),Oo(e,t,i,n),i=pr?er:0,!o&&null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&il(e,n,t);else if(19===e.tag)il(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===Hs(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),rl(t,!1,r,n,s,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===Hs(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}rl(t,!0,n,null,s,i);break;case"together":rl(t,!1,null,null,void 0,i);break;default:t.memoizedState=null}return t.child}function al(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ec|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ir(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Hi(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Hi(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function ol(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Dr(e))}function ll(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ro=!0;else{if(!(ol(e,n)||128&t.flags))return Ro=!1,function(e,t,n){switch(t.tag){case 3:G(t,t.stateNode.containerInfo),Nr(0,$r,e.memoizedState.cache),xr();break;case 27:case 5:J(t);break;case 4:G(t,t.stateNode.containerInfo);break;case 10:Nr(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Ms(t),null;break;case 13:var i=t.memoizedState;if(null!==i)return null!==i.dehydrated?(Os(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Zo(e,t,n):(Os(t),null!==(e=al(e,t,n))?e.sibling:null);Os(t);break;case 19:var r=!!(128&e.flags);if((i=0!==(n&t.childLanes))||(Ir(e,t,n,!1),i=0!==(n&t.childLanes)),r){if(i)return sl(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),$(Us,Us.current),i)break;return null;case 22:return t.lanes=0,$o(e,t,n,t.pendingProps);case 24:Nr(0,$r,e.memoizedState.cache)}return al(e,t,n)}(e,t,n);Ro=!!(131072&e.flags)}else Ro=!1,pr&&1048576&t.flags&&or(t,er,t.index);switch(t.lanes=0,t.tag){case 16:e:{var i=t.pendingProps;if(e=ss(t.elementType),t.type=e,"function"!=typeof e){if(null!=e){var r=e.$$typeof;if(r===x){t.tag=11,t=Mo(null,t,e,i,n);break e}if(r===S){t.tag=14,t=zo(null,t,e,i,n);break e}}throw t=I(e)||e,Error(s(306,t,""))}Ui(e)?(i=Co(e,i),t.tag=1,t=Qo(null,t,e,i,n)):(t.tag=0,t=qo(null,t,e,i,n))}return t;case 0:return qo(e,t,t.type,t.pendingProps,n);case 1:return Qo(e,t,i=t.type,r=Co(i,t.pendingProps),n);case 3:e:{if(G(t,t.stateNode.containerInfo),null===e)throw Error(s(387));i=t.pendingProps;var a=t.memoizedState;r=a.element,bs(e,t),Es(t,i,null,n);var o=t.memoizedState;if(i=o.cache,Nr(0,$r,i),i!==a.cache&&Pr(t,[$r],n,!0),Cs(),i=o.element,a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Jo(e,t,i,n);break e}if(i!==r){kr(r=Ki(Error(s(424)),t)),t=Jo(e,t,i,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(hr=Rd(e.firstChild),dr=t,pr=!0,fr=null,mr=!0,n=gs(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(xr(),i===r){t=al(e,t,n);break e}Oo(e,t,i,n)}t=t.child}return t;case 26:return Bo(e,t),null===e?(n=Gd(t.type,null,t.pendingProps,null))?t.memoizedState=n:pr||(n=t.type,e=t.pendingProps,(i=yd(B.current).createElement(n))[We]=t,i[Ve]=e,fd(i,n,e),nt(i),t.stateNode=i):t.memoizedState=Gd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return J(t),null===e&&pr&&(i=t.stateNode=Fd(t.type,t.pendingProps,B.current),dr=t,mr=!0,r=hr,Td(t.type)?(Od=r,hr=Rd(i.firstChild)):hr=r),Oo(e,t,t.pendingProps.children,n),Bo(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&pr&&((r=i=hr)&&(null!==(i=function(e,t,n,i){for(;1===e.nodeType;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(i){if(!e[Ke])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==r.rel||e.getAttribute("href")!==(null==r.href||""===r.href?null:r.href)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin)||e.getAttribute("title")!==(null==r.title?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==r.src?null:r.src)||e.getAttribute("type")!==(null==r.type?null:r.type)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==r.name?null:""+r.name;if("hidden"===r.type&&e.getAttribute("name")===s)return e}if(null===(e=Rd(e.nextSibling)))break}return null}(i,t.type,t.pendingProps,mr))?(t.stateNode=i,dr=t,hr=Rd(i.firstChild),mr=!1,r=!0):r=!1),r||vr(t)),J(t),r=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,i=a.children,xd(r,a)?i=null:null!==o&&xd(r,o)&&(t.flags|=32),null!==t.memoizedState&&(r=na(e,t,sa,null,null,n),hh._currentValue=r),Bo(e,t),Oo(e,t,i,n),t.child;case 6:return null===e&&pr&&((e=n=hr)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Rd(e.nextSibling)))return null}return e}(n,t.pendingProps,mr))?(t.stateNode=n,dr=t,hr=null,e=!0):e=!1),e||vr(t)),null;case 13:return Zo(e,t,n);case 4:return G(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=ms(t,null,i,n):Oo(e,t,i,n),t.child;case 11:return Mo(e,t,t.type,t.pendingProps,n);case 7:return Oo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Oo(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Nr(0,t.type,i.value),Oo(e,t,i.children,n),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,Ar(t),i=i(r=Lr(r)),t.flags|=1,Oo(e,t,i,n),t.child;case 14:return zo(e,t,t.type,t.pendingProps,n);case 15:return Fo(e,t,t.type,t.pendingProps,n);case 19:return sl(e,t,n);case 31:return function(e,t,n){var i=t.pendingProps,r=!!(128&t.flags);if(t.flags&=-129,null===e){if(pr){if("hidden"===i.mode)return e=Wo(t,i),t.lanes=536870912,Uo(null,e);if(Ms(t),(e=hr)?null!==(e=null!==(e=Dd(e,mr))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ir?{id:rr,overflow:sr}:null,retryLane:536870912,hydrationErrors:null},(n=Gi(e)).return=t,t.child=n,dr=t,hr=null):e=null,null===e)throw vr(t);return t.lanes=536870912,null}return Wo(t,i)}var a=e.memoizedState;if(null!==a){var o=a.dehydrated;if(Ms(t),r)if(256&t.flags)t.flags&=-257,t=Vo(e,t,n);else{if(null===t.memoizedState)throw Error(s(558));t.child=e.child,t.flags|=128,t=null}else if(Ro||Ir(e,t,n,!1),r=0!==(n&e.childLanes),Ro||r){if(null!==(i=gc)&&0!==(o=Me(i,n))&&o!==a.retryLane)throw a.retryLane=o,Ri(e,o),Kc(i,e,o),Lo;lu(),t=Vo(e,t,n)}else e=a.treeContext,hr=Rd(o.nextSibling),dr=t,pr=!0,fr=null,mr=!1,null!==e&&ur(t,e),(t=Wo(t,i)).flags|=4096;return t}return(e=Hi(e.child,{mode:i.mode,children:i.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return $o(e,t,n,t.pendingProps);case 24:return Ar(t),i=Lr($r),null===e?(null===(r=Kr())&&(r=gc,a=Ur(),r.pooledCache=a,a.refCount++,null!==a&&(r.pooledCacheLanes|=n),r=a),t.memoizedState={parent:i,cache:r},ys(t),Nr(0,$r,r)):(0!==(e.lanes&n)&&(bs(e,t),Es(t,null,null,n),Cs()),r=e.memoizedState,a=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=r),Nr(0,$r,i)):(i=a.cache,Nr(0,$r,i),i!==r.cache&&Pr(t,[$r],n,!0))),Oo(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function cl(e){e.flags|=4}function ul(e,t,n,i,r){if((t=!!(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&r)===r)if(e.stateNode.complete)e.flags|=8192;else{if(!su())throw as=ns,es;e.flags|=8192}}else e.flags&=-16777217}function dl(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!ah(t)){if(!su())throw as=ns,es;e.flags|=8192}}function hl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?De():536870912,e.lanes|=t,Pc|=t)}function pl(e,t){if(!pr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function fl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=65011712&r.subtreeFlags,i|=65011712&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function ml(e,t,n){var i=t.pendingProps;switch(cr(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return fl(t),null;case 3:return n=t.stateNode,i=null,null!==e&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Tr($r),Q(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(_r(t)?cl(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,wr())),fl(t),null;case 26:var r=t.type,a=t.memoizedState;return null===e?(cl(t),null!==a?(fl(t),dl(t,a)):(fl(t),ul(t,r,0,0,n))):a?a!==e.memoizedState?(cl(t),fl(t),dl(t,a)):(fl(t),t.flags&=-16777217):((e=e.memoizedProps)!==i&&cl(t),fl(t),ul(t,r,0,0,n)),null;case 27:if(K(t),n=B.current,r=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==i&&cl(t);else{if(!i){if(null===t.stateNode)throw Error(s(166));return fl(t),null}e=W.current,_r(t)?yr(t):(e=Fd(r,i,n),t.stateNode=e,cl(t))}return fl(t),null;case 5:if(K(t),r=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==i&&cl(t);else{if(!i){if(null===t.stateNode)throw Error(s(166));return fl(t),null}if(a=W.current,_r(t))yr(t);else{var o=yd(B.current);switch(a){case 1:a=o.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:a=o.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":a=o.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":a=o.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":(a=o.createElement("div")).innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a="string"==typeof i.is?o.createElement("select",{is:i.is}):o.createElement("select"),i.multiple?a.multiple=!0:i.size&&(a.size=i.size);break;default:a="string"==typeof i.is?o.createElement(r,{is:i.is}):o.createElement(r)}}a[We]=t,a[Ve]=i;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)a.appendChild(o.stateNode);else if(4!==o.tag&&27!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=a;e:switch(fd(a,r,i),r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&cl(t)}}return fl(t),ul(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==i&&cl(t);else{if("string"!=typeof i&&null===t.stateNode)throw Error(s(166));if(e=B.current,_r(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,null!==(r=dr))switch(r.tag){case 27:case 5:i=r.memoizedProps}e[We]=t,(e=!!(e.nodeValue===n||null!==i&&!0===i.suppressHydrationWarning||dd(e.nodeValue,n)))||vr(t,!0)}else(e=yd(e).createTextNode(i))[We]=t,t.stateNode=e}return fl(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(i=_r(t),null!==n){if(null===e){if(!i)throw Error(s(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(s(557));e[We]=t}else xr(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;fl(t),e=!1}else n=wr(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?($s(t),t):($s(t),null);if(128&t.flags)throw Error(s(558))}return fl(t),null;case 13:if(i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(r=_r(t),null!==i&&null!==i.dehydrated){if(null===e){if(!r)throw Error(s(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(s(317));r[We]=t}else xr(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;fl(t),r=!1}else r=wr(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return 256&t.flags?($s(t),t):($s(t),null)}return $s(t),128&t.flags?(t.lanes=n,t):(n=null!==i,e=null!==e&&null!==e.memoizedState,n&&(r=null,null!==(i=t.child).alternate&&null!==i.alternate.memoizedState&&null!==i.alternate.memoizedState.cachePool&&(r=i.alternate.memoizedState.cachePool.pool),a=null,null!==i.memoizedState&&null!==i.memoizedState.cachePool&&(a=i.memoizedState.cachePool.pool),a!==r&&(i.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),hl(t,t.updateQueue),fl(t),null);case 4:return Q(),null===e&&td(t.stateNode.containerInfo),fl(t),null;case 10:return Tr(t.type),fl(t),null;case 19:if(F(Us),null===(i=t.memoizedState))return fl(t),null;if(r=!!(128&t.flags),null===(a=i.rendering))if(r)pl(i,!1);else{if(0!==Cc||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(a=Hs(e))){for(t.flags|=128,pl(i,!1),e=a.updateQueue,t.updateQueue=e,hl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Wi(n,e),n=n.sibling;return $(Us,1&Us.current|2),pr&&ar(t,i.treeForkCount),t.child}e=e.sibling}null!==i.tail&&ue()>Oc&&(t.flags|=128,r=!0,pl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=Hs(a))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,hl(t,e),pl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!a.alternate&&!pr)return fl(t),null}else 2*ue()-i.renderingStartTime>Oc&&536870912!==n&&(t.flags|=128,r=!0,pl(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=i.last)?e.sibling=a:t.child=a,i.last=a)}return null!==i.tail?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ue(),e.sibling=null,n=Us.current,$(Us,r?1&n|2:1&n),pr&&ar(t,i.treeForkCount),e):(fl(t),null);case 22:case 23:return $s(t),As(),i=null!==t.memoizedState,null!==e?null!==e.memoizedState!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?!!(536870912&n)&&!(128&t.flags)&&(fl(t),6&t.subtreeFlags&&(t.flags|=8192)):fl(t),null!==(n=t.updateQueue)&&hl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),i=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),null!==e&&F(Jr),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Tr($r),fl(t),null;case 25:case 30:return null}throw Error(s(156,t.tag))}function gl(e,t){switch(cr(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Tr($r),Q(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return K(t),null;case 31:if(null!==t.memoizedState){if($s(t),null===t.alternate)throw Error(s(340));xr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if($s(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));xr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return F(Us),null;case 4:return Q(),null;case 10:return Tr(t.type),null;case 22:case 23:return $s(t),As(),null!==e&&F(Jr),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Tr($r),null;default:return null}}function vl(e,t){switch(cr(t),t.tag){case 3:Tr($r),Q();break;case 26:case 27:case 5:K(t);break;case 4:Q();break;case 31:null!==t.memoizedState&&$s(t);break;case 13:$s(t);break;case 19:F(Us);break;case 10:Tr(t.type);break;case 22:case 23:$s(t),As(),null!==e&&F(Jr);break;case 24:Tr($r)}}function yl(e,t){try{var n=t.updateQueue,i=null!==n?n.lastEffect:null;if(null!==i){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var s=n.create,a=n.inst;i=s(),a.destroy=i}n=n.next}while(n!==r)}}catch(o){Cu(t,t.return,o)}}function bl(e,t,n){try{var i=t.updateQueue,r=null!==i?i.lastEffect:null;if(null!==r){var s=r.next;i=s;do{if((i.tag&e)===e){var a=i.inst,o=a.destroy;if(void 0!==o){a.destroy=void 0,r=t;var l=n,c=o;try{c()}catch(u){Cu(r,l,u)}}}i=i.next}while(i!==s)}}catch(u){Cu(t,t.return,u)}}function _l(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Ts(t,n)}catch(i){Cu(e,e.return,i)}}}function xl(e,t,n){n.props=Co(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){Cu(e,t,i)}}function wl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;default:i=e.stateNode}"function"==typeof n?e.refCleanup=n(i):n.current=i}}catch(r){Cu(e,t,r)}}function kl(e,t){var n=e.ref,i=e.refCleanup;if(null!==n)if("function"==typeof i)try{i()}catch(r){Cu(e,t,r)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(s){Cu(e,t,s)}else n.current=null}function Sl(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){Cu(e,e.return,r)}}function Cl(e,t,n){try{var i=e.stateNode;!function(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,a=null,o=null,l=null,c=null,u=null,d=null;for(f in n){var h=n[f];if(n.hasOwnProperty(f)&&null!=h)switch(f){case"checked":case"value":break;case"defaultValue":c=h;default:i.hasOwnProperty(f)||hd(e,t,f,null,i,h)}}for(var p in i){var f=i[p];if(h=n[p],i.hasOwnProperty(p)&&(null!=f||null!=h))switch(p){case"type":a=f;break;case"name":r=f;break;case"checked":u=f;break;case"defaultChecked":d=f;break;case"value":o=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(s(137,t));break;default:f!==h&&hd(e,t,p,f,i,h)}}return void _t(e,o,l,c,u,d,a,r);case"select":for(a in f=o=l=p=null,n)if(c=n[a],n.hasOwnProperty(a)&&null!=c)switch(a){case"value":break;case"multiple":f=c;default:i.hasOwnProperty(a)||hd(e,t,a,null,i,c)}for(r in i)if(a=i[r],c=n[r],i.hasOwnProperty(r)&&(null!=a||null!=c))switch(r){case"value":p=a;break;case"defaultValue":l=a;break;case"multiple":o=a;default:a!==c&&hd(e,t,r,a,i,c)}return t=l,n=o,i=f,void(null!=p?kt(e,!!n,p,!1):!!i!=!!n&&(null!=t?kt(e,!!n,t,!0):kt(e,!!n,n?[]:"",!1)));case"textarea":for(l in f=p=null,n)if(r=n[l],n.hasOwnProperty(l)&&null!=r&&!i.hasOwnProperty(l))switch(l){case"value":case"children":break;default:hd(e,t,l,null,i,r)}for(o in i)if(r=i[o],a=n[o],i.hasOwnProperty(o)&&(null!=r||null!=a))switch(o){case"value":p=r;break;case"defaultValue":f=r;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=r)throw Error(s(91));break;default:r!==a&&hd(e,t,o,r,i,a)}return void St(e,p,f);case"option":for(var m in n)if(p=n[m],n.hasOwnProperty(m)&&null!=p&&!i.hasOwnProperty(m))if("selected"===m)e.selected=!1;else hd(e,t,m,null,i,p);for(c in i)if(p=i[c],f=n[c],i.hasOwnProperty(c)&&p!==f&&(null!=p||null!=f))if("selected"===c)e.selected=p&&"function"!=typeof p&&"symbol"!=typeof p;else hd(e,t,c,p,i,f);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)p=n[g],n.hasOwnProperty(g)&&null!=p&&!i.hasOwnProperty(g)&&hd(e,t,g,null,i,p);for(u in i)if(p=i[u],f=n[u],i.hasOwnProperty(u)&&p!==f&&(null!=p||null!=f))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(s(137,t));break;default:hd(e,t,u,p,i,f)}return;default:if(Pt(t)){for(var v in n)p=n[v],n.hasOwnProperty(v)&&void 0!==p&&!i.hasOwnProperty(v)&&pd(e,t,v,void 0,i,p);for(d in i)p=i[d],f=n[d],!i.hasOwnProperty(d)||p===f||void 0===p&&void 0===f||pd(e,t,d,p,i,f);return}}for(var y in n)p=n[y],n.hasOwnProperty(y)&&null!=p&&!i.hasOwnProperty(y)&&hd(e,t,y,null,i,p);for(h in i)p=i[h],f=n[h],!i.hasOwnProperty(h)||p===f||null==p&&null==f||hd(e,t,h,p,i,f)}(i,e.type,n,t),i[Ve]=t}catch(r){Cu(e,e.return,r)}}function El(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Td(e.type)||4===e.tag}function Nl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||El(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Td(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Tl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Lt));else if(4!==i&&(27===i&&Td(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Tl(e,t,n),e=e.sibling;null!==e;)Tl(e,t,n),e=e.sibling}function jl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&(27===i&&Td(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(jl(e,t,n),e=e.sibling;null!==e;)jl(e,t,n),e=e.sibling}function Pl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);fd(t,i,n),t[We]=e,t[Ve]=n}catch(s){Cu(e,e.return,s)}}var Il=!1,Dl=!1,Al=!1,Ll="function"==typeof WeakSet?WeakSet:Set,Rl=null;function Ol(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Kl(e,n),4&i&&yl(5,n);break;case 1:if(Kl(e,n),4&i)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){Cu(n,n.return,a)}else{var r=Co(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){Cu(n,n.return,o)}}64&i&&_l(n),512&i&&wl(n,n.return);break;case 3:if(Kl(e,n),64&i&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{Ts(e,t)}catch(a){Cu(n,n.return,a)}}break;case 27:null===t&&4&i&&Pl(n);case 26:case 5:Kl(e,n),null===t&&4&i&&Sl(n),512&i&&wl(n,n.return);break;case 12:Kl(e,n);break;case 31:Kl(e,n),4&i&&Hl(e,n);break;case 13:Kl(e,n),4&i&&Wl(e,n),64&i&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}(e,n=ju.bind(null,n))));break;case 22:if(!(i=null!==n.memoizedState||Il)){t=null!==t&&null!==t.memoizedState||Dl,r=Il;var s=Dl;Il=i,(Dl=t)&&!s?Yl(e,n,!!(8772&n.subtreeFlags)):Kl(e,n),Il=r,Dl=s}break;case 30:break;default:Kl(e,n)}}function Ml(e){var t=e.alternate;null!==t&&(e.alternate=null,Ml(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Xe(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var zl=null,Fl=!1;function $l(e,t,n){for(n=n.child;null!==n;)Ul(e,t,n),n=n.sibling}function Ul(e,t,n){if(_e&&"function"==typeof _e.onCommitFiberUnmount)try{_e.onCommitFiberUnmount(be,n)}catch(s){}switch(n.tag){case 26:Dl||kl(n,t),$l(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Dl||kl(n,t);var i=zl,r=Fl;Td(n.type)&&(zl=n.stateNode,Fl=!1),$l(e,t,n),$d(n.stateNode),zl=i,Fl=r;break;case 5:Dl||kl(n,t);case 6:if(i=zl,r=Fl,zl=null,$l(e,t,n),Fl=r,null!==(zl=i))if(Fl)try{(9===zl.nodeType?zl.body:"HTML"===zl.nodeName?zl.ownerDocument.body:zl).removeChild(n.stateNode)}catch(a){Cu(n,t,a)}else try{zl.removeChild(n.stateNode)}catch(a){Cu(n,t,a)}break;case 18:null!==zl&&(Fl?(jd(9===(e=zl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),qh(e)):jd(zl,n.stateNode));break;case 4:i=zl,r=Fl,zl=n.stateNode.containerInfo,Fl=!0,$l(e,t,n),zl=i,Fl=r;break;case 0:case 11:case 14:case 15:bl(2,n,t),Dl||bl(4,n,t),$l(e,t,n);break;case 1:Dl||(kl(n,t),"function"==typeof(i=n.stateNode).componentWillUnmount&&xl(n,t,i)),$l(e,t,n);break;case 21:$l(e,t,n);break;case 22:Dl=(i=Dl)||null!==n.memoizedState,$l(e,t,n),Dl=i;break;default:$l(e,t,n)}}function Hl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{qh(e)}catch(n){Cu(t,t.return,n)}}}function Wl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{qh(e)}catch(n){Cu(t,t.return,n)}}function Vl(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Ll),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Ll),t;default:throw Error(s(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var i=Pu.bind(null,e,t);t.then(i,i)}})}function Bl(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i],a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(Td(l.type)){zl=l.stateNode,Fl=!1;break e}break;case 5:zl=l.stateNode,Fl=!1;break e;case 3:case 4:zl=l.stateNode.containerInfo,Fl=!0;break e}l=l.return}if(null===zl)throw Error(s(160));Ul(a,o,r),zl=null,Fl=!1,null!==(a=r.alternate)&&(a.return=null),r.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Gl(t,e),t=t.sibling}var ql=null;function Gl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Bl(t,e),Ql(e),4&i&&(bl(3,e,e.return),yl(3,e),bl(5,e,e.return));break;case 1:Bl(t,e),Ql(e),512&i&&(Dl||null===n||kl(n,n.return)),64&i&&Il&&(null!==(e=e.updateQueue)&&(null!==(i=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?i:n.concat(i))));break;case 26:var r=ql;if(Bl(t,e),Ql(e),512&i&&(Dl||null===n||kl(n,n.return)),4&i){var a=null!==n?n.memoizedState:null;if(i=e.memoizedState,null===n)if(null===i)if(null===e.stateNode){e:{i=e.type,n=e.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":(!(a=r.getElementsByTagName("title")[0])||a[Ke]||a[We]||"http://www.w3.org/2000/svg"===a.namespaceURI||a.hasAttribute("itemprop"))&&(a=r.createElement(i),r.head.insertBefore(a,r.querySelector("head > title"))),fd(a,i,n),a[We]=e,nt(a),i=a;break e;case"link":var o=rh("link","href",r).get(i+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((a=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&a.getAttribute("rel")===(null==n.rel?null:n.rel)&&a.getAttribute("title")===(null==n.title?null:n.title)&&a.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}fd(a=r.createElement(i),i,n),r.head.appendChild(a);break;case"meta":if(o=rh("meta","content",r).get(i+(n.content||"")))for(l=0;l<o.length;l++)if((a=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&a.getAttribute("name")===(null==n.name?null:n.name)&&a.getAttribute("property")===(null==n.property?null:n.property)&&a.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&a.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}fd(a=r.createElement(i),i,n),r.head.appendChild(a);break;default:throw Error(s(468,i))}a[We]=e,nt(a),i=a}e.stateNode=i}else sh(r,e.type,e.stateNode);else e.stateNode=Zd(r,i,e.memoizedProps);else a!==i?(null===a?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):a.count--,null===i?sh(r,e.type,e.stateNode):Zd(r,i,e.memoizedProps)):null===i&&null!==e.stateNode&&Cl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Bl(t,e),Ql(e),512&i&&(Dl||null===n||kl(n,n.return)),null!==n&&4&i&&Cl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Bl(t,e),Ql(e),512&i&&(Dl||null===n||kl(n,n.return)),32&e.flags){r=e.stateNode;try{Et(r,"")}catch(m){Cu(e,e.return,m)}}4&i&&null!=e.stateNode&&Cl(e,r=e.memoizedProps,null!==n?n.memoizedProps:r),1024&i&&(Al=!0);break;case 6:if(Bl(t,e),Ql(e),4&i){if(null===e.stateNode)throw Error(s(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(m){Cu(e,e.return,m)}}break;case 3:if(ih=null,r=ql,ql=Wd(t.containerInfo),Bl(t,e),ql=r,Ql(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{qh(t.containerInfo)}catch(m){Cu(e,e.return,m)}Al&&(Al=!1,Jl(e));break;case 4:i=ql,ql=Wd(e.stateNode.containerInfo),Bl(t,e),Ql(e),ql=i;break;case 12:default:Bl(t,e),Ql(e);break;case 31:case 19:Bl(t,e),Ql(e),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,Vl(e,i)));break;case 13:Bl(t,e),Ql(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(Lc=ue()),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,Vl(e,i)));break;case 22:r=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=Il,d=Dl;if(Il=u||r,Dl=d||c,Bl(t,e),Dl=d,Il=u,Ql(e),8192&i)e:for(t=e.stateNode,t._visibility=r?-2&t._visibility:1|t._visibility,r&&(null===n||c||Il||Dl||Xl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(a=c.stateNode,r)"function"==typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,p=null!=h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==p||"boolean"==typeof p?"":(""+p).trim()}}catch(m){Cu(c,c.return,m)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=r?"":c.memoizedProps}catch(m){Cu(c,c.return,m)}}}else if(18===t.tag){if(null===n){c=t;try{var f=c.stateNode;r?Pd(f,!0):Pd(c.stateNode,!1)}catch(m){Cu(c,c.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&i&&(null!==(i=e.updateQueue)&&(null!==(n=i.retryQueue)&&(i.retryQueue=null,Vl(e,n))));case 30:case 21:}}function Ql(e){var t=e.flags;if(2&t){try{for(var n,i=e.return;null!==i;){if(El(i)){n=i;break}i=i.return}if(null==n)throw Error(s(160));switch(n.tag){case 27:var r=n.stateNode;jl(e,Nl(e),r);break;case 5:var a=n.stateNode;32&n.flags&&(Et(a,""),n.flags&=-33),jl(e,Nl(e),a);break;case 3:case 4:var o=n.stateNode.containerInfo;Tl(e,Nl(e),o);break;default:throw Error(s(161))}}catch(l){Cu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Jl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Jl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Kl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Ol(e,t.alternate,t),t=t.sibling}function Xl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:bl(4,t,t.return),Xl(t);break;case 1:kl(t,t.return);var n=t.stateNode;"function"==typeof n.componentWillUnmount&&xl(t,t.return,n),Xl(t);break;case 27:$d(t.stateNode);case 26:case 5:kl(t,t.return),Xl(t);break;case 22:null===t.memoizedState&&Xl(t);break;default:Xl(t)}e=e.sibling}}function Yl(e,t,n){for(n=n&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var i=t.alternate,r=e,s=t,a=s.flags;switch(s.tag){case 0:case 11:case 15:Yl(r,s,n),yl(4,s);break;case 1:if(Yl(r,s,n),"function"==typeof(r=(i=s).stateNode).componentDidMount)try{r.componentDidMount()}catch(c){Cu(i,i.return,c)}if(null!==(r=(i=s).updateQueue)){var o=i.stateNode;try{var l=r.shared.hiddenCallbacks;if(null!==l)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)Ns(l[r],o)}catch(c){Cu(i,i.return,c)}}n&&64&a&&_l(s),wl(s,s.return);break;case 27:Pl(s);case 26:case 5:Yl(r,s,n),n&&null===i&&4&a&&Sl(s),wl(s,s.return);break;case 12:Yl(r,s,n);break;case 31:Yl(r,s,n),n&&4&a&&Hl(r,s);break;case 13:Yl(r,s,n),n&&4&a&&Wl(r,s);break;case 22:null===s.memoizedState&&Yl(r,s,n),wl(s,s.return);break;case 30:break;default:Yl(r,s,n)}t=t.sibling}}function Zl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Hr(n))}function ec(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Hr(e))}function tc(e,t,n,i){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)nc(e,t,n,i),t=t.sibling}function nc(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:tc(e,t,n,i),2048&r&&yl(9,t);break;case 1:case 31:case 13:default:tc(e,t,n,i);break;case 3:tc(e,t,n,i),2048&r&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Hr(e)));break;case 12:if(2048&r){tc(e,t,n,i),e=t.stateNode;try{var s=t.memoizedProps,a=s.id,o=s.onPostCommit;"function"==typeof o&&o(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){Cu(t,t.return,l)}}else tc(e,t,n,i);break;case 23:break;case 22:s=t.stateNode,a=t.alternate,null!==t.memoizedState?2&s._visibility?tc(e,t,n,i):rc(e,t):2&s._visibility?tc(e,t,n,i):(s._visibility|=2,ic(e,t,n,i,!!(10256&t.subtreeFlags)||!1)),2048&r&&Zl(a,t);break;case 24:tc(e,t,n,i),2048&r&&ec(t.alternate,t)}}function ic(e,t,n,i,r){for(r=r&&(!!(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var s=e,a=t,o=n,l=i,c=a.flags;switch(a.tag){case 0:case 11:case 15:ic(s,a,o,l,r),yl(8,a);break;case 23:break;case 22:var u=a.stateNode;null!==a.memoizedState?2&u._visibility?ic(s,a,o,l,r):rc(s,a):(u._visibility|=2,ic(s,a,o,l,r)),r&&2048&c&&Zl(a.alternate,a);break;case 24:ic(s,a,o,l,r),r&&2048&c&&ec(a.alternate,a);break;default:ic(s,a,o,l,r)}t=t.sibling}}function rc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:rc(n,i),2048&r&&Zl(i.alternate,i);break;case 24:rc(n,i),2048&r&&ec(i.alternate,i);break;default:rc(n,i)}t=t.sibling}}var sc=8192;function ac(e,t,n){if(e.subtreeFlags&sc)for(e=e.child;null!==e;)oc(e,t,n),e=e.sibling}function oc(e,t,n){switch(e.tag){case 26:ac(e,t,n),e.flags&sc&&null!==e.memoizedState&&function(e,t,n,i){if(!("stylesheet"!==n.type||"string"==typeof i.media&&!1===matchMedia(i.media).matches||4&n.state.loading)){if(null===n.instance){var r=Qd(i.href),s=t.querySelector(Jd(r));if(s)return null!==(t=s._p)&&"object"==typeof t&&"function"==typeof t.then&&(e.count++,e=lh.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=s,void nt(s);s=t.ownerDocument||t,i=Kd(i),(r=Ud.get(r))&&th(i,r),nt(s=s.createElement("link"));var a=s;a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),fd(s,"link",i),n.instance=s}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(3&n.state.loading)&&(e.count++,n=lh.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,ql,e.memoizedState,e.memoizedProps);break;case 5:default:ac(e,t,n);break;case 3:case 4:var i=ql;ql=Wd(e.stateNode.containerInfo),ac(e,t,n),ql=i;break;case 22:null===e.memoizedState&&(null!==(i=e.alternate)&&null!==i.memoizedState?(i=sc,sc=16777216,ac(e,t,n),sc=i):ac(e,t,n))}}function lc(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function cc(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var i=t[n];Rl=i,hc(i,e)}lc(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)uc(e),e=e.sibling}function uc(e){switch(e.tag){case 0:case 11:case 15:cc(e),2048&e.flags&&bl(9,e,e.return);break;case 3:case 12:default:cc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,dc(e)):cc(e)}}function dc(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var i=t[n];Rl=i,hc(i,e)}lc(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:bl(8,t,t.return),dc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,dc(t));break;default:dc(t)}e=e.sibling}}function hc(e,t){for(;null!==Rl;){var n=Rl;switch(n.tag){case 0:case 11:case 15:bl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var i=n.memoizedState.cachePool.pool;null!=i&&i.refCount++}break;case 24:Hr(n.memoizedState.cache)}if(null!==(i=n.child))i.return=n,Rl=i;else e:for(n=e;null!==Rl;){var r=(i=Rl).sibling,s=i.return;if(Ml(i),i===n){Rl=null;break e}if(null!==r){r.return=s,Rl=r;break e}Rl=s}}}var pc={getCacheForType:function(e){var t=Lr($r),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Lr($r).controller.signal}},fc="function"==typeof WeakMap?WeakMap:Map,mc=0,gc=null,vc=null,yc=0,bc=0,_c=null,xc=!1,wc=!1,kc=!1,Sc=0,Cc=0,Ec=0,Nc=0,Tc=0,jc=0,Pc=0,Ic=null,Dc=null,Ac=!1,Lc=0,Rc=0,Oc=1/0,Mc=null,zc=null,Fc=0,$c=null,Uc=null,Hc=0,Wc=0,Vc=null,Bc=null,qc=0,Gc=null;function Qc(){return 2&mc&&0!==yc?yc&-yc:null!==A.T?Vu():$e()}function Jc(){if(0===jc)if(536870912&yc&&!pr)jc=536870912;else{var e=Ee;!(3932160&(Ee<<=1))&&(Ee=262144),jc=e}return null!==(e=Ls.current)&&(e.flags|=32),jc}function Kc(e,t,n){(e!==gc||2!==bc&&9!==bc)&&null===e.cancelPendingCommit||(iu(e,0),eu(e,yc,jc,!1)),Le(e,n),2&mc&&e===gc||(e===gc&&(!(2&mc)&&(Nc|=n),4===Cc&&eu(e,yc,jc,!1)),Mu(e))}function Xc(e,t,n){if(6&mc)throw Error(s(327));for(var i=!n&&!(127&t)&&0===(t&e.expiredLanes)||Pe(e,t),r=i?function(e,t){var n=mc;mc|=2;var i=au(),r=ou();gc!==e||yc!==t?(Mc=null,Oc=ue()+500,iu(e,t)):wc=Pe(e,t);e:for(;;)try{if(0!==bc&&null!==vc){t=vc;var a=_c;t:switch(bc){case 1:bc=0,_c=null,fu(e,t,a,1);break;case 2:case 9:if(is(a)){bc=0,_c=null,pu(t);break}t=function(){2!==bc&&9!==bc||gc!==e||(bc=7),Mu(e)},a.then(t,t);break e;case 3:bc=7;break e;case 4:bc=5;break e;case 7:is(a)?(bc=0,_c=null,pu(t)):(bc=0,_c=null,fu(e,t,a,7));break;case 5:var o=null;switch(vc.tag){case 26:o=vc.memoizedState;case 5:case 27:var l=vc;if(o?ah(o):l.stateNode.complete){bc=0,_c=null;var c=l.sibling;if(null!==c)vc=c;else{var u=l.return;null!==u?(vc=u,mu(u)):vc=null}break t}}bc=0,_c=null,fu(e,t,a,5);break;case 6:bc=0,_c=null,fu(e,t,a,6);break;case 8:nu(),Cc=6;break e;default:throw Error(s(462))}}du();break}catch(d){ru(e,d)}return Er=Cr=null,A.H=i,A.A=r,mc=n,null!==vc?0:(gc=null,yc=0,Di(),Cc)}(e,t):cu(e,t,!0),a=i;;){if(0===r){wc&&!i&&eu(e,t,0,!1);break}if(n=e.current.alternate,!a||Zc(n)){if(2===r){if(a=t,e.errorRecoveryDisabledLanes&a)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;r=Ic;var c=l.current.memoizedState.isDehydrated;if(c&&(iu(l,o).flags|=256),2!==(o=cu(l,o,!1))){if(kc&&!c){l.errorRecoveryDisabledLanes|=a,Nc|=a,r=4;break e}a=Dc,Dc=r,null!==a&&(null===Dc?Dc=a:Dc.push.apply(Dc,a))}r=o}if(a=!1,2!==r)continue}}if(1===r){iu(e,0),eu(e,t,0,!0);break}e:{switch(i=e,a=r){case 0:case 1:throw Error(s(345));case 4:if((4194048&t)!==t)break;case 6:eu(i,t,jc,!xc);break e;case 2:Dc=null;break;case 3:case 5:break;default:throw Error(s(329))}if((62914560&t)===t&&10<(r=Lc+300-ue())){if(eu(i,t,jc,!xc),0!==je(i,0,!0))break e;Hc=t,i.timeoutHandle=kd(Yc.bind(null,i,n,Dc,Mc,Ac,t,jc,Nc,Pc,xc,a,"Throttled",-0,0),r)}else Yc(i,n,Dc,Mc,Ac,t,jc,Nc,Pc,xc,a,null,-0,0)}break}r=cu(e,t,!1),a=!1}Mu(e)}function Yc(e,t,n,i,r,s,a,o,l,c,u,d,h,p){if(e.timeoutHandle=-1,8192&(d=t.subtreeFlags)||!(16785408&~d)){oc(t,s,d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Lt});var f=(62914560&s)===s?Lc-ue():(4194048&s)===s?Rc-ue():0;if(null!==(f=function(e,t){return e.stylesheets&&0===e.count&&uh(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var i=setTimeout(function(){if(e.stylesheets&&uh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===oh&&(oh=62500*function(){if("function"==typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var r=n[i],s=r.transferSize,a=r.initiatorType,o=r.duration;if(s&&o&&md(a)){for(a=0,o=r.responseEnd,i+=1;i<n.length;i++){var l=n[i],c=l.startTime;if(c>o)break;var u=l.transferSize,d=l.initiatorType;u&&md(d)&&(a+=u*((l=l.responseEnd)<o?1:(o-c)/(l-c)))}if(--i,t+=8*(s+a)/(r.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"==typeof(e=navigator.connection.downlink)?e:5}());var r=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&uh(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>oh?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(i),clearTimeout(r)}}:null}(d,f)))return Hc=s,e.cancelPendingCommit=f(vu.bind(null,e,t,s,n,i,r,a,o,l,u,d,null,h,p)),void eu(e,s,a,!c)}vu(e,t,s,n,i,r,a,o,l)}function Zc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!ei(s(),r))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function eu(e,t,n,i){t&=~Tc,t&=~Nc,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var s=31-we(r),a=1<<s;i[s]=-1,r&=~a}0!==n&&Re(e,n,t)}function tu(){return!!(6&mc)||(zu(0),!1)}function nu(){if(null!==vc){if(0===bc)var e=vc.return;else Er=Cr=null,la(e=vc),cs=null,us=0,e=vc;for(;null!==e;)vl(e.alternate,e),e=e.return;vc=null}}function iu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,Sd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Hc=0,nu(),gc=e,vc=n=Hi(e.current,null),yc=t,bc=0,_c=null,xc=!1,wc=Pe(e,t),kc=!1,Pc=jc=Tc=Nc=Ec=Cc=0,Dc=Ic=null,Ac=!1,8&t&&(t|=32&t);var i=e.entangledLanes;if(0!==i)for(e=e.entanglements,i&=t;0<i;){var r=31-we(i),s=1<<r;t|=e[r],i&=~s}return Sc=t,Di(),n}function ru(e,t){Vs=null,A.H=vo,t===Zr||t===ts?(t=os(),bc=3):t===es?(t=os(),bc=4):bc=t===Lo?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,_c=t,null===vc&&(Cc=1,jo(e,Ki(t,e.current)))}function su(){var e=Ls.current;return null===e||((4194048&yc)===yc?null===Rs:!!((62914560&yc)===yc||536870912&yc)&&e===Rs)}function au(){var e=A.H;return A.H=vo,null===e?vo:e}function ou(){var e=A.A;return A.A=pc,e}function lu(){Cc=4,xc||(4194048&yc)!==yc&&null!==Ls.current||(wc=!0),!(134217727&Ec)&&!(134217727&Nc)||null===gc||eu(gc,yc,jc,!1)}function cu(e,t,n){var i=mc;mc|=2;var r=au(),s=ou();gc===e&&yc===t||(Mc=null,iu(e,t)),t=!1;var a=Cc;e:for(;;)try{if(0!==bc&&null!==vc){var o=vc,l=_c;switch(bc){case 8:nu(),a=6;break e;case 3:case 2:case 9:case 6:null===Ls.current&&(t=!0);var c=bc;if(bc=0,_c=null,fu(e,o,l,c),n&&wc){a=0;break e}break;default:c=bc,bc=0,_c=null,fu(e,o,l,c)}}uu(),a=Cc;break}catch(u){ru(e,u)}return t&&e.shellSuspendCounter++,Er=Cr=null,mc=i,A.H=r,A.A=s,null===vc&&(gc=null,yc=0,Di()),a}function uu(){for(;null!==vc;)hu(vc)}function du(){for(;null!==vc&&!oe();)hu(vc)}function hu(e){var t=ll(e.alternate,e,Sc);e.memoizedProps=e.pendingProps,null===t?mu(e):vc=t}function pu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Go(n,t,t.pendingProps,t.type,void 0,yc);break;case 11:t=Go(n,t,t.pendingProps,t.type.render,t.ref,yc);break;case 5:la(t);default:vl(n,t),t=ll(n,t=vc=Wi(t,Sc),Sc)}e.memoizedProps=e.pendingProps,null===t?mu(e):vc=t}function fu(e,t,n,i){Er=Cr=null,la(t),cs=null,us=0;var r=t.return;try{if(function(e,t,n,i,r){if(n.flags|=32768,null!==i&&"object"==typeof i&&"function"==typeof i.then){if(null!==(t=n.alternate)&&Ir(t,n,r,!0),null!==(n=Ls.current)){switch(n.tag){case 31:case 13:return null===Rs?lu():null===n.alternate&&0===Cc&&(Cc=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===ns?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([i]):t.add(i),Eu(e,i,r)),!1;case 22:return n.flags|=65536,i===ns?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([i]):n.add(i),Eu(e,i,r)),!1}throw Error(s(435,n.tag))}return Eu(e,i,r),lu(),!1}if(pr)return null!==(t=Ls.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==gr&&kr(Ki(e=Error(s(422),{cause:i}),n))):(i!==gr&&kr(Ki(t=Error(s(423),{cause:i}),n)),(e=e.current.alternate).flags|=65536,r&=-r,e.lanes|=r,i=Ki(i,n),ks(e,r=Io(e.stateNode,i,r)),4!==Cc&&(Cc=2)),!1;var a=Error(s(520),{cause:i});if(a=Ki(a,n),null===Ic?Ic=[a]:Ic.push(a),4!==Cc&&(Cc=2),null===t)return!0;i=Ki(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,ks(n,e=Io(n.stateNode,i,e)),!1;case 1:if(t=n.type,a=n.stateNode,!(128&n.flags||"function"!=typeof t.getDerivedStateFromError&&(null===a||"function"!=typeof a.componentDidCatch||null!==zc&&zc.has(a))))return n.flags|=65536,r&=-r,n.lanes|=r,Ao(r=Do(r),e,n,i),ks(n,r),!1}n=n.return}while(null!==n);return!1}(e,r,t,n,yc))return Cc=1,jo(e,Ki(n,e.current)),void(vc=null)}catch(a){if(null!==r)throw vc=r,a;return Cc=1,jo(e,Ki(n,e.current)),void(vc=null)}32768&t.flags?(pr||1===i?e=!0:wc||536870912&yc?e=!1:(xc=e=!0,(2===i||9===i||3===i||6===i)&&(null!==(i=Ls.current)&&13===i.tag&&(i.flags|=16384))),gu(t,e)):mu(t)}function mu(e){var t=e;do{if(32768&t.flags)return void gu(t,xc);e=t.return;var n=ml(t.alternate,t,Sc);if(null!==n)return void(vc=n);if(null!==(t=t.sibling))return void(vc=t);vc=t=e}while(null!==t);0===Cc&&(Cc=5)}function gu(e,t){do{var n=gl(e.alternate,e);if(null!==n)return n.flags&=32767,void(vc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(vc=e);vc=e=n}while(null!==e);Cc=6,vc=null}function vu(e,t,n,i,r,a,o,l,c){e.cancelPendingCommit=null;do{wu()}while(0!==Fc);if(6&mc)throw Error(s(327));if(null!==t){if(t===e.current)throw Error(s(177));if(a=t.lanes|t.childLanes,function(e,t,n,i,r,s){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=a&~n;0<n;){var u=31-we(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var p=h[u];null!==p&&(p.lane&=-536870913)}n&=~d}0!==i&&Re(e,i,0),0!==s&&0===r&&0!==e.tag&&(e.suspendedLanes|=s&~(a&~t))}(e,n,a|=Ii,o,l,c),e===gc&&(vc=gc=null,yc=0),Uc=t,$c=e,Hc=n,Wc=a,Vc=r,Bc=i,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,re(fe,function(){return ku(),null})):(e.callbackNode=null,e.callbackPriority=0),i=!!(13878&t.flags),13878&t.subtreeFlags||i){i=A.T,A.T=null,r=L.p,L.p=2,o=mc,mc|=4;try{!function(e,t){if(e=e.containerInfo,gd=xh,ai(e=si(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch(g){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==r&&3!==h.nodeType||(l=o+r),h!==a||0!==i&&3!==h.nodeType||(c=o+i),3===h.nodeType&&(o+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===r&&(l=o),p===a&&++d===i&&(c=o),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(vd={focusedElem:e,selectionRange:n},xh=!1,Rl=t;null!==Rl;)if(e=(t=Rl).child,1028&t.subtreeFlags&&null!==e)e.return=t,Rl=e;else for(;null!==Rl;){switch(a=(t=Rl).alternate,e=t.flags,t.tag){case 0:if(4&e&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(r=e[n]).ref.impl=r.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==a){e=void 0,n=t,r=a.memoizedProps,a=a.memoizedState,i=n.stateNode;try{var m=Co(n.type,r);e=i.getSnapshotBeforeUpdate(m,a),i.__reactInternalSnapshotBeforeUpdate=e}catch(v){Cu(n,n.return,v)}}break;case 3:if(1024&e)if(9===(n=(e=t.stateNode.containerInfo).nodeType))Id(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Id(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(s(163))}if(null!==(e=t.sibling)){e.return=t.return,Rl=e;break}Rl=t.return}}(e,t)}finally{mc=o,L.p=r,A.T=i}}Fc=1,yu(),bu(),_u()}}function yu(){if(1===Fc){Fc=0;var e=$c,t=Uc,n=!!(13878&t.flags);if(13878&t.subtreeFlags||n){n=A.T,A.T=null;var i=L.p;L.p=2;var r=mc;mc|=4;try{Gl(t,e);var s=vd,a=si(e.containerInfo),o=s.focusedElem,l=s.selectionRange;if(a!==o&&o&&o.ownerDocument&&ri(o.ownerDocument.documentElement,o)){if(null!==l&&ai(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var p=h.getSelection(),f=o.textContent.length,m=Math.min(l.start,f),g=void 0===l.end?m:Math.min(l.end,f);!p.extend&&m>g&&(a=g,g=m,m=a);var v=ii(o,m),y=ii(o,g);if(v&&y&&(1!==p.rangeCount||p.anchorNode!==v.node||p.anchorOffset!==v.offset||p.focusNode!==y.node||p.focusOffset!==y.offset)){var b=d.createRange();b.setStart(v.node,v.offset),p.removeAllRanges(),m>g?(p.addRange(b),p.extend(y.node,y.offset)):(b.setEnd(y.node,y.offset),p.addRange(b))}}}}for(d=[],p=o;p=p.parentNode;)1===p.nodeType&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"==typeof o.focus&&o.focus(),o=0;o<d.length;o++){var _=d[o];_.element.scrollLeft=_.left,_.element.scrollTop=_.top}}xh=!!gd,vd=gd=null}finally{mc=r,L.p=i,A.T=n}}e.current=t,Fc=2}}function bu(){if(2===Fc){Fc=0;var e=$c,t=Uc,n=!!(8772&t.flags);if(8772&t.subtreeFlags||n){n=A.T,A.T=null;var i=L.p;L.p=2;var r=mc;mc|=4;try{Ol(e,t.alternate,t)}finally{mc=r,L.p=i,A.T=n}}Fc=3}}function _u(){if(4===Fc||3===Fc){Fc=0,ce();var e=$c,t=Uc,n=Hc,i=Bc;10256&t.subtreeFlags||10256&t.flags?Fc=5:(Fc=0,Uc=$c=null,xu(e,e.pendingLanes));var r=e.pendingLanes;if(0===r&&(zc=null),Fe(n),t=t.stateNode,_e&&"function"==typeof _e.onCommitFiberRoot)try{_e.onCommitFiberRoot(be,t,void 0,!(128&~t.current.flags))}catch(l){}if(null!==i){t=A.T,r=L.p,L.p=2,A.T=null;try{for(var s=e.onRecoverableError,a=0;a<i.length;a++){var o=i[a];s(o.value,{componentStack:o.stack})}}finally{A.T=t,L.p=r}}3&Hc&&wu(),Mu(e),r=e.pendingLanes,261930&n&&42&r?e===Gc?qc++:(qc=0,Gc=e):qc=0,zu(0)}}function xu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Hr(t)))}function wu(){return yu(),bu(),_u(),ku()}function ku(){if(5!==Fc)return!1;var e=$c,t=Wc;Wc=0;var n=Fe(Hc),i=A.T,r=L.p;try{L.p=32>n?32:n,A.T=null,n=Vc,Vc=null;var a=$c,o=Hc;if(Fc=0,Uc=$c=null,Hc=0,6&mc)throw Error(s(331));var l=mc;if(mc|=4,uc(a.current),nc(a,a.current,o,n),mc=l,zu(0,!1),_e&&"function"==typeof _e.onPostCommitFiberRoot)try{_e.onPostCommitFiberRoot(be,a)}catch(c){}return!0}finally{L.p=r,A.T=i,xu(e,t)}}function Su(e,t,n){t=Ki(n,t),null!==(e=xs(e,t=Io(e.stateNode,t,2),2))&&(Le(e,2),Mu(e))}function Cu(e,t,n){if(3===e.tag)Su(e,e,n);else for(;null!==t;){if(3===t.tag){Su(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof i.componentDidCatch&&(null===zc||!zc.has(i))){e=Ki(n,e),null!==(i=xs(t,n=Do(2),2))&&(Ao(n,i,t,e),Le(i,2),Mu(i));break}}t=t.return}}function Eu(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new fc;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(kc=!0,r.add(n),e=Nu.bind(null,e,t,n),t.then(e,e))}function Nu(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,gc===e&&(yc&n)===n&&(4===Cc||3===Cc&&(62914560&yc)===yc&&300>ue()-Lc?!(2&mc)&&iu(e,0):Tc|=n,Pc===yc&&(Pc=0)),Mu(e)}function Tu(e,t){0===t&&(t=De()),null!==(e=Ri(e,t))&&(Le(e,t),Mu(e))}function ju(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tu(e,n)}function Pu(e,t){var n=0;switch(e.tag){case 31:case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(s(314))}null!==i&&i.delete(t),Tu(e,n)}var Iu=null,Du=null,Au=!1,Lu=!1,Ru=!1,Ou=0;function Mu(e){e!==Du&&null===e.next&&(null===Du?Iu=Du=e:Du=Du.next=e),Lu=!0,Au||(Au=!0,Ed(function(){6&mc?re(he,Fu):$u()}))}function zu(e,t){if(!Ru&&Lu){Ru=!0;do{for(var n=!1,i=Iu;null!==i;){if(0!==e){var r=i.pendingLanes;if(0===r)var s=0;else{var a=i.suspendedLanes,o=i.pingedLanes;s=(1<<31-we(42|e)+1)-1,s=201326741&(s&=r&~(a&~o))?201326741&s|1:s?2|s:0}0!==s&&(n=!0,Wu(i,s))}else s=yc,!(3&(s=je(i,i===gc?s:0,null!==i.cancelPendingCommit||-1!==i.timeoutHandle)))||Pe(i,s)||(n=!0,Wu(i,s));i=i.next}}while(n);Ru=!1}}function Fu(){$u()}function $u(){Lu=Au=!1;var e=0;0!==Ou&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==wd&&(wd=e,!0);return wd=null,!1}()&&(e=Ou);for(var t=ue(),n=null,i=Iu;null!==i;){var r=i.next,s=Uu(i,t);0===s?(i.next=null,null===n?Iu=r:n.next=r,null===r&&(Du=n)):(n=i,(0!==e||3&s)&&(Lu=!0)),i=r}0!==Fc&&5!==Fc||zu(e),0!==Ou&&(Ou=0)}function Uu(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var a=31-we(s),o=1<<a,l=r[a];-1===l?0!==(o&n)&&0===(o&i)||(r[a]=Ie(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}if(n=yc,n=je(e,e===(t=gc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),i=e.callbackNode,0===n||e===t&&(2===bc||9===bc)||null!==e.cancelPendingCommit)return null!==i&&null!==i&&ae(i),e.callbackNode=null,e.callbackPriority=0;if(!(3&n)||Pe(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==i&&ae(i),Fe(n)){case 2:case 8:n=pe;break;case 32:default:n=fe;break;case 268435456:n=ge}return i=Hu.bind(null,e),n=re(n,i),e.callbackPriority=t,e.callbackNode=n,t}return null!==i&&null!==i&&ae(i),e.callbackPriority=2,e.callbackNode=null,2}function Hu(e,t){if(0!==Fc&&5!==Fc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(wu()&&e.callbackNode!==n)return null;var i=yc;return 0===(i=je(e,e===gc?i:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Xc(e,i,t),Uu(e,ue()),null!=e.callbackNode&&e.callbackNode===n?Hu.bind(null,e):null)}function Wu(e,t){if(wu())return null;Xc(e,t,!0)}function Vu(){if(0===Ou){var e=Br;0===e&&(e=Ce,!(261888&(Ce<<=1))&&(Ce=256)),Ou=e}return Ou}function Bu(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:At(""+e)}function qu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Gu=0;Gu<Ei.length;Gu++){var Qu=Ei[Gu];Ni(Qu.toLowerCase(),"on"+(Qu[0].toUpperCase()+Qu.slice(1)))}Ni(yi,"onAnimationEnd"),Ni(bi,"onAnimationIteration"),Ni(_i,"onAnimationStart"),Ni("dblclick","onDoubleClick"),Ni("focusin","onFocus"),Ni("focusout","onBlur"),Ni(xi,"onTransitionRun"),Ni(wi,"onTransitionStart"),Ni(ki,"onTransitionCancel"),Ni(Si,"onTransitionEnd"),at("onMouseEnter",["mouseout","mouseover"]),at("onMouseLeave",["mouseout","mouseover"]),at("onPointerEnter",["pointerout","pointerover"]),at("onPointerLeave",["pointerout","pointerover"]),st("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),st("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),st("onBeforeInput",["compositionend","keypress","textInput","paste"]),st("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),st("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),st("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ju="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ku=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ju));function Xu(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;s=o,r.currentTarget=c;try{s(r)}catch(u){Ti(u)}r.currentTarget=null,s=l}else for(a=0;a<i.length;a++){if(l=(o=i[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;s=o,r.currentTarget=c;try{s(r)}catch(u){Ti(u)}r.currentTarget=null,s=l}}}}function Yu(e,t){var n=t[qe];void 0===n&&(n=t[qe]=new Set);var i=e+"__bubble";n.has(i)||(nd(t,e,2,!1),n.add(i))}function Zu(e,t,n){var i=0;t&&(i|=4),nd(n,e,i,t)}var ed="_reactListening"+Math.random().toString(36).slice(2);function td(e){if(!e[ed]){e[ed]=!0,it.forEach(function(t){"selectionchange"!==t&&(Ku.has(t)||Zu(t,!1,e),Zu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[ed]||(t[ed]=!0,Zu("selectionchange",!1,t))}}function nd(e,t,n,i){switch(Th(t)){case 2:var r=wh;break;case 8:r=kh;break;default:r=Sh}n=r.bind(null,t,n,e),r=void 0,!Vt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function id(e,t,n,i,r){var s=i;if(!(1&t||2&t||null===i))e:for(;;){if(null===i)return;var a=i.tag;if(3===a||4===a){var l=i.stateNode.containerInfo;if(l===r)break;if(4===a)for(a=i.return;null!==a;){var c=a.tag;if((3===c||4===c)&&a.stateNode.containerInfo===r)return;a=a.return}for(;null!==l;){if(null===(a=Ye(l)))return;if(5===(c=a.tag)||6===c||26===c||27===c){i=s=a;continue e}l=l.parentNode}}i=i.return}Ut(function(){var i=s,r=Ot(n),a=[];e:{var l=Ci.get(e);if(void 0!==l){var c=sn,u=e;switch(e){case"keypress":if(0===Kt(n))break e;case"keydown":case"keyup":c=_n;break;case"focusin":u="focus",c=dn;break;case"focusout":u="blur",c=dn;break;case"beforeblur":case"afterblur":c=dn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=cn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=un;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=wn;break;case yi:case bi:case _i:c=hn;break;case Si:c=kn;break;case"scroll":case"scrollend":c=on;break;case"wheel":c=Sn;break;case"copy":case"cut":case"paste":c=pn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=xn;break;case"toggle":case"beforetoggle":c=Cn}var d=!!(4&t),h=!d&&("scroll"===e||"scrollend"===e),p=d?null!==l?l+"Capture":null:l;d=[];for(var f,m=i;null!==m;){var g=m;if(f=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===f||null===p||null!=(g=Ht(m,p))&&d.push(rd(m,g,f)),h)break;m=m.return}0<d.length&&(l=new c(l,u,null,n,r),a.push({event:l,listeners:d}))}}if(!(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||n===Rt||!(u=n.relatedTarget||n.fromElement)||!Ye(u)&&!u[Be])&&(c||l)&&(l=r.window===r?r:(l=r.ownerDocument)?l.defaultView||l.parentWindow:window,c?(c=i,null!==(u=(u=n.relatedTarget||n.toElement)?Ye(u):null)&&(h=o(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=i),c!==u)){if(d=cn,g="onMouseLeave",p="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=xn,g="onPointerLeave",p="onPointerEnter",m="pointer"),h=null==c?l:et(c),f=null==u?l:et(u),(l=new d(g,m+"leave",c,n,r)).target=h,l.relatedTarget=f,g=null,Ye(r)===i&&((d=new d(p,m+"enter",u,n,r)).target=f,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(d=ad,m=u,f=0,g=p=c;g;g=d(g))f++;g=0;for(var v=m;v;v=d(v))g++;for(;0<f-g;)p=d(p),f--;for(;0<g-f;)m=d(m),g--;for(;f--;){if(p===m||null!==m&&p===m.alternate){d=p;break e}p=d(p),m=d(m)}d=null}else d=null;null!==c&&od(a,l,c,d,!1),null!==u&&null!==h&&od(a,h,u,d,!0)}if("select"===(c=(l=i?et(i):window).nodeName&&l.nodeName.toLowerCase())||"input"===c&&"file"===l.type)var y=Wn;else if(Mn(l))if(Vn)y=Zn;else{y=Xn;var b=Kn}else!(c=l.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==l.type&&"radio"!==l.type?i&&Pt(i.elementType)&&(y=Wn):y=Yn;switch(y&&(y=y(e,i))?zn(a,y,n,r):(b&&b(e,l,i),"focusout"===e&&i&&"number"===l.type&&null!=i.memoizedProps.value&&wt(l,"number",l.value)),b=i?et(i):window,e){case"focusin":(Mn(b)||"true"===b.contentEditable)&&(li=b,ci=i,ui=null);break;case"focusout":ui=ci=li=null;break;case"mousedown":di=!0;break;case"contextmenu":case"mouseup":case"dragend":di=!1,hi(a,n,r);break;case"selectionchange":if(oi)break;case"keydown":case"keyup":hi(a,n,r)}var _;if(Nn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Rn?An(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Pn&&"ko"!==n.locale&&(Rn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Rn&&(_=Jt()):(Gt="value"in(qt=r)?qt.value:qt.textContent,Rn=!0)),0<(b=sd(i,x)).length&&(x=new fn(x,e,null,n,r),a.push({event:x,listeners:b}),_?x.data=_:null!==(_=Ln(n))&&(x.data=_))),(_=jn?function(e,t){switch(e){case"compositionend":return Ln(t);case"keypress":return 32!==t.which?null:(Dn=!0,In);case"textInput":return(e=t.data)===In&&Dn?null:e;default:return null}}(e,n):function(e,t){if(Rn)return"compositionend"===e||!Nn&&An(e,t)?(e=Jt(),Qt=Gt=qt=null,Rn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(x=sd(i,"onBeforeInput")).length&&(b=new fn("onBeforeInput","beforeinput",null,n,r),a.push({event:b,listeners:x}),b.data=_)),function(e,t,n,i,r){if("submit"===t&&n&&n.stateNode===r){var s=Bu((r[Ve]||null).action),a=i.submitter;a&&null!==(t=(t=a[Ve]||null)?Bu(t.formAction):a.getAttribute("formAction"))&&(s=t,a=null);var o=new sn("action","action",null,i,r);e.push({event:o,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(0!==Ou){var e=a?qu(r,a):new FormData(r);no(n,{pending:!0,data:e,method:r.method,action:s},null,e)}}else"function"==typeof s&&(o.preventDefault(),e=a?qu(r,a):new FormData(r),no(n,{pending:!0,data:e,method:r.method,action:s},s,e))},currentTarget:r}]})}}(a,e,i,n,r)}Xu(a,t)})}function rd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function sd(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,s=r.stateNode;if(5!==(r=r.tag)&&26!==r&&27!==r||null===s||(null!=(r=Ht(e,n))&&i.unshift(rd(e,r,s)),null!=(r=Ht(e,t))&&i.push(rd(e,r,s))),3===e.tag)return i;e=e.return}return[]}function ad(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function od(e,t,n,i,r){for(var s=t._reactName,a=[];null!==n&&n!==i;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===i)break;5!==o&&26!==o&&27!==o||null===c||(l=c,r?null!=(c=Ht(n,s))&&a.unshift(rd(n,c,l)):r||null!=(c=Ht(n,s))&&a.push(rd(n,c,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var ld=/\r\n?/g,cd=/\u0000|\uFFFD/g;function ud(e){return("string"==typeof e?e:""+e).replace(ld,"\n").replace(cd,"")}function dd(e,t){return t=ud(t),ud(e)===t}function hd(e,t,n,i,r,a){switch(n){case"children":"string"==typeof i?"body"===t||"textarea"===t&&""===i||Et(e,i):("number"==typeof i||"bigint"==typeof i)&&"body"!==t&&Et(e,""+i);break;case"className":dt(e,"class",i);break;case"tabIndex":dt(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":dt(e,n,i);break;case"style":jt(e,i,a);break;case"data":if("object"!==t){dt(e,"data",i);break}case"src":case"href":if(""===i&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==i||"function"==typeof i||"symbol"==typeof i||"boolean"==typeof i){e.removeAttribute(n);break}i=At(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if("function"==typeof i){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof a&&("formAction"===n?("input"!==t&&hd(e,t,"name",r.name,r,null),hd(e,t,"formEncType",r.formEncType,r,null),hd(e,t,"formMethod",r.formMethod,r,null),hd(e,t,"formTarget",r.formTarget,r,null)):(hd(e,t,"encType",r.encType,r,null),hd(e,t,"method",r.method,r,null),hd(e,t,"target",r.target,r,null))),null==i||"symbol"==typeof i||"boolean"==typeof i){e.removeAttribute(n);break}i=At(""+i),e.setAttribute(n,i);break;case"onClick":null!=i&&(e.onclick=Lt);break;case"onScroll":null!=i&&Yu("scroll",e);break;case"onScrollEnd":null!=i&&Yu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=i){if("object"!=typeof i||!("__html"in i))throw Error(s(61));if(null!=(n=i.__html)){if(null!=r.children)throw Error(s(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&"function"!=typeof i&&"symbol"!=typeof i;break;case"muted":e.muted=i&&"function"!=typeof i&&"symbol"!=typeof i;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==i||"function"==typeof i||"boolean"==typeof i||"symbol"==typeof i){e.removeAttribute("xlink:href");break}n=At(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=i&&"function"!=typeof i&&"symbol"!=typeof i?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&"function"!=typeof i&&"symbol"!=typeof i?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===i?e.setAttribute(n,""):!1!==i&&null!=i&&"function"!=typeof i&&"symbol"!=typeof i?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":null==i||"function"==typeof i||"symbol"==typeof i||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":Yu("beforetoggle",e),Yu("toggle",e),ut(e,"popover",i);break;case"xlinkActuate":ht(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":ht(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":ht(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":ht(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":ht(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":ht(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":ht(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":ht(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":ht(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":ut(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&ut(e,n=It.get(n)||n,i)}}function pd(e,t,n,i,r,a){switch(n){case"style":jt(e,i,a);break;case"dangerouslySetInnerHTML":if(null!=i){if("object"!=typeof i||!("__html"in i))throw Error(s(61));if(null!=(n=i.__html)){if(null!=r.children)throw Error(s(60));e.innerHTML=n}}break;case"children":"string"==typeof i?Et(e,i):("number"==typeof i||"bigint"==typeof i)&&Et(e,""+i);break;case"onScroll":null!=i&&Yu("scroll",e);break;case"onScrollEnd":null!=i&&Yu("scrollend",e);break;case"onClick":null!=i&&(e.onclick=Lt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:rt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),"function"==typeof(a=null!=(a=e[Ve]||null)?a[n]:null)&&e.removeEventListener(t,a,r),"function"!=typeof i)?n in e?e[n]=i:!0===i?e.setAttribute(n,""):ut(e,n,i):("function"!=typeof a&&null!==a&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,r)))}}function fd(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Yu("error",e),Yu("load",e);var i,r=!1,a=!1;for(i in n)if(n.hasOwnProperty(i)){var o=n[i];if(null!=o)switch(i){case"src":r=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:hd(e,t,i,o,n,null)}}return a&&hd(e,t,"srcSet",n.srcSet,n,null),void(r&&hd(e,t,"src",n.src,n,null));case"input":Yu("invalid",e);var l=i=o=a=null,c=null,u=null;for(r in n)if(n.hasOwnProperty(r)){var d=n[r];if(null!=d)switch(r){case"name":a=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":i=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(s(137,t));break;default:hd(e,t,r,d,n,null)}}return void xt(e,i,l,c,u,o,a,!1);case"select":for(a in Yu("invalid",e),r=o=i=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":i=l;break;case"defaultValue":o=l;break;case"multiple":r=l;default:hd(e,t,a,l,n,null)}return t=i,n=o,e.multiple=!!r,void(null!=t?kt(e,!!r,t,!1):null!=n&&kt(e,!!r,n,!0));case"textarea":for(o in Yu("invalid",e),i=a=r=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":r=l;break;case"defaultValue":a=l;break;case"children":i=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(s(91));break;default:hd(e,t,o,l,n,null)}return void Ct(e,r,a,i);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(r=n[c]))if("selected"===c)e.selected=r&&"function"!=typeof r&&"symbol"!=typeof r;else hd(e,t,c,r,n,null);return;case"dialog":Yu("beforetoggle",e),Yu("toggle",e),Yu("cancel",e),Yu("close",e);break;case"iframe":case"object":Yu("load",e);break;case"video":case"audio":for(r=0;r<Ju.length;r++)Yu(Ju[r],e);break;case"image":Yu("error",e),Yu("load",e);break;case"details":Yu("toggle",e);break;case"embed":case"source":case"link":Yu("error",e),Yu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(r=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:hd(e,t,u,r,n,null)}return;default:if(Pt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(r=n[d])&&pd(e,t,d,r,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(r=n[l])&&hd(e,t,l,r,n,null))}function md(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var gd=null,vd=null;function yd(e){return 9===e.nodeType?e:e.ownerDocument}function bd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _d(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function xd(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var wd=null;var kd="function"==typeof setTimeout?setTimeout:void 0,Sd="function"==typeof clearTimeout?clearTimeout:void 0,Cd="function"==typeof Promise?Promise:void 0,Ed="function"==typeof queueMicrotask?queueMicrotask:void 0!==Cd?function(e){return Cd.resolve(null).then(e).catch(Nd)}:kd;function Nd(e){setTimeout(function(){throw e})}function Td(e){return"head"===e}function jd(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)||"/&"===n){if(0===i)return e.removeChild(r),void qh(t);i--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)i++;else if("html"===n)$d(e.ownerDocument.documentElement);else if("head"===n){$d(n=e.ownerDocument.head);for(var s=n.firstChild;s;){var a=s.nextSibling,o=s.nodeName;s[Ke]||"SCRIPT"===o||"STYLE"===o||"LINK"===o&&"stylesheet"===s.rel.toLowerCase()||n.removeChild(s),s=a}}else"body"===n&&$d(e.ownerDocument.body);n=r}while(n);qh(t)}function Pd(e,t){var n=e;e=0;do{var i=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=i}while(n)}function Id(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Id(n),Xe(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Dd(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Rd(e.nextSibling)))return null}return e}function Ad(e){return"$?"===e.data||"$~"===e.data}function Ld(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Rd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Od=null;function Md(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Rd(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function zd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function Fd(e,t,n){switch(t=yd(n),e){case"html":if(!(e=t.documentElement))throw Error(s(452));return e;case"head":if(!(e=t.head))throw Error(s(453));return e;case"body":if(!(e=t.body))throw Error(s(454));return e;default:throw Error(s(451))}}function $d(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Xe(e)}var Ud=new Map,Hd=new Set;function Wd(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Vd=L.d;L.d={f:function(){var e=Vd.f(),t=tu();return e||t},r:function(e){var t=Ze(e);null!==t&&5===t.tag&&"form"===t.type?ro(t):Vd.r(e)},D:function(e){Vd.D(e),qd("dns-prefetch",e,null)},C:function(e,t){Vd.C(e,t),qd("preconnect",e,t)},L:function(e,t,n){Vd.L(e,t,n);var i=Bd;if(i&&e&&t){var r='link[rel="preload"][as="'+bt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(r+='[imagesrcset="'+bt(n.imageSrcSet)+'"]',"string"==typeof n.imageSizes&&(r+='[imagesizes="'+bt(n.imageSizes)+'"]')):r+='[href="'+bt(e)+'"]';var s=r;switch(t){case"style":s=Qd(e);break;case"script":s=Xd(e)}Ud.has(s)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Ud.set(s,e),null!==i.querySelector(r)||"style"===t&&i.querySelector(Jd(s))||"script"===t&&i.querySelector(Yd(s))||(fd(t=i.createElement("link"),"link",e),nt(t),i.head.appendChild(t)))}},m:function(e,t){Vd.m(e,t);var n=Bd;if(n&&e){var i=t&&"string"==typeof t.as?t.as:"script",r='link[rel="modulepreload"][as="'+bt(i)+'"][href="'+bt(e)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Xd(e)}if(!Ud.has(s)&&(e=h({rel:"modulepreload",href:e},t),Ud.set(s,e),null===n.querySelector(r))){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Yd(s)))return}fd(i=n.createElement("link"),"link",e),nt(i),n.head.appendChild(i)}}},X:function(e,t){Vd.X(e,t);var n=Bd;if(n&&e){var i=tt(n).hoistableScripts,r=Xd(e),s=i.get(r);s||((s=n.querySelector(Yd(r)))||(e=h({src:e,async:!0},t),(t=Ud.get(r))&&nh(e,t),nt(s=n.createElement("script")),fd(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}},S:function(e,t,n){Vd.S(e,t,n);var i=Bd;if(i&&e){var r=tt(i).hoistableStyles,s=Qd(e);t=t||"default";var a=r.get(s);if(!a){var o={loading:0,preload:null};if(a=i.querySelector(Jd(s)))o.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Ud.get(s))&&th(e,n);var l=a=i.createElement("link");nt(l),fd(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,eh(a,t,i)}a={type:"stylesheet",instance:a,count:1,state:o},r.set(s,a)}}},M:function(e,t){Vd.M(e,t);var n=Bd;if(n&&e){var i=tt(n).hoistableScripts,r=Xd(e),s=i.get(r);s||((s=n.querySelector(Yd(r)))||(e=h({src:e,async:!0,type:"module"},t),(t=Ud.get(r))&&nh(e,t),nt(s=n.createElement("script")),fd(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}};var Bd="undefined"==typeof document?null:document;function qd(e,t,n){var i=Bd;if(i&&"string"==typeof t&&t){var r=bt(t);r='link[rel="'+e+'"][href="'+r+'"]',"string"==typeof n&&(r+='[crossorigin="'+n+'"]'),Hd.has(r)||(Hd.add(r),e={rel:e,crossOrigin:n,href:t},null===i.querySelector(r)&&(fd(t=i.createElement("link"),"link",e),nt(t),i.head.appendChild(t)))}}function Gd(e,t,n,i){var r,a,o,l,c=(c=B.current)?Wd(c):null;if(!c)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof n.precedence&&"string"==typeof n.href?(t=Qd(n.href),(i=(n=tt(c).hoistableStyles).get(t))||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"==typeof n.href&&"string"==typeof n.precedence){e=Qd(n.href);var u=tt(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Jd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Ud.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Ud.set(e,n),u||(r=c,a=e,o=n,l=d.state,r.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=r.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),fd(a,"link",o),nt(a),r.head.appendChild(a))))),t&&null===i)throw Error(s(528,""));return d}if(t&&null!==i)throw Error(s(529,""));return null;case"script":return t=n.async,"string"==typeof(n=n.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=Xd(n),(i=(n=tt(c).hoistableScripts).get(t))||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Qd(e){return'href="'+bt(e)+'"'}function Jd(e){return'link[rel="stylesheet"]['+e+"]"}function Kd(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Xd(e){return'[src="'+bt(e)+'"]'}function Yd(e){return"script[async]"+e}function Zd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+bt(n.href)+'"]');if(i)return t.instance=i,nt(i),i;var r=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return nt(i=(e.ownerDocument||e).createElement("style")),fd(i,"style",r),eh(i,n.precedence,e),t.instance=i;case"stylesheet":r=Qd(n.href);var a=e.querySelector(Jd(r));if(a)return t.state.loading|=4,t.instance=a,nt(a),a;i=Kd(n),(r=Ud.get(r))&&th(i,r),nt(a=(e.ownerDocument||e).createElement("link"));var o=a;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),fd(a,"link",i),t.state.loading|=4,eh(a,n.precedence,e),t.instance=a;case"script":return a=Xd(n.src),(r=e.querySelector(Yd(a)))?(t.instance=r,nt(r),r):(i=n,(r=Ud.get(a))&&nh(i=h({},n),r),nt(r=(e=e.ownerDocument||e).createElement("script")),fd(r,"link",i),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(s(443,t.type))}else"stylesheet"===t.type&&!(4&t.state.loading)&&(i=t.instance,t.state.loading|=4,eh(i,n.precedence,e));return t.instance}function eh(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,a=0;a<i.length;a++){var o=i[a];if(o.dataset.precedence===t)s=o;else if(s!==r)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function th(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function nh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var ih=null;function rh(e,t,n){if(null===ih){var i=new Map,r=ih=new Map;r.set(n,i)}else(i=(r=ih).get(n))||(i=new Map,r.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var s=n[r];if(!(s[Ke]||s[We]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var a=s.getAttribute(t)||"";a=e+a;var o=i.get(a);o?o.push(s):i.set(a,[s])}}return i}function sh(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function ah(e){return!!("stylesheet"!==e.type||3&e.state.loading)}var oh=0;function lh(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)uh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var ch=null;function uh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,ch=new Map,t.forEach(dh,e),ch=null,lh.call(e))}function dh(e,t){if(!(4&t.state.loading)){var n=ch.get(e);if(n)var i=n.get(null);else{n=new Map,ch.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var a=r[s];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}a=(r=t.instance).getAttribute("data-precedence"),(s=n.get(a)||i)===i&&n.set(null,r),n.set(a,r),this.count++,i=lh.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(r,e.firstChild),t.state.loading|=4}}var hh={$$typeof:_,Provider:null,Consumer:null,_currentValue:R,_currentValue2:R,_threadCount:0};function ph(e,t,n,i,r,s,a,o,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ae(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ae(0),this.hiddenUpdates=Ae(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function fh(e,t,n,i,r,s,a,o,l,c,u,d){return e=new ph(e,t,n,a,l,c,u,d,o),t=1,!0===s&&(t|=24),s=$i(3,null,null,t),e.current=s,s.stateNode=e,(t=Ur()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:t},ys(s),e}function mh(e){return e?e=zi:zi}function gh(e,t,n,i,r,s){r=mh(r),null===i.context?i.context=r:i.pendingContext=r,(i=_s(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(i.callback=s),null!==(n=xs(e,i,t))&&(Kc(n,0,t),ws(n,e,t))}function vh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function yh(e,t){vh(e,t),(e=e.alternate)&&vh(e,t)}function bh(e){if(13===e.tag||31===e.tag){var t=Ri(e,67108864);null!==t&&Kc(t,0,67108864),yh(e,67108864)}}function _h(e){if(13===e.tag||31===e.tag){var t=Qc(),n=Ri(e,t=ze(t));null!==n&&Kc(n,0,t),yh(e,t)}}var xh=!0;function wh(e,t,n,i){var r=A.T;A.T=null;var s=L.p;try{L.p=2,Sh(e,t,n,i)}finally{L.p=s,A.T=r}}function kh(e,t,n,i){var r=A.T;A.T=null;var s=L.p;try{L.p=8,Sh(e,t,n,i)}finally{L.p=s,A.T=r}}function Sh(e,t,n,i){if(xh){var r=Ch(i);if(null===r)id(e,t,i,Eh,n),Mh(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return Ph=zh(Ph,e,t,n,i,r),!0;case"dragenter":return Ih=zh(Ih,e,t,n,i,r),!0;case"mouseover":return Dh=zh(Dh,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return Ah.set(s,zh(Ah.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Lh.set(s,zh(Lh.get(s)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Mh(e,i),4&t&&-1<Oh.indexOf(e)){for(;null!==r;){var s=Ze(r);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var a=Te(s.pendingLanes);if(0!==a){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-we(a);o.entanglements[1]|=l,a&=~l}Mu(s),!(6&mc)&&(Oc=ue()+500,zu(0))}}break;case 31:case 13:null!==(o=Ri(s,2))&&Kc(o,0,2),tu(),yh(s,2)}if(null===(s=Ch(i))&&id(e,t,i,Eh,n),s===r)break;r=s}null!==r&&i.stopPropagation()}else id(e,t,i,null,n)}}function Ch(e){return Nh(e=Ot(e))}var Eh=null;function Nh(e){if(Eh=null,null!==(e=Ye(e))){var t=o(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=l(t)))return e;e=null}else if(31===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Eh=e,null}function Th(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(de()){case he:return 2;case pe:return 8;case fe:case me:return 32;case ge:return 268435456;default:return 32}default:return 32}}var jh=!1,Ph=null,Ih=null,Dh=null,Ah=new Map,Lh=new Map,Rh=[],Oh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Mh(e,t){switch(e){case"focusin":case"focusout":Ph=null;break;case"dragenter":case"dragleave":Ih=null;break;case"mouseover":case"mouseout":Dh=null;break;case"pointerover":case"pointerout":Ah.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lh.delete(t.pointerId)}}function zh(e,t,n,i,r,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},null!==t&&(null!==(t=Ze(t))&&bh(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Fh(e){var t=Ye(e.target);if(null!==t){var n=o(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=l(n)))return e.blockedOn=t,void Ue(e.priority,function(){_h(n)})}else if(31===t){if(null!==(t=c(n)))return e.blockedOn=t,void Ue(e.priority,function(){_h(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function $h(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ch(e.nativeEvent);if(null!==n)return null!==(t=Ze(n))&&bh(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);Rt=i,n.target.dispatchEvent(i),Rt=null,t.shift()}return!0}function Uh(e,t,n){$h(e)&&n.delete(t)}function Hh(){jh=!1,null!==Ph&&$h(Ph)&&(Ph=null),null!==Ih&&$h(Ih)&&(Ih=null),null!==Dh&&$h(Dh)&&(Dh=null),Ah.forEach(Uh),Lh.forEach(Uh)}function Wh(e,t){e.blockedOn===t&&(e.blockedOn=null,jh||(jh=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Hh)))}var Vh=null;function Bh(e){Vh!==e&&(Vh=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Vh===e&&(Vh=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],r=e[t+2];if("function"!=typeof i){if(null===Nh(i||n))continue;break}var s=Ze(n);null!==s&&(e.splice(t,3),t-=3,no(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function qh(e){function t(t){return Wh(t,e)}null!==Ph&&Wh(Ph,e),null!==Ih&&Wh(Ih,e),null!==Dh&&Wh(Dh,e),Ah.forEach(t),Lh.forEach(t);for(var n=0;n<Rh.length;n++){var i=Rh[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Rh.length&&null===(n=Rh[0]).blockedOn;)Fh(n),null===n.blockedOn&&Rh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],a=r[Ve]||null;if("function"==typeof s)a||Bh(n);else if(a){var o=null;if(s&&s.hasAttribute("formAction")){if(r=s,a=s[Ve]||null)o=a.formAction;else if(null!==Nh(r))continue}else o=a.action;"function"==typeof o?n[i+1]=o:(n.splice(i,3),i-=3),Bh(n)}}}function Gh(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return r=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==r&&(r(),r=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"==typeof navigation){var i=!1,r=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==r&&(r(),r=null)}}}function Qh(e){this._internalRoot=e}function Jh(e){this._internalRoot=e}Jh.prototype.render=Qh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));gh(t.current,Qc(),e,t,null,null)},Jh.prototype.unmount=Qh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;gh(e.current,2,null,e,null,null),tu(),t[Be]=null}},Jh.prototype.unstable_scheduleHydration=function(e){if(e){var t=$e();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rh.length&&0!==t&&t<Rh[n].priority;n++);Rh.splice(n,0,e),0===n&&Fh(e)}};var Kh=i.version;if("19.2.0"!==Kh)throw Error(s(527,Kh,"19.2.0"));L.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=o(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(i=r.return)){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return u(r),e;if(a===i)return u(r),t;a=a.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=a;else{for(var l=!1,c=r.child;c;){if(c===n){l=!0,n=r,i=a;break}if(c===i){l=!0,i=r,n=a;break}c=c.sibling}if(!l){for(c=a.child;c;){if(c===n){l=!0,n=a,i=r;break}if(c===i){l=!0,i=a,n=r;break}c=c.sibling}if(!l)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Xh={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:A,reconcilerVersion:"19.2.0"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Yh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yh.isDisabled&&Yh.supportsFiber)try{be=Yh.inject(Xh),_e=Yh}catch(ep){}}return se.createRoot=function(e,t){if(!a(e))throw Error(s(299));var n=!1,i="",r=Eo,o=No,l=To;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onUncaughtError&&(r=t.onUncaughtError),void 0!==t.onCaughtError&&(o=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=fh(e,1,!1,null,0,n,i,null,r,o,l,Gh),e[Be]=t.current,td(e),new Qh(t)},se.hydrateRoot=function(e,t,n){if(!a(e))throw Error(s(299));var i=!1,r="",o=Eo,l=No,c=To,u=null;return null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(r=n.identifierPrefix),void 0!==n.onUncaughtError&&(o=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.formState&&(u=n.formState)),(t=fh(e,1,!0,t,0,i,r,u,o,l,c,Gh)).context=mh(null),n=t.current,(r=_s(i=ze(i=Qc()))).callback=null,xs(n,r,i),n=i,t.current.lanes=n,Le(t,n),Mu(t),e[Be]=t.current,td(e),new Jh(t)},se.version="19.2.0",se}const ue=n((ne||(ne=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){}}(),re.exports=ce()),re.exports)),de={},he=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),r=n?.nonce||n?.getAttribute("nonce");i=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in de)return;de[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script"),i.crossOrigin="",i.href=e,r&&i.setAttribute("nonce",r),document.head.appendChild(i),t?new Promise((t,n)=>{i.addEventListener("load",t),i.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function r(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return i.then(t=>{for(const e of t||[])"rejected"===e.status&&r(e.reason);return e().catch(r)})},pe=i.memo(({title:e,value:t,icon:n,color:i})=>ie.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-gray-100 dark:border-slate-700 flex items-center space-x-4 transition hover:shadow-md",children:[ie.jsx("div",{className:`p-3 rounded-full ${i} text-white`,children:n}),ie.jsxs("div",{children:[ie.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 font-medium",children:e}),ie.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t})]})]})),fe=i.memo(({stats:e})=>{const t=r.useMemo(()=>[{title:"Calls Made",value:e.callsMade,icon:ie.jsx(u,{size:20}),color:"bg-blue-500"},{title:"Connections",value:e.connections,icon:ie.jsx(d,{size:20}),color:"bg-green-500"},{title:"Appointments",value:e.appointmentsSet,icon:ie.jsx(h,{size:20}),color:"bg-purple-500"},{title:"Talk Time (m)",value:e.talkTime,icon:ie.jsx(p,{size:20}),color:"bg-orange-500"}],[e.callsMade,e.connections,e.appointmentsSet,e.talkTime]);return ie.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:t.map((e,t)=>ie.jsx(pe,{...e},t))})}),me=i.memo(({prospect:e,onCall:t})=>ie.jsx(ge,{prospect:e,onCall:t})),ge=i.memo(({prospect:e,onCall:t})=>{const[n,r]=i.useState(!1),[s,a]=i.useState(!1),[o,l]=i.useState(!1),[c,d]=i.useState(null),h=i.useMemo(()=>{try{const e=localStorage.getItem("user");return e?JSON.parse(e):null}catch{return null}},[]);return ie.jsxs(ie.Fragment,{children:[ie.jsxs("tr",{className:"hover:bg-blue-50/50 dark:hover:bg-blue-900/10 transition duration-150 group",children:[ie.jsxs("td",{className:"p-4",children:[ie.jsxs("div",{className:"font-semibold text-gray-900 dark:text-white",children:[e.firstName," ",e.lastName]}),ie.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.phone})]}),ie.jsxs("td",{className:"p-4",children:[ie.jsx("div",{className:"text-sm text-gray-900 dark:text-gray-200",children:e.title}),ie.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.company})]}),ie.jsx("td",{className:"p-4",children:ie.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[ie.jsx(f,{size:14,className:"mr-1"}),e.timezone]})}),ie.jsx("td",{className:"p-4",children:ie.jsx("span",{className:"px-3 py-1 text-xs font-medium rounded-full "+("New"===e.status?"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300":"Qualified"===e.status?"bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-300":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"),children:e.status})}),ie.jsxs("td",{className:"p-4 text-right relative",children:[ie.jsx("button",{onClick:()=>t(e),className:"inline-flex items-center justify-center w-8 h-8 rounded-full bg-green-100 text-green-600 hover:bg-green-600 hover:text-white dark:bg-green-900/30 dark:text-green-400 dark:hover:bg-green-600 dark:hover:text-white transition shadow-sm mr-2",title:"Call Now",children:ie.jsx(u,{size:14})}),ie.jsx("button",{className:"inline-flex items-center justify-center w-8 h-8 rounded-full text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-700 transition",onClick:()=>r(!n),children:ie.jsx(m,{size:16})}),n&&ie.jsxs("div",{className:"absolute right-0 mt-2 w-40 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg shadow-lg z-10",children:[ie.jsx("button",{className:"block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-slate-700",onClick:()=>{a(!0),r(!1)},children:"View Info"}),"admin"===h?.role&&ie.jsx("button",{className:"block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-slate-700",onClick:()=>{l(!0),d(e),a(!0),r(!1)},children:"Edit"}),"admin"===h?.role&&ie.jsx("button",{className:"block w-full text-left px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900",onClick:()=>{alert("Delete not implemented"),r(!1)},children:"Delete"})]})]})]}),s&&ie.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 dark:bg-black/60",children:ie.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-8 w-full max-w-md relative",children:[ie.jsx("button",{className:"absolute top-3 right-3 text-gray-500 dark:text-gray-300",onClick:()=>{a(!1),l(!1)},children:""}),o?ie.jsxs(ie.Fragment,{children:[ie.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Edit Lead"}),ie.jsxs("form",{className:"space-y-2",onSubmit:e=>{e.preventDefault(),a(!1),l(!1)},children:[ie.jsx("input",{type:"text",className:"w-full px-3 py-2 rounded border dark:bg-slate-700 dark:text-white",value:c?.firstName||"",onChange:e=>d(t=>t?{...t,firstName:e.target.value}:t),placeholder:"First Name"}),ie.jsx("input",{type:"text",className:"w-full px-3 py-2 rounded border dark:bg-slate-700 dark:text-white",value:c?.lastName||"",onChange:e=>d(t=>t?{...t,lastName:e.target.value}:t),placeholder:"Last Name"}),ie.jsx("input",{type:"text",className:"w-full px-3 py-2 rounded border dark:bg-slate-700 dark:text-white",value:c?.title||"",onChange:e=>d(t=>t?{...t,title:e.target.value}:t),placeholder:"Title"}),ie.jsx("input",{type:"text",className:"w-full px-3 py-2 rounded border dark:bg-slate-700 dark:text-white",value:c?.company||"",onChange:e=>d(t=>t?{...t,company:e.target.value}:t),placeholder:"Company"}),ie.jsx("input",{type:"text",className:"w-full px-3 py-2 rounded border dark:bg-slate-700 dark:text-white",value:c?.phone||"",onChange:e=>d(t=>t?{...t,phone:e.target.value}:t),placeholder:"Phone"}),ie.jsx("input",{type:"email",className:"w-full px-3 py-2 rounded border dark:bg-slate-700 dark:text-white",value:c?.email||"",onChange:e=>d(t=>t?{...t,email:e.target.value}:t),placeholder:"Email"}),ie.jsxs("select",{className:"w-full px-3 py-2 rounded border dark:bg-slate-700 dark:text-white",value:c?.status||"",onChange:e=>d(t=>t?{...t,status:e.target.value}:t),children:[ie.jsx("option",{value:"New",children:"New"}),ie.jsx("option",{value:"Contacted",children:"Contacted"}),ie.jsx("option",{value:"Qualified",children:"Qualified"}),ie.jsx("option",{value:"Lost",children:"Lost"}),ie.jsx("option",{value:"Do Not Call",children:"Do Not Call"})]}),ie.jsx("textarea",{className:"w-full px-3 py-2 rounded border dark:bg-slate-700 dark:text-white",value:c?.notes||"",onChange:e=>d(t=>t?{...t,notes:e.target.value}:t),placeholder:"Notes"}),ie.jsxs("div",{className:"flex gap-2 mt-2",children:[ie.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg",children:"Save"}),ie.jsx("button",{type:"button",className:"px-4 py-2 bg-gray-400 text-white rounded-lg",onClick:()=>l(!1),children:"Cancel"})]})]})]}):ie.jsxs(ie.Fragment,{children:[ie.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Lead Info"}),ie.jsxs("div",{className:"space-y-2 mb-4",children:[ie.jsxs("p",{children:[ie.jsx("span",{className:"font-semibold",children:"Name:"})," ",e.firstName," ",e.lastName]}),ie.jsxs("p",{children:[ie.jsx("span",{className:"font-semibold",children:"Title:"})," ",e.title]}),ie.jsxs("p",{children:[ie.jsx("span",{className:"font-semibold",children:"Company:"})," ",e.company]}),ie.jsxs("p",{children:[ie.jsx("span",{className:"font-semibold",children:"Phone:"})," ",e.phone]}),ie.jsxs("p",{children:[ie.jsx("span",{className:"font-semibold",children:"Email:"})," ",e.email]}),ie.jsxs("p",{children:[ie.jsx("span",{className:"font-semibold",children:"Status:"})," ",e.status]}),ie.jsxs("p",{children:[ie.jsx("span",{className:"font-semibold",children:"Timezone:"})," ",e.timezone]}),e.notes&&ie.jsxs("p",{children:[ie.jsx("span",{className:"font-semibold",children:"Notes:"})," ",e.notes]})]})]})]})})]})}),ve=i.memo(({prospects:e,onCall:t,onUpload:n})=>{const i=r.useRef(null),s=r.useCallback(e=>{const t=e.target.files?.[0];t&&(n(t),e.target.value="")},[n]),a=r.useCallback(()=>{i.current?.click()},[]),o=r.useMemo(()=>e.map(e=>ie.jsx(me,{prospect:e,onCall:t},e.id)),[e,t]);return ie.jsxs("div",{className:"bg-white dark:bg-slate-800 shadow-sm border border-gray-200 dark:border-slate-700 rounded-xl overflow-hidden transition-colors duration-200",children:[ie.jsxs("div",{className:"p-5 border-b border-gray-100 dark:border-slate-700 flex justify-between items-center",children:[ie.jsxs("div",{className:"flex items-center gap-4",children:[ie.jsx("h2",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"Priority Lists"}),ie.jsxs("span",{className:"text-xs font-medium px-2 py-1 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-full",children:[e.length," leads"]})]}),ie.jsxs("div",{children:[ie.jsx("input",{type:"file",accept:".csv",ref:i,className:"hidden",onChange:s}),ie.jsxs("button",{onClick:a,className:"flex items-center space-x-2 px-4 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-slate-600 transition shadow-sm",children:[ie.jsx(g,{size:16}),ie.jsx("span",{children:"Import CSV"})]})]})]}),ie.jsx("div",{className:"overflow-x-auto",children:ie.jsxs("table",{className:"w-full text-left border-collapse",children:[ie.jsx("thead",{children:ie.jsxs("tr",{className:"bg-gray-50 dark:bg-slate-700/50 text-gray-500 dark:text-gray-400 text-xs uppercase tracking-wider",children:[ie.jsx("th",{className:"p-4 font-semibold",children:"Name"}),ie.jsx("th",{className:"p-4 font-semibold",children:"Title / Company"}),ie.jsx("th",{className:"p-4 font-semibold",children:"Location"}),ie.jsx("th",{className:"p-4 font-semibold",children:"Status"}),ie.jsx("th",{className:"p-4 font-semibold text-right",children:"Action"})]})}),ie.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-700",children:o})]})})]})});var ye=(e=>(e.IDLE="IDLE",e.DIALING="DIALING",e.RINGING="RINGING",e.CONNECTED="CONNECTED",e.WRAP_UP="WRAP_UP",e))(ye||{});const be=({prospect:e,callState:t,onHangup:n,onSaveDisposition:i})=>{const[s,a]=r.useState(0),[o,l]=r.useState(!1),[c,u]=r.useState(""),[d,h]=r.useState("Connected"),[f,m]=r.useState(!1),[g,k]=r.useState(null),[S,C]=r.useState(null),[E,N]=r.useState(null);r.useEffect(()=>{let e;return t===ye.CONNECTED&&(e=setInterval(()=>{a(e=>e+1)},1e3),g||navigator.mediaDevices.getUserMedia({audio:!0}).then(e=>{const t=new MediaRecorder(e);let n=[];t.ondataavailable=e=>n.push(e.data),t.onstop=()=>{const e=new Blob(n,{type:"audio/webm"});N(e),C(URL.createObjectURL(e))},t.start(),k(t)}).catch(()=>{})),t===ye.WRAP_UP&&g&&"inactive"!==g.state&&(g.stop(),k(null)),()=>clearInterval(e)},[t,g]);const T=t===ye.WRAP_UP||f;return ie.jsxs("div",{className:"fixed bottom-0 right-0 w-full md:w-96 md:bottom-4 md:right-4 bg-white dark:bg-slate-800 shadow-2xl border border-gray-200 dark:border-slate-700 rounded-t-xl md:rounded-xl z-50 overflow-hidden flex flex-col max-h-[90vh]",children:[ie.jsxs("div",{className:`p-4 flex justify-between items-start ${T?"bg-gray-800 dark:bg-slate-950":"bg-indigo-600 dark:bg-indigo-800"} text-white transition-colors duration-300`,children:[ie.jsxs("div",{children:[ie.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2 mb-1",children:[t===ye.DIALING&&"Dialing...",t===ye.RINGING&&"Ringing...",t===ye.CONNECTED&&"Connected",t===ye.WRAP_UP&&"Call Ended - Wrap Up"]}),ie.jsx("div",{className:"text-indigo-100 text-sm flex items-center",children:t===ye.CONNECTED?ie.jsxs(ie.Fragment,{children:[ie.jsx("span",{className:"font-mono text-lg font-medium mr-3",children:(e=>{const t=e%60;return`${Math.floor(e/60)}:${t<10?"0":""}${t}`})(s)}),ie.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-0.5 bg-red-500/20 border border-red-500/30 rounded text-red-50 text-[10px] font-bold tracking-wider",children:[ie.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse shadow-[0_0_8px_rgba(239,68,68,0.6)]"}),"REC"]})]}):ie.jsx("span",{children:e.phone})}),S&&ie.jsx("audio",{controls:!0,src:S,className:"mt-2 w-full"})]}),t===ye.CONNECTED&&ie.jsxs("div",{className:"flex items-center space-x-1 bg-indigo-700/50 px-2 py-1 rounded text-xs mt-1",children:[ie.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),ie.jsx("span",{children:"Live"})]})]}),ie.jsxs("div",{className:"p-6 flex-1 overflow-y-auto",children:[ie.jsxs("div",{className:"flex items-start space-x-4 mb-6",children:[ie.jsx("div",{className:"w-12 h-12 bg-gray-100 dark:bg-slate-700 rounded-full flex items-center justify-center text-gray-500 dark:text-gray-300",children:ie.jsx(v,{size:24})}),ie.jsxs("div",{children:[ie.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[e.firstName," ",e.lastName]}),ie.jsxs("div",{className:"flex items-center text-gray-500 dark:text-gray-400 text-sm mt-1",children:[ie.jsx(y,{size:14,className:"mr-1"}),e.title," @ ",e.company]}),ie.jsxs("div",{className:"flex items-center text-gray-400 text-xs mt-1",children:[ie.jsx(p,{size:12,className:"mr-1"}),"Local Time: ",(new Date).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",timeZone:"America/New_York"})," (EST)"]})]})]}),ie.jsxs("div",{className:"mb-4",children:[ie.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-2",children:"Call Notes"}),ie.jsx("textarea",{className:"w-full p-3 border border-gray-300 dark:border-slate-600 rounded-lg text-sm bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none resize-none h-32",placeholder:"Type notes here...",value:c,onChange:e=>u(e.target.value),autoFocus:t===ye.CONNECTED})]}),T&&ie.jsxs("div",{className:"animate-fade-in-up",children:[ie.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-2",children:"Outcome"}),ie.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:["Connected","Voicemail","Busy","Meeting Set","Not Interested","Couldn't Call","Not Available"].map(e=>ie.jsx("button",{onClick:()=>h(e),className:"px-3 py-2 text-sm rounded-md border "+(d===e?"bg-indigo-50 dark:bg-indigo-900/50 border-indigo-500 text-indigo-700 dark:text-indigo-300 font-medium":"border-gray-200 dark:border-slate-600 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-slate-700"),children:e},e))}),ie.jsxs("div",{className:"flex gap-2",children:[ie.jsx("button",{onClick:()=>m(!1),className:"flex-1 bg-gray-400 dark:bg-slate-600 text-white py-2 rounded-lg hover:bg-gray-500 dark:hover:bg-slate-700 transition",children:"Cancel"}),ie.jsxs("button",{onClick:async()=>{if(E){const t=new FormData;t.append("file",E,`call-${e.id}-${Date.now()}.webm`),await fetch("/api/recordings/upload",{method:"POST",body:t})}i(d,c)},className:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white py-2 rounded-lg transition",children:[ie.jsx(b,{size:18,className:"mr-2"}),"Save & Next"]})]})]})]}),ie.jsx("div",{className:"p-4 bg-gray-50 dark:bg-slate-750 border-t border-gray-200 dark:border-slate-700",children:T?null:ie.jsxs("div",{className:"flex justify-between items-center",children:[ie.jsx("button",{onClick:()=>l(!o),className:`flex flex-col items-center justify-center w-12 h-12 rounded-full ${o?"bg-amber-100 text-amber-600":"bg-white dark:bg-slate-600 text-gray-600 dark:text-white border border-gray-300 dark:border-slate-500"} hover:shadow-md transition`,children:o?ie.jsx(_,{size:20}):ie.jsx(x,{size:20})}),ie.jsxs("button",{onClick:n,className:"flex-1 mx-4 bg-red-500 hover:bg-red-600 text-white font-semibold py-3 px-6 rounded-full shadow-lg shadow-red-200 dark:shadow-red-900/30 transition flex items-center justify-center",children:[ie.jsx(w,{size:20,className:"mr-2"}),"End Call"]}),ie.jsx("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition",children:"Wrap Up"})]})})]})},_e=({onCall:e,disabled:t})=>{const[n,i]=r.useState(""),[s,a]=r.useState(!1),[o,l]=r.useState(!1);return ie.jsx("div",{className:"flex flex-col items-center justify-center h-full p-6",children:ie.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-gray-100 dark:border-slate-700 w-full max-w-sm transition-colors duration-200",children:[ie.jsxs("div",{className:"mb-4 flex gap-2 justify-center",children:[s?o?ie.jsx("button",{onClick:()=>{l(!1)},className:"px-4 py-2 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700",children:"Resume"}):ie.jsx("button",{onClick:()=>{l(!0)},className:"px-4 py-2 bg-amber-500 text-white rounded-lg font-semibold hover:bg-amber-600",children:"Stop"}):ie.jsx("button",{onClick:()=>{a(!0),l(!1)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700",children:"Start Session"}),s&&ie.jsx("button",{onClick:()=>{a(!1),l(!1),i("")},className:"px-4 py-2 bg-gray-600 text-white rounded-lg font-semibold hover:bg-gray-700",children:"End"})]}),ie.jsxs("div",{className:"mb-8 relative",children:[ie.jsx("input",{type:"text",value:n,readOnly:!0,placeholder:"Enter number...",className:"w-full text-3xl font-bold text-center text-gray-800 dark:text-white bg-transparent border-b-2 border-gray-100 dark:border-slate-600 pb-2 focus:outline-none focus:border-blue-500 transition-colors"}),n.length>0&&ie.jsx("button",{onClick:()=>{i(e=>e.slice(0,-1))},className:"absolute right-0 top-2 text-gray-400 hover:text-red-500 transition",children:ie.jsx(k,{size:24})})]}),ie.jsx("div",{className:"grid grid-cols-3 gap-4 mb-8",children:["1","2","3","4","5","6","7","8","9","*","0","#"].map(e=>ie.jsx("button",{onClick:()=>{return t=e,void i(e=>e+t);var t},className:"w-16 h-16 rounded-full bg-gray-50 dark:bg-slate-700 hover:bg-gray-100 dark:hover:bg-slate-600 active:bg-blue-50 dark:active:bg-slate-600 text-xl font-semibold text-gray-700 dark:text-white transition flex items-center justify-center shadow-sm",children:e},e))}),ie.jsxs("button",{onClick:()=>{t||!s||o||n.length>3&&e(n)},disabled:n.length<3||t||!s||o,className:"w-full py-4 rounded-xl flex items-center justify-center text-white font-bold text-lg shadow-lg transition transform active:scale-95 "+(n.length<3||t||!s||o?"bg-gray-300 dark:bg-slate-600 cursor-not-allowed":"bg-green-500 hover:bg-green-600 shadow-green-200 dark:shadow-green-900/20"),children:[ie.jsx(u,{className:"mr-2",size:24,fill:"white"}),"Call"]})]})})},xe=i.memo(({queue:e,onCall:t,disabled:n=!1,onAdvanceToNext:s,dispositionSaved:a,setDispositionSaved:o})=>{const[l,c]=r.useState(!1),[h,p]=r.useState(!1),[f,m]=r.useState(0),[g,v]=r.useState([]),[y,b]=r.useState(!1),[_,x]=r.useState(null),[w,k]=r.useState(!1),[N,T]=r.useState(null),[j,P]=r.useState(null),I=i.useRef(!1);r.useEffect(()=>{try{const e=localStorage.getItem("user");P(e?JSON.parse(e):null)}catch{P(null)}},[]);const D=r.useMemo(()=>{const t=e.length,n=g.length;return t>0?n/t*100:0},[g.length,e.length]),A=i.useCallback(()=>{I.current||(I.current=!0,m(t=>{let n=t;t<e.length-1?n=t+1:c(!1);const i=e[t]?.id;return i&&!g.includes(i)&&v(e=>[...e,i]),setTimeout(()=>{I.current=!1},100),n}))},[e,g]);r.useEffect(()=>(window.__powerDialerAdvanceToNext=A,()=>{window.__powerDialerAdvanceToNext&&delete window.__powerDialerAdvanceToNext}),[A]),r.useEffect(()=>{a&&l&&(A(),o(!1))},[a,l,A,o]);const L=r.useCallback(()=>{c(!0),p(!1),m(0),v([])},[]),R=r.useCallback(()=>{A()},[f,e.length]),O=r.useCallback(()=>{A()},[f,e]),M=r.useCallback(t=>{x(e[t]),b(!0)},[e]);return ie.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[ie.jsx("div",{className:"lg:col-span-1",children:ie.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-gray-200 dark:border-slate-700 p-4",children:[ie.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Leads Queue"}),ie.jsx("div",{className:"space-y-2",children:0===e.length?ie.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"No leads in the queue"}):ie.jsx("div",{className:"flex flex-col",children:e.map((e,t)=>{const n=l&&f===t,i=g.includes(e.id);return ie.jsx("div",{className:`p-4 rounded-lg cursor-pointer transition-all duration-200 flex flex-col gap-2\n                      ${n?"bg-blue-50 dark:bg-blue-900":""}\n                      ${i?"opacity-50 pointer-events-none":"hover:bg-gray-100 dark:hover:bg-slate-700"}`,onClick:()=>M(t),children:ie.jsxs("div",{className:"flex-1",children:[ie.jsxs("h3",{className:"text-sm font-semibold "+(n?"text-blue-600 dark:text-blue-400":i?"text-gray-400 dark:text-gray-500":"text-gray-600 dark:text-gray-400"),children:[e.firstName," ",e.lastName]}),ie.jsx("p",{className:"text-xs "+(n?"text-blue-600 dark:text-blue-400 font-medium":i?"text-gray-400 dark:text-gray-500":"text-gray-600 dark:text-gray-400"),children:e.company}),ie.jsx("p",{className:"text-xs "+(n?"text-blue-600 dark:text-blue-400 font-medium":i?"text-gray-400 dark:text-gray-500":"text-gray-600 dark:text-gray-400"),children:e.phone})]})},e.id)})})})]})}),ie.jsx("div",{className:"lg:col-span-2",children:l?ie.jsxs("div",{className:"space-y-6",children:[ie.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[ie.jsxs("button",{onClick:()=>p(!h),className:"px-6 py-3 font-semibold rounded-lg flex items-center justify-center gap-2 transition "+(h?"bg-blue-600 hover:bg-blue-700 text-white":"bg-yellow-600 hover:bg-yellow-700 text-white"),children:[ie.jsx(C,{size:20}),h?"Resume":"Pause"]}),ie.jsxs("button",{onClick:R,disabled:h||f>=e.length-1,className:"px-6 py-3 bg-orange-600 hover:bg-orange-700 disabled:bg-gray-400 text-white font-semibold rounded-lg flex items-center justify-center gap-2 transition",children:[ie.jsx(E,{size:20}),"Skip"]}),ie.jsxs("button",{onClick:O,disabled:h,className:"px-6 py-3 bg-green-500 hover:bg-green-600 disabled:bg-gray-400 text-white font-semibold rounded-lg flex items-center justify-center gap-2 transition",children:[ie.jsx(d,{size:20}),"Mark Done"]})]}),ie.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-gray-200 dark:border-slate-700 p-4",children:[ie.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[ie.jsxs("div",{children:[ie.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Completed"}),ie.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:g.length})]}),ie.jsxs("div",{children:[ie.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Remaining"}),ie.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e.length-g.length})]}),ie.jsxs("div",{children:[ie.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Progress"}),ie.jsxs("p",{className:"text-2xl font-bold text-gray-700 dark:text-gray-300",children:[Math.round(D),"%"]})]})]}),ie.jsx("div",{className:"mt-3 w-full bg-gray-200 dark:bg-slate-700 rounded-full h-2",children:ie.jsx("div",{className:"bg-blue-600 dark:bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${D}%`}})})]})]}):ie.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-gray-200 dark:border-slate-700 p-8 h-[600px] flex flex-col items-center justify-center",children:[ie.jsxs("div",{className:"text-center mb-8",children:[ie.jsx(u,{size:64,className:"mx-auto text-blue-600 dark:text-blue-400 mb-4"}),ie.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Ready to Start?"}),ie.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:[e.length," leads available in queue"]})]}),ie.jsxs("button",{onClick:L,disabled:n||0===e.length,className:"px-8 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-semibold rounded-lg flex items-center gap-2 transition "+(n||0===e.length?"cursor-not-allowed":"cursor-pointer"),children:[ie.jsx(S,{size:20}),"Start Dialing"]})]})}),y&&_&&ie.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 dark:bg-black/60",children:ie.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-8 w-full max-w-md relative",children:[ie.jsx("button",{className:"absolute top-3 right-3 text-gray-500 dark:text-gray-300",onClick:()=>b(!1),children:""}),w?ie.jsxs(ie.Fragment,{children:[ie.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Edit Lead"}),ie.jsxs("form",{className:"space-y-2",onSubmit:e=>{e.preventDefault(),b(!1)},children:[ie.jsx("input",{type:"text",className:"w-full px-3 py-2 rounded border dark:bg-slate-700 dark:text-white",value:N?.firstName||"",onChange:e=>T(t=>t?{...t,firstName:e.target.value}:t),placeholder:"First Name"}),ie.jsx("input",{type:"text",className:"w-full px-3 py-2 rounded border dark:bg-slate-700 dark:text-white",value:N?.lastName||"",onChange:e=>T(t=>t?{...t,lastName:e.target.value}:t),placeholder:"Last Name"}),ie.jsx("input",{type:"text",className:"w-full px-3 py-2 rounded border dark:bg-slate-700 dark:text-white",value:N?.title||"",onChange:e=>T(t=>t?{...t,title:e.target.value}:t),placeholder:"Title"}),ie.jsx("input",{type:"text",className:"w-full px-3 py-2 rounded border dark:bg-slate-700 dark:text-white",value:N?.company||"",onChange:e=>T(t=>t?{...t,company:e.target.value}:t),placeholder:"Company"}),ie.jsx("input",{type:"text",className:"w-full px-3 py-2 rounded border dark:bg-slate-700 dark:text-white",value:N?.phone||"",onChange:e=>T(t=>t?{...t,phone:e.target.value}:t),placeholder:"Phone"}),ie.jsx("input",{type:"email",className:"w-full px-3 py-2 rounded border dark:bg-slate-700 dark:text-white",value:N?.email||"",onChange:e=>T(t=>t?{...t,email:e.target.value}:t),placeholder:"Email"}),ie.jsxs("select",{className:"w-full px-3 py-2 rounded border dark:bg-slate-700 dark:text-white",value:N?.status||"",onChange:e=>T(t=>t?{...t,status:e.target.value}:t),children:[ie.jsx("option",{value:"New",children:"New"}),ie.jsx("option",{value:"Contacted",children:"Contacted"}),ie.jsx("option",{value:"Qualified",children:"Qualified"}),ie.jsx("option",{value:"Lost",children:"Lost"}),ie.jsx("option",{value:"Do Not Call",children:"Do Not Call"})]}),ie.jsx("textarea",{className:"w-full px-3 py-2 rounded border dark:bg-slate-700 dark:text-white",value:N?.notes||"",onChange:e=>T(t=>t?{...t,notes:e.target.value}:t),placeholder:"Notes"}),ie.jsxs("div",{className:"flex gap-2 mt-2",children:[ie.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg",children:"Save"}),ie.jsx("button",{type:"button",className:"px-4 py-2 bg-gray-400 text-white rounded-lg",onClick:()=>k(!1),children:"Cancel"})]})]})]}):ie.jsxs(ie.Fragment,{children:[ie.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Lead Info"}),ie.jsxs("div",{className:"space-y-2 mb-4",children:[ie.jsxs("p",{children:[ie.jsx("span",{className:"font-semibold",children:"Name:"})," ",_.firstName," ",_.lastName]}),ie.jsxs("p",{children:[ie.jsx("span",{className:"font-semibold",children:"Title:"})," ",_.title]}),ie.jsxs("p",{children:[ie.jsx("span",{className:"font-semibold",children:"Company:"})," ",_.company]}),ie.jsxs("p",{children:[ie.jsx("span",{className:"font-semibold",children:"Phone:"})," ",_.phone]}),ie.jsxs("p",{children:[ie.jsx("span",{className:"font-semibold",children:"Email:"})," ",_.email]}),ie.jsxs("p",{children:[ie.jsx("span",{className:"font-semibold",children:"Status:"})," ",_.status]}),ie.jsxs("p",{children:[ie.jsx("span",{className:"font-semibold",children:"Timezone:"})," ",_.timezone]}),_.notes&&ie.jsxs("p",{children:[ie.jsx("span",{className:"font-semibold",children:"Notes:"})," ",_.notes]})]}),"admin"===j?.role&&ie.jsxs("div",{className:"flex gap-2",children:[ie.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg",onClick:()=>{k(!0),T(_)},children:"Edit"}),ie.jsx("button",{className:"px-4 py-2 bg-red-600 text-white rounded-lg",onClick:()=>{alert("Delete lead not implemented")},children:"Delete"})]})]})]})})]})}),we="undefined"==typeof window||window.location.hostname.includes("localhost")?"http://localhost:3001/api":`${window.location.protocol}//${window.location.host}/api`,ke={async createUser(e,t,n,i){const r=localStorage.getItem("authToken");return(await fetch(`${we}/auth/create-user`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r||""}`},body:JSON.stringify({email:e,firstName:t,lastName:n,role:i})})).json()},async login(e,t){const n=await fetch(`${we}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});let i;try{if(n.ok)i=await n.json();else{const e=await n.text();try{i=JSON.parse(e)}catch{i={success:!1,error:e.startsWith("<")?"Server error: received HTML response":e}}}}catch(r){i={success:!1,error:"Network or server error"}}return i},async logout(){localStorage.removeItem("authToken"),localStorage.removeItem("user")},async getCurrentUser(){const e=localStorage.getItem("authToken");if(!e)return null;const t=await fetch(`${we}/auth/profile`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)return localStorage.removeItem("authToken"),localStorage.removeItem("user"),null;return(await t.json()).user},getAuthToken:()=>localStorage.getItem("authToken"),isAuthenticated:()=>!!localStorage.getItem("authToken"),async getToken(e){const t=await fetch(`${we}/token`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identity:e})});return(await t.json()).token},getProspects:async()=>(await fetch(`${we}/prospects`)).json(),createProspect:async e=>(await fetch(`${we}/prospects`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json(),updateProspect:async(e,t)=>(await fetch(`${we}/prospects/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json(),getCallHistory:async()=>(await fetch(`${we}/calls`)).json(),logCall:async e=>(await fetch(`${we}/calls`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json(),getIncomingNumbers:async()=>(await fetch(`${we}/voice/incoming-numbers`)).json(),getTwilioNumbers:async()=>(await fetch(`${we}/voice/numbers`)).json(),async updateProfile(e){const t=localStorage.getItem("authToken"),n=await fetch(`${we}/auth/profile`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t||""}`},body:JSON.stringify(e)});return(await n.json()).user},async getTeamMembers(){const e=localStorage.getItem("authToken");return(await fetch(`${we}/auth/team-members`,{headers:{Authorization:`Bearer ${e||""}`}})).json()},async sendMessage(e,t,n){const i=localStorage.getItem("authToken");return(await fetch(`${we}/messages`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i||""}`},body:JSON.stringify({senderId:e,recipientId:t,content:n})})).json()},async getMessages(e){const t=localStorage.getItem("authToken");return(await fetch(`${we}/messages?userId=${e}`,{headers:{Authorization:`Bearer ${t||""}`}})).json()},async createLeadList(e,t,n){const i=localStorage.getItem("authToken");return(await fetch(`${we}/lead-lists`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i||""}`},body:JSON.stringify({name:e,description:t,prospects:n})})).json()},async getLeadLists(){const e=localStorage.getItem("authToken");return(await fetch(`${we}/lead-lists`,{headers:{Authorization:`Bearer ${e||""}`}})).json()},async getLeadList(e){const t=localStorage.getItem("authToken");return(await fetch(`${we}/lead-lists/${e}`,{headers:{Authorization:`Bearer ${t||""}`}})).json()},async updateLeadList(e,t){const n=localStorage.getItem("authToken");return(await fetch(`${we}/lead-lists/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n||""}`},body:JSON.stringify(t)})).json()},async deleteLeadList(e){const t=localStorage.getItem("authToken");await fetch(`${we}/lead-lists/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t||""}`}})},async addLeadListPermission(e,t,n,i){const r=localStorage.getItem("authToken");return(await fetch(`${we}/lead-lists/${e}/permissions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r||""}`},body:JSON.stringify({targetUserId:t,canView:n,canEdit:i})})).json()},async getLeadListPermissions(e){const t=localStorage.getItem("authToken");return(await fetch(`${we}/lead-lists/${e}/permissions`,{headers:{Authorization:`Bearer ${t||""}`}})).json()},async removeLeadListPermission(e,t){const n=localStorage.getItem("authToken");await fetch(`${we}/lead-lists/${e}/permissions/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${n||""}`}})}},Se=({currentCallerId:e,onSetCallerId:t})=>{const[n,i]=r.useState([]),[s,a]=r.useState(!1),o=async()=>{a(!0);try{const n=await ke.getTwilioNumbers();i(n),!e&&n.length>0&&t(n[0].phoneNumber)}catch(n){}finally{a(!1)}};return r.useEffect(()=>{o()},[]),ie.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[ie.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Settings"}),ie.jsxs("div",{className:"mb-6 p-4 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-900 rounded-xl flex items-center",children:[ie.jsx("div",{className:"p-2 bg-emerald-100 dark:bg-emerald-800 rounded-full mr-3",children:ie.jsx(N,{size:18,className:"text-emerald-600 dark:text-emerald-300"})}),ie.jsxs("div",{children:[ie.jsx("h4",{className:"text-sm font-bold text-emerald-800 dark:text-emerald-300",children:"System Operational"}),ie.jsx("p",{className:"text-xs text-emerald-600 dark:text-emerald-400",children:"Frontend connected to Live Service Layer."})]})]}),ie.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-200 dark:border-slate-700 overflow-hidden transition-colors duration-200",children:[ie.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-slate-700",children:[ie.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Outbound Caller ID"}),ie.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Select the phone number that appears on the recipient's caller ID."})]}),ie.jsxs("div",{className:"p-6",children:[ie.jsxs("div",{className:"flex justify-between items-center mb-4",children:[ie.jsx("label",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 uppercase tracking-wide",children:"Available Numbers"}),ie.jsxs("button",{onClick:o,className:"text-blue-600 dark:text-blue-400 text-sm flex items-center hover:underline",disabled:s,children:[ie.jsx(T,{size:14,className:"mr-1 "+(s?"animate-spin":"")}),"Refresh from Twilio"]})]}),s&&0===n.length?ie.jsx("div",{className:"py-8 text-center text-gray-400",children:"Loading numbers..."}):ie.jsx("div",{className:"space-y-3",children:n.map(n=>ie.jsxs("div",{onClick:()=>t(n.phoneNumber),className:"relative flex items-center p-4 rounded-lg border-2 cursor-pointer transition-all "+(e===n.phoneNumber?"border-blue-500 bg-blue-50/30 dark:bg-blue-900/30":"border-gray-100 dark:border-slate-700 hover:border-gray-200 dark:hover:border-slate-600"),children:[ie.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center mr-4 "+(e===n.phoneNumber?"bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400":"bg-gray-100 dark:bg-slate-700 text-gray-500 dark:text-gray-400"),children:ie.jsx(j,{size:20})}),ie.jsxs("div",{children:[ie.jsx("div",{className:"font-mono font-medium text-gray-900 dark:text-white",children:n.friendlyName}),ie.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["SID: ",n.sid]})]}),e===n.phoneNumber&&ie.jsx("div",{className:"absolute right-4 text-blue-600 dark:text-blue-400",children:ie.jsx(P,{size:20})})]},n.sid))})]}),ie.jsxs("div",{className:"bg-gray-50 dark:bg-slate-750 p-4 border-t border-gray-100 dark:border-slate-700 text-xs text-gray-500 dark:text-gray-400 flex items-start",children:[ie.jsx("div",{className:"mr-2 mt-0.5",children:""}),ie.jsxs("p",{children:["Numbers listed here are fetched directly from your Twilio account via the ",ie.jsx("code",{children:"IncomingPhoneNumbers"})," API. To add more numbers, purchase them in your Twilio Console."]})]})]})]})};i.memo(({log:e,formatDuration:t,getOutcomeIcon:n})=>ie.jsxs("tr",{className:"hover:bg-gray-50/50 dark:hover:bg-slate-700/50",children:[ie.jsx("td",{className:"p-4 text-sm text-gray-600 dark:text-gray-300",children:new Date(e.timestamp).toLocaleString()}),ie.jsx("td",{className:"p-4 font-medium text-gray-900 dark:text-white",children:e.prospectName}),ie.jsx("td",{className:"p-4 text-sm font-mono text-gray-500 dark:text-gray-400",children:e.phoneNumber}),ie.jsx("td",{className:"p-4 text-sm text-gray-600 dark:text-gray-300",children:t(e.duration)}),ie.jsx("td",{className:"p-4",children:ie.jsxs("div",{className:"flex items-center space-x-2",children:[n(e.outcome),ie.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e.outcome})]})}),ie.jsx("td",{className:"p-4 text-xs text-gray-500 dark:text-gray-400",children:e.fromNumber}),ie.jsx("td",{className:"p-4 text-sm text-gray-500 dark:text-gray-400 italic truncate max-w-xs",children:e.note||"-"})]}));const Ce=i.memo(({history:e})=>{const t=r.useMemo(()=>[...e].reverse(),[e]),[n,s]=i.useState({}),a=i.useMemo(()=>{try{const e=localStorage.getItem("user");return e?JSON.parse(e):null}catch{return null}},[]);useEffect(()=>{t.forEach(async e=>{if(!n[e.id])try{const t=await fetch(`/api/recordings/${e.id}`);if(t.ok){const n=await t.json();n&&n.url&&s(t=>({...t,[e.id]:n.url}))}}catch{}})},[t]);const o=r.useCallback(e=>{switch(e){case"Connected":return ie.jsx(d,{size:16,className:"text-green-500"});case"Meeting Set":return ie.jsx(h,{size:16,className:"text-purple-500"});case"Voicemail":return ie.jsx(A,{size:16,className:"text-amber-500"});case"Busy":return ie.jsx(D,{size:16,className:"text-red-500"});default:return ie.jsx(I,{size:16,className:"text-gray-400"})}},[]),l=r.useCallback(e=>{const t=e%60;return`${Math.floor(e/60)}:${t<10?"0":""}${t}`},[]),c=r.useMemo(()=>t.map(e=>{const t="admin"===a?.role||a?.email===e.fromNumber;return ie.jsxs("tr",{className:"hover:bg-gray-50/50 dark:hover:bg-slate-700/50",children:[ie.jsx("td",{className:"p-4 text-sm text-gray-600 dark:text-gray-300",children:new Date(e.timestamp).toLocaleString()}),ie.jsx("td",{className:"p-4 font-medium text-gray-900 dark:text-white",children:e.prospectName}),ie.jsx("td",{className:"p-4 text-sm font-mono text-gray-500 dark:text-gray-400",children:e.phoneNumber}),ie.jsx("td",{className:"p-4 text-sm text-gray-600 dark:text-gray-300",children:l(e.duration)}),ie.jsx("td",{className:"p-4",children:ie.jsxs("div",{className:"flex items-center space-x-2",children:[o(e.outcome),ie.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e.outcome})]})}),ie.jsx("td",{className:"p-4 text-xs text-gray-500 dark:text-gray-400",children:e.fromNumber}),ie.jsxs("td",{className:"p-4 text-sm text-gray-500 dark:text-gray-400 italic truncate max-w-xs",children:[e.note||"-",n[e.id]&&t&&ie.jsx("audio",{controls:!0,src:n[e.id],className:"mt-2 w-full"})]})]},e.id)}),[t,l,o,n,a]);return 0===e.length?ie.jsxs("div",{className:"p-12 text-center text-gray-400 dark:text-gray-500",children:[ie.jsx(p,{size:48,className:"mx-auto mb-4 opacity-20"}),ie.jsx("p",{children:"No calls have been made yet."})]}):ie.jsxs("div",{className:"max-w-5xl mx-auto p-6",children:[ie.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Call History"}),ie.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-200 dark:border-slate-700 overflow-hidden transition-colors duration-200",children:ie.jsxs("table",{className:"w-full text-left",children:[ie.jsx("thead",{className:"bg-gray-50 dark:bg-slate-700/50 text-gray-500 dark:text-gray-400 text-xs uppercase font-semibold",children:ie.jsxs("tr",{children:[ie.jsx("th",{className:"p-4",children:"Date & Time"}),ie.jsx("th",{className:"p-4",children:"Prospect"}),ie.jsx("th",{className:"p-4",children:"Number"}),ie.jsx("th",{className:"p-4",children:"Duration"}),ie.jsx("th",{className:"p-4",children:"Outcome"}),ie.jsx("th",{className:"p-4",children:"Caller ID Used"}),ie.jsx("th",{className:"p-4 w-1/4",children:"Notes / Recording"})]})}),ie.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-700",children:c})]})})]})}),Ee=({title:e,user:t,isDarkMode:n,onDarkModeToggle:i,callerId:s,onCallerIdChange:a,twilioNumbers:o,onViewProfile:l})=>{const[c,d]=r.useState([]),[h,p]=r.useState(!1),[f,m]=r.useState(!1),[g,v]=r.useState(!1);r.useEffect(()=>{const e=localStorage.getItem(`notifications-${t?.id}`);e&&d(JSON.parse(e))},[t?.id]);const y=c.filter(e=>!e.read).length,b=e=>{switch(e){case"success":return"bg-green-50 border-green-200 dark:bg-green-900/20 dark:border-green-800";case"error":return"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-800";case"warning":return"bg-yellow-50 border-yellow-200 dark:bg-yellow-900/20 dark:border-yellow-800";default:return"bg-blue-50 border-blue-200 dark:bg-blue-900/20 dark:border-blue-800"}};return ie.jsxs("header",{className:"h-16 bg-white dark:bg-slate-800 border-b border-gray-200 dark:border-slate-700 flex items-center justify-between px-8 shadow-sm z-40 transition-colors duration-200",children:[ie.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-white capitalize",children:e.replace(/-/g," ")}),ie.jsxs("div",{className:"flex items-center space-x-4",children:[ie.jsxs("div",{className:"relative",children:[ie.jsxs("button",{onClick:()=>m(!f),className:"hidden md:flex items-center px-3 py-2 bg-gray-100 dark:bg-slate-700 rounded-lg text-sm text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-slate-600 hover:bg-gray-200 dark:hover:bg-slate-600 transition",children:[ie.jsx(u,{size:14,className:"mr-2"}),s?s.replace(/[()-]/g,""):"Select Caller ID"]}),f&&ie.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-gray-200 dark:border-slate-700 z-50",children:[ie.jsx("div",{className:"p-2 border-b border-gray-200 dark:border-slate-700",children:ie.jsx("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Available Numbers"})}),ie.jsx("div",{className:"max-h-64 overflow-y-auto",children:0===o.length?ie.jsx("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400 text-sm",children:"No phone numbers available"}):o.map(e=>ie.jsxs("button",{onClick:()=>{a(e.phoneNumber),m(!1)},className:"w-full text-left px-4 py-2 text-sm transition "+(s===e.phoneNumber?"bg-blue-100 dark:bg-blue-900/40 text-blue-900 dark:text-blue-200":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700"),children:[ie.jsx("div",{className:"font-medium",children:e.phoneNumber}),ie.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.friendlyName})]},e.sid))})]})]}),ie.jsx("button",{onClick:i,className:"p-2 text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-full transition-colors",title:n?"Switch to Light Mode":"Switch to Dark Mode",children:n?"":""}),ie.jsxs("div",{className:"relative",children:[ie.jsxs("button",{onClick:()=>p(!h),className:"relative p-2 text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-full transition-colors",title:"Notifications",children:[ie.jsx(L,{size:20}),y>0&&ie.jsx("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full",children:y})]}),h&&ie.jsxs("div",{className:"absolute right-0 mt-2 w-96 bg-white dark:bg-slate-800 rounded-lg shadow-xl border border-gray-200 dark:border-slate-700 z-50 max-h-96 overflow-hidden flex flex-col",children:[ie.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-slate-700 flex justify-between items-center",children:[ie.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Notifications"}),c.length>0&&ie.jsx("button",{onClick:()=>{d([]),localStorage.setItem(`notifications-${t?.id}`,JSON.stringify([]))},className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:"Clear All"})]}),ie.jsx("div",{className:"overflow-y-auto flex-1",children:0===c.length?ie.jsxs("div",{className:"p-8 text-center",children:[ie.jsx(L,{className:"mx-auto text-gray-400 mb-2",size:32}),ie.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No notifications"})]}):c.map(e=>ie.jsxs("div",{className:`p-4 border-b border-gray-100 dark:border-slate-700 ${b(e.type)} ${e.read?"bg-opacity-50":"bg-opacity-100"}`,children:[ie.jsxs("div",{className:"flex justify-between items-start gap-3",children:[ie.jsxs("div",{className:"flex-1",children:[ie.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:e.title}),ie.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm mt-1",children:e.message}),ie.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:new Date(e.createdAt).toLocaleString()})]}),ie.jsx("button",{onClick:()=>(e=>{const n=c.filter(t=>t.id!==e);d(n),localStorage.setItem(`notifications-${t?.id}`,JSON.stringify(n))})(e.id),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:ie.jsx(R,{size:16})})]}),!e.read&&ie.jsxs("button",{onClick:()=>(e=>{const n=c.map(t=>t.id===e?{...t,read:!0}:t);d(n),localStorage.setItem(`notifications-${t?.id}`,JSON.stringify(n))})(e.id),className:"mt-2 flex items-center gap-2 text-xs text-blue-600 dark:text-blue-400 hover:underline",children:[ie.jsx(P,{size:14}),"Mark as read"]})]},e.id))})]})]}),ie.jsxs("div",{className:"relative",children:[ie.jsx("button",{onClick:()=>v(!g),className:"w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm cursor-pointer transition "+(t?.profilePicture?"overflow-hidden":"bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-200"),title:t?`${t.firstName} ${t.lastName}`:"Profile",children:t?.profilePicture?ie.jsx("img",{src:t.profilePicture,alt:`${t.firstName} ${t.lastName}`,className:"w-full h-full object-cover"}):ie.jsxs(ie.Fragment,{children:[t?.firstName.charAt(0).toUpperCase(),t?.lastName.charAt(0).toUpperCase()]})}),g&&ie.jsxs("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-gray-200 dark:border-slate-700 z-50",children:[ie.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-slate-700",children:ie.jsxs("div",{className:"flex items-center gap-3",children:[ie.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center font-bold text-sm "+(t?.profilePicture?"overflow-hidden":"bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-200"),children:t?.profilePicture?ie.jsx("img",{src:t.profilePicture,alt:`${t.firstName} ${t.lastName}`,className:"w-full h-full object-cover"}):ie.jsxs(ie.Fragment,{children:[t?.firstName.charAt(0).toUpperCase(),t?.lastName.charAt(0).toUpperCase()]})}),ie.jsxs("div",{children:[ie.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white",children:[t?.firstName," ",t?.lastName]}),ie.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t?.email}),ie.jsx("span",{className:"inline-block mt-1 px-2 py-0.5 rounded text-xs font-medium "+("admin"===t?.role?"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-200":"manager"===t?.role?"bg-blue-100 text-blue-800 dark:bg-blue-900/40 dark:text-blue-200":"bg-gray-100 text-gray-800 dark:bg-gray-900/40 dark:text-gray-200"),children:t?.role?t.role.charAt(0).toUpperCase()+t.role.slice(1):"User"})]})]})}),ie.jsxs("div",{className:"p-2",children:[ie.jsx("button",{onClick:()=>{l?.(),v(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700 rounded transition",children:"View Profile"}),ie.jsx("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700 rounded transition",children:"Change Password"})]})]})]})]})]})},Ne=()=>{const e=s(),[t,n]=r.useState({email:"",password:"",loading:!1,error:""}),i=e=>{const{name:t,value:i}=e.target;n(e=>({...e,[t]:i,error:""}))};return ie.jsx("div",{className:"auth-container",children:ie.jsxs("div",{className:"auth-card",children:[ie.jsx("h1",{children:"Login"}),ie.jsxs("form",{onSubmit:async i=>{i.preventDefault(),n(e=>({...e,loading:!0,error:""}));try{if(!t.email||!t.password)throw new Error("Email and password are required");const i=await ke.login(t.email,t.password);i.success?(localStorage.setItem("authToken",i.token),localStorage.setItem("user",JSON.stringify(i.user)),e("/")):n(e=>({...e,error:i.error||"Login failed",loading:!1}))}catch(r){n(e=>({...e,error:r instanceof Error?r.message:"Login failed",loading:!1}))}},children:[ie.jsxs("div",{className:"form-group",children:[ie.jsx("label",{htmlFor:"email",children:"Email"}),ie.jsx("input",{id:"email",type:"email",name:"email",value:t.email,onChange:i,placeholder:"Enter your email",disabled:t.loading})]}),ie.jsxs("div",{className:"form-group",children:[ie.jsx("label",{htmlFor:"password",children:"Password"}),ie.jsx("input",{id:"password",type:"password",name:"password",value:t.password,onChange:i,placeholder:"Enter your password",disabled:t.loading})]}),t.error&&ie.jsx("div",{className:"error-message",children:t.error}),ie.jsx("button",{type:"submit",disabled:t.loading,className:"submit-button",children:t.loading?"Logging in...":"Login"})]}),ie.jsx("div",{className:"auth-footer",children:ie.jsx("p",{className:"text-gray-500",children:"Admin creates user accounts"})})]})})},Te=({user:e,onBack:t,onUpdate:n})=>{const[i,s]=r.useState(!1),[a,o]=r.useState(!1),[l,c]=r.useState("profile"),[u,d]=r.useState([]),[h,f]=r.useState(""),[m,y]=r.useState(""),[b,_]=r.useState([]),[x,w]=r.useState({firstName:e.firstName,lastName:e.lastName,email:e.email,bio:e.bio||"",profilePicture:e.profilePicture||""}),[k,S]=r.useState(e.workHours||{monday:{start:"09:00",end:"17:00"},tuesday:{start:"09:00",end:"17:00"},wednesday:{start:"09:00",end:"17:00"},thursday:{start:"09:00",end:"17:00"},friday:{start:"09:00",end:"17:00"},saturday:void 0,sunday:void 0});r.useEffect(()=>{"messages"===l&&(C(),E())},[l]);const C=async()=>{try{const t=await ke.getMessages(e.id);d(t)}catch(t){}},E=async()=>{try{const t=await ke.getTeamMembers();_(t.filter(t=>t.id!==e.id))}catch(t){}},N=e=>{const{name:t,value:n}=e.target;w(e=>({...e,[t]:n}))},T=(e,t,n)=>{S(i=>({...i,[e]:i[e]?{...i[e],[t]:n}:{start:n,end:n}}))},j=async()=>{o(!0);try{const t=await ke.updateProfile({...e,...x,workHours:k,updatedAt:(new Date).toISOString()});n(t),s(!1)}catch(t){alert("Failed to update profile. Please try again.")}finally{o(!1)}},P=async()=>{if(h.trim()&&m){o(!0);try{const t=await ke.sendMessage(e.id,m,h);d(e=>[...e,t]),f("")}catch(t){alert("Failed to send message.")}finally{o(!1)}}};return ie.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-slate-900 p-6",children:[ie.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-blue-600 dark:text-blue-400 mb-6 hover:underline",children:[ie.jsx(O,{size:20})," Back"]}),ie.jsxs("div",{className:"max-w-4xl mx-auto bg-white dark:bg-slate-800 rounded-lg shadow-md",children:[ie.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 p-8 text-white rounded-t-lg",children:ie.jsxs("div",{className:"flex items-end gap-6",children:[ie.jsxs("div",{className:"relative",children:[ie.jsx("div",{className:"w-24 h-24 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center text-3xl font-bold text-blue-600 dark:text-blue-200 overflow-hidden border-4 border-white",children:x.profilePicture?ie.jsx("img",{src:x.profilePicture,alt:"Profile",className:"w-full h-full object-cover"}):(I=x.firstName,D=x.lastName,`${I.charAt(0)}${D.charAt(0)}`.toUpperCase())}),i&&ie.jsxs("label",{className:"absolute bottom-0 right-0 bg-white text-blue-600 p-2 rounded-full cursor-pointer hover:bg-gray-100",children:[ie.jsx(g,{size:16}),ie.jsx("input",{type:"file",accept:"image/*",onChange:async e=>{const t=e.target.files?.[0];if(!t)return;const n=new FileReader;n.onload=e=>{const t=e.target?.result;w(e=>({...e,profilePicture:t}))},n.readAsDataURL(t)},className:"hidden"})]})]}),ie.jsxs("div",{children:[ie.jsxs("h1",{className:"text-3xl font-bold",children:[x.firstName," ",x.lastName]}),ie.jsxs("p",{className:"text-blue-100 flex items-center gap-2 mt-2",children:[ie.jsx(M,{size:16})," ",x.email]}),ie.jsxs("p",{className:"text-blue-100 mt-1",children:["Role: ",ie.jsx("span",{className:"font-semibold capitalize",children:e.role||"agent"})]})]})]})}),ie.jsxs("div",{className:"border-b border-gray-200 dark:border-slate-700 flex gap-0",children:[ie.jsxs("button",{onClick:()=>c("profile"),className:"flex-1 py-4 px-6 font-medium transition border-b-2 "+("profile"===l?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-800"),children:[ie.jsx(v,{size:16,className:"inline mr-2"})," Profile Info"]}),ie.jsxs("button",{onClick:()=>c("work-hours"),className:"flex-1 py-4 px-6 font-medium transition border-b-2 "+("work-hours"===l?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-800"),children:[ie.jsx(p,{size:16,className:"inline mr-2"})," Work Hours"]}),ie.jsxs("button",{onClick:()=>c("messages"),className:"flex-1 py-4 px-6 font-medium transition border-b-2 "+("messages"===l?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-800"),children:[ie.jsx(z,{size:16,className:"inline mr-2"})," Messages"]})]}),ie.jsxs("div",{className:"p-8",children:["profile"===l&&ie.jsxs("div",{children:[ie.jsxs("div",{className:"flex justify-between items-center mb-6",children:[ie.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Profile Information"}),!i&&ie.jsx("button",{onClick:()=>s(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Edit Profile"})]}),i?ie.jsxs("div",{className:"space-y-4",children:[ie.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[ie.jsxs("div",{children:[ie.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"First Name"}),ie.jsx("input",{type:"text",name:"firstName",value:x.firstName,onChange:N,className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),ie.jsxs("div",{children:[ie.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Last Name"}),ie.jsx("input",{type:"text",name:"lastName",value:x.lastName,onChange:N,className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),ie.jsxs("div",{children:[ie.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),ie.jsx("input",{type:"email",name:"email",value:x.email,onChange:N,className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),ie.jsxs("div",{children:[ie.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Bio / About You"}),ie.jsx("textarea",{name:"bio",value:x.bio,onChange:N,placeholder:"Tell us about yourself...",rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),ie.jsxs("div",{className:"flex gap-4 pt-4",children:[ie.jsx("button",{onClick:j,disabled:a,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition disabled:opacity-50",children:a?"Saving...":"Save Changes"}),ie.jsx("button",{onClick:()=>{s(!1),w({firstName:e.firstName,lastName:e.lastName,email:e.email,bio:e.bio||"",profilePicture:e.profilePicture||""})},className:"px-6 py-2 bg-gray-400 text-white rounded-lg hover:bg-gray-500 transition",children:"Cancel"})]})]}):ie.jsxs("div",{className:"space-y-4",children:[ie.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[ie.jsxs("div",{children:[ie.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"First Name"}),ie.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-white",children:e.firstName})]}),ie.jsxs("div",{children:[ie.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Last Name"}),ie.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-white",children:e.lastName})]})]}),ie.jsxs("div",{children:[ie.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Email"}),ie.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-white",children:e.email})]}),e.bio&&ie.jsxs("div",{children:[ie.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Bio"}),ie.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-white",children:e.bio})]})]})]}),"work-hours"===l&&ie.jsxs("div",{children:[ie.jsxs("div",{className:"flex justify-between items-center mb-6",children:[ie.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Work Hours"}),i&&ie.jsx("button",{onClick:j,disabled:a,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition disabled:opacity-50",children:"Save Changes"}),!i&&ie.jsx("button",{onClick:()=>s(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Edit Work Hours"})]}),ie.jsx("div",{className:"space-y-3",children:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].map(e=>ie.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 dark:bg-slate-700 rounded-lg",children:[ie.jsx("div",{className:"w-24",children:ie.jsx("p",{className:"font-medium text-gray-900 dark:text-white capitalize",children:e})}),i?ie.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[ie.jsx("input",{type:"checkbox",checked:void 0!==k[e],onChange:()=>(e=>{S(t=>({...t,[e]:t[e]?void 0:{start:"09:00",end:"17:00"}}))})(e),className:"w-5 h-5"}),k[e]&&ie.jsxs(ie.Fragment,{children:[ie.jsx("input",{type:"time",value:k[e]?.start||"09:00",onChange:t=>T(e,"start",t.target.value),className:"px-3 py-2 border border-gray-300 dark:border-slate-600 dark:bg-slate-600 dark:text-white rounded-lg"}),ie.jsx("span",{className:"text-gray-500",children:"to"}),ie.jsx("input",{type:"time",value:k[e]?.end||"17:00",onChange:t=>T(e,"end",t.target.value),className:"px-3 py-2 border border-gray-300 dark:border-slate-600 dark:bg-slate-600 dark:text-white rounded-lg"})]})]}):ie.jsx("div",{className:"flex-1",children:k[e]?ie.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[k[e].start," - ",k[e].end]}):ie.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Not working"})})]},e))})]}),"messages"===l&&ie.jsxs("div",{children:[ie.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6",children:"Messages"}),ie.jsxs("div",{className:"grid grid-cols-3 gap-4 h-96",children:[ie.jsxs("div",{className:"border border-gray-200 dark:border-slate-700 rounded-lg overflow-hidden flex flex-col",children:[ie.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-700",children:ie.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm",children:"Team Members"})}),ie.jsx("div",{className:"overflow-y-auto flex-1",children:0===b.length?ie.jsx("p",{className:"p-4 text-sm text-gray-500 dark:text-gray-400",children:"No team members"}):b.map(e=>ie.jsxs("button",{onClick:()=>y(e.id),className:"w-full p-3 border-b border-gray-100 dark:border-slate-700 text-left transition "+(m===e.id?"bg-blue-50 dark:bg-blue-900":"hover:bg-gray-50 dark:hover:bg-slate-700"),children:[ie.jsxs("p",{className:"font-medium text-gray-900 dark:text-white text-sm",children:[e.firstName," ",e.lastName]}),ie.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.role})]},e.id))})]}),ie.jsxs("div",{className:"col-span-2 border border-gray-200 dark:border-slate-700 rounded-lg flex flex-col",children:[ie.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-700",children:ie.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm",children:m?b.find(e=>e.id===m)?.firstName+" "+b.find(e=>e.id===m)?.lastName:"Select a member"})}),ie.jsx("div",{className:"overflow-y-auto flex-1 p-4 space-y-3",children:u.filter(t=>t.senderId===e.id&&t.recipientId===m||t.senderId===m&&t.recipientId===e.id).map(t=>ie.jsx("div",{className:"flex "+(t.senderId===e.id?"justify-end":"justify-start"),children:ie.jsxs("div",{className:"max-w-xs px-4 py-2 rounded-lg "+(t.senderId===e.id?"bg-blue-500 text-white rounded-br-none":"bg-gray-200 dark:bg-slate-700 text-gray-900 dark:text-white rounded-bl-none"),children:[ie.jsx("p",{className:"text-sm",children:t.content}),ie.jsx("p",{className:"text-xs opacity-75 mt-1",children:new Date(t.timestamp).toLocaleTimeString()})]})},t.id))}),ie.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-slate-700 flex gap-2",children:[ie.jsx("input",{type:"text",value:h,onChange:e=>f(e.target.value),onKeyPress:e=>"Enter"===e.key&&P(),placeholder:"Type a message...",disabled:!m,className:"flex-1 px-3 py-2 border border-gray-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50"}),ie.jsx("button",{onClick:P,disabled:!m||!h.trim()||a,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:opacity-50",children:ie.jsx(F,{size:18})})]})]})]})]})]})]})]});var I,D},je={callsMade:0,connections:0,appointmentsSet:0,talkTime:0},Pe=[];var Ie,De={exports:{}};var Ae=function(){if(Ie)return De.exports;Ie=1;var e,t="object"==typeof Reflect?Reflect:null,n=t&&"function"==typeof t.apply?t.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};e=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function r(){r.init.call(this)}De.exports=r,De.exports.once=function(e,t){return new Promise(function(n,i){function r(n){e.removeListener(t,s),i(n)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))}f(e,t,s,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&f(e,"error",t,n)}(e,r,{once:!0})})},r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function o(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function l(e,t,n,i){var r,s,l;if(a(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),l=s[t]),void 0===l)l=s[t]=n,++e._eventsCount;else if("function"==typeof l?l=s[t]=i?[n,l]:[l,n]:i?l.unshift(n):l.push(n),(r=o(e))>0&&l.length>r&&!l.warned){l.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=l.length,console&&console.warn}return e}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=c.bind(i);return r.listener=n,i.wrapFn=r,r}function d(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):p(r,r.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function f(e,t,n,i){if("function"==typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function r(s){i.once&&e.removeEventListener(t,r),n(s)})}}return Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),r.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return o(this)},r.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var r="error"===e,s=this._events;if(void 0!==s)r=r&&void 0===s.error;else if(!r)return!1;if(r){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var l=s[e];if(void 0===l)return!1;if("function"==typeof l)n(l,this,t);else{var c=l.length,u=p(l,c);for(i=0;i<c;++i)n(u[i],this,t)}return!0},r.prototype.addListener=function(e,t){return l(this,e,t,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(e,t){return l(this,e,t,!0)},r.prototype.once=function(e,t){return a(t),this.on(e,u(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,u(this,e,t)),this},r.prototype.removeListener=function(e,t){var n,i,r,s,o;if(a(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){o=n[s].listener,r=s;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,o||t)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,s=Object.keys(n);for(i=0;i<s.length;++i)"removeListener"!==(r=s[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},r.prototype.listeners=function(e){return d(this,e,!0)},r.prototype.rawListeners=function(e){return d(this,e,!1)},r.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},r.prototype.listenerCount=h,r.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]},De.exports}();class Le extends Ae.EventEmitter{constructor(e){super(),Object.defineProperties(this,{_attempts:{value:0,writable:!0},_duration:{enumerable:!1,get(){let e=this._min*Math.pow(this._factor,this._attempts);if(this._jitter){const t=Math.random(),n=Math.floor(t*this._jitter*e);e=1&Math.floor(10*t)?e+n:e-n}return 0|Math.min(e,this._max)}},_factor:{value:e.factor||2},_jitter:{value:e.jitter>0&&e.jitter<=1?e.jitter:0},_max:{value:e.max||1e4},_min:{value:e.min||100},_timeoutID:{value:null,writable:!0}})}backoff(){const e=this._duration;this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null),this.emit("backoff",this._attempts,e),this._timeoutID=setTimeout(()=>{this.emit("ready",this._attempts,e),this._attempts++},e)}reset(){this._attempts=0,this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)}}function Re(e,t,n,i){return new(n||(n=Promise))(function(r,s){function a(e){try{l(i.next(e))}catch(t){s(t)}}function o(e){try{l(i.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((i=i.apply(e,t||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;var Oe,Me={exports:{}};var ze,Fe,$e,Ue=(Oe||(Oe=1,Fe=Me.exports,$e=function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],r={},s=null;function a(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(i){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function o(){console.log&&(console.log.apply||Function.prototype.apply.apply(console.log,[console,arguments])),console.trace}function l(){for(var n=this.getLevel(),r=0;r<i.length;r++){var s=i[r];this[s]=r<n?e:this.methodFactory(s,n,this.name)}if(this.log=this.debug,typeof console===t&&n<this.levels.SILENT)return"No console available for logging"}function c(e){return function(){typeof console!==t&&(l.call(this),this[e].apply(this,arguments))}}function u(i,r,s){return function(i){return"debug"===i&&(i="log"),typeof console!==t&&("trace"===i&&n?o:void 0!==console[i]?a(console,i):void 0!==console.log?a(console,"log"):e)}(i)||c.apply(this,arguments)}function d(e,n){var a,o,c,d=this,h="loglevel";function p(){var e;if(typeof window!==t&&h){try{e=window.localStorage[h]}catch(s){}if(typeof e===t)try{var n=window.document.cookie,i=encodeURIComponent(h),r=n.indexOf(i+"=");-1!==r&&(e=/^([^;]+)/.exec(n.slice(r+i.length+1))[1])}catch(s){}return void 0===d.levels[e]&&(e=void 0),e}}function f(e){var t=e;if("string"==typeof t&&void 0!==d.levels[t.toUpperCase()]&&(t=d.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=d.levels.SILENT)return t;throw new TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?h+=":"+e:"symbol"==typeof e&&(h=void 0),d.name=e,d.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},d.methodFactory=n||u,d.getLevel=function(){return null!=c?c:null!=o?o:a},d.setLevel=function(e,n){return c=f(e),!1!==n&&function(e){var n=(i[e]||"silent").toUpperCase();if(typeof window!==t&&h){try{return void(window.localStorage[h]=n)}catch(r){}try{window.document.cookie=encodeURIComponent(h)+"="+n+";"}catch(r){}}}(c),l.call(d)},d.setDefaultLevel=function(e){o=f(e),p()||d.setLevel(e,!1)},d.resetLevel=function(){c=null,function(){if(typeof window!==t&&h){try{window.localStorage.removeItem(h)}catch(e){}try{window.document.cookie=encodeURIComponent(h)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}(),l.call(d)},d.enableAll=function(e){d.setLevel(d.levels.TRACE,e)},d.disableAll=function(e){d.setLevel(d.levels.SILENT,e)},d.rebuild=function(){if(s!==d&&(a=f(s.getLevel())),l.call(d),s===d)for(var e in r)r[e].rebuild()},a=f(s?s.getLevel():"WARN");var m=p();null!=m&&(c=f(m)),l.call(d)}(s=new d).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=r[e];return t||(t=r[e]=new d(e,s.methodFactory)),t};var h=typeof window!==t?window.log:void 0;return s.noConflict=function(){return typeof window!==t&&window.log===s&&(window.log=h),s},s.getLoggers=function(){return r},s.default=s,s},(ze=Me).exports?ze.exports=$e():Fe.log=$e()),Me.exports);const He=Q({__proto__:null,default:n(Ue)},[Ue]);class We extends Error{constructor(e,t){super(),Object.setPrototypeOf(this,We.prototype);const n="string"==typeof e?e:this.explanation,i="object"==typeof e?e:t;this.message=`${this.name} (${this.code}): ${n}`,this.originalError=i}}var Ve,Be,qe,Ge,Qe,Je,Ke,Xe,Ye,Ze,et;!function(e){e.AccessTokenInvalid=class extends We{constructor(t,n){super(t,n),this.causes=[],this.code=20101,this.description="Invalid access token",this.explanation="Twilio was unable to validate your Access Token",this.name="AccessTokenInvalid",this.solutions=[],Object.setPrototypeOf(this,e.AccessTokenInvalid.prototype);const i="string"==typeof t?t:this.explanation,r="object"==typeof t?t:n;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=r}};e.AccessTokenExpired=class extends We{constructor(t,n){super(t,n),this.causes=[],this.code=20104,this.description="Access token expired or expiration date invalid",this.explanation="The Access Token provided to the Twilio API has expired, the expiration time specified in the token was invalid, or the expiration time specified was too far in the future",this.name="AccessTokenExpired",this.solutions=[],Object.setPrototypeOf(this,e.AccessTokenExpired.prototype);const i="string"==typeof t?t:this.explanation,r="object"==typeof t?t:n;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=r}};e.AuthenticationFailed=class extends We{constructor(t,n){super(t,n),this.causes=[],this.code=20151,this.description="Authentication Failed",this.explanation="The Authentication with the provided JWT failed",this.name="AuthenticationFailed",this.solutions=[],Object.setPrototypeOf(this,e.AuthenticationFailed.prototype);const i="string"==typeof t?t:this.explanation,r="object"==typeof t?t:n;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=r}}}(Ve||(Ve={})),(qe=Be||(Be={})).AccessTokenSignatureValidationFailed=class extends We{constructor(e,t){super(e,t),this.causes=["The access token has an invalid Account SID, API Key, or API Key Secret."],this.code=31202,this.description="Signature validation failed.",this.explanation="The provided access token failed signature validation.",this.name="AccessTokenSignatureValidationFailed",this.solutions=["Ensure the Account SID, API Key, and API Key Secret are valid when generating your access token."],Object.setPrototypeOf(this,qe.AccessTokenSignatureValidationFailed.prototype);const n="string"==typeof e?e:this.explanation,i="object"==typeof e?e:t;this.message=`${this.name} (${this.code}): ${n}`,this.originalError=i}},function(e){e.BadRequest=class extends We{constructor(t,n){super(t,n),this.causes=[],this.code=31400,this.description="Bad Request (HTTP/SIP)",this.explanation="The request could not be understood due to malformed syntax.",this.name="BadRequest",this.solutions=[],Object.setPrototypeOf(this,e.BadRequest.prototype);const i="string"==typeof t?t:this.explanation,r="object"==typeof t?t:n;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=r}};e.NotFound=class extends We{constructor(t,n){super(t,n),this.causes=["The outbound call was made to an invalid phone number.","The TwiML application sid is missing a Voice URL."],this.code=31404,this.description="Not Found (HTTP/SIP)",this.explanation="The server has not found anything matching the request.",this.name="NotFound",this.solutions=["Ensure the phone number dialed is valid.","Ensure the TwiML application is configured correctly with a Voice URL link."],Object.setPrototypeOf(this,e.NotFound.prototype);const i="string"==typeof t?t:this.explanation,r="object"==typeof t?t:n;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=r}};e.TemporarilyUnavailable=class extends We{constructor(t,n){super(t,n),this.causes=[],this.code=31480,this.description="Temporarily Unavailable (SIP)",this.explanation="The callee is currently unavailable.",this.name="TemporarilyUnavailable",this.solutions=[],Object.setPrototypeOf(this,e.TemporarilyUnavailable.prototype);const i="string"==typeof t?t:this.explanation,r="object"==typeof t?t:n;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=r}};e.BusyHere=class extends We{constructor(t,n){super(t,n),this.causes=[],this.code=31486,this.description="Busy Here (SIP)",this.explanation="The callee is busy.",this.name="BusyHere",this.solutions=[],Object.setPrototypeOf(this,e.BusyHere.prototype);const i="string"==typeof t?t:this.explanation,r="object"==typeof t?t:n;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=r}}}(Ge||(Ge={})),(Je=Qe||(Qe={})).Decline=class extends We{constructor(e,t){super(e,t),this.causes=[],this.code=31603,this.description="Decline (SIP)",this.explanation="The callee does not wish to participate in the call.",this.name="Decline",this.solutions=[],Object.setPrototypeOf(this,Je.Decline.prototype);const n="string"==typeof e?e:this.explanation,i="object"==typeof e?e:t;this.message=`${this.name} (${this.code}): ${n}`,this.originalError=i}},function(e){e.UnknownError=class extends We{constructor(t,n){super(t,n),this.causes=[],this.code=31e3,this.description="Unknown Error",this.explanation="An unknown error has occurred. See error details for more information.",this.name="UnknownError",this.solutions=[],Object.setPrototypeOf(this,e.UnknownError.prototype);const i="string"==typeof t?t:this.explanation,r="object"==typeof t?t:n;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=r}};e.ApplicationNotFoundError=class extends We{constructor(t,n){super(t,n),this.causes=[],this.code=31001,this.description="Application Not Found",this.explanation="",this.name="ApplicationNotFoundError",this.solutions=[],Object.setPrototypeOf(this,e.ApplicationNotFoundError.prototype);const i="string"==typeof t?t:this.explanation,r="object"==typeof t?t:n;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=r}};e.ConnectionDeclinedError=class extends We{constructor(t,n){super(t,n),this.causes=[],this.code=31002,this.description="Connection Declined",this.explanation="",this.name="ConnectionDeclinedError",this.solutions=[],Object.setPrototypeOf(this,e.ConnectionDeclinedError.prototype);const i="string"==typeof t?t:this.explanation,r="object"==typeof t?t:n;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=r}};e.ConnectionTimeoutError=class extends We{constructor(t,n){super(t,n),this.causes=[],this.code=31003,this.description="Connection Timeout",this.explanation="The server could not produce a response within a suitable amount of time.",this.name="ConnectionTimeoutError",this.solutions=[],Object.setPrototypeOf(this,e.ConnectionTimeoutError.prototype);const i="string"==typeof t?t:this.explanation,r="object"==typeof t?t:n;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=r}};e.ConnectionError=class extends We{constructor(t,n){super(t,n),this.causes=[],this.code=31005,this.description="Connection error",this.explanation="A connection error occurred during the call",this.name="ConnectionError",this.solutions=[],Object.setPrototypeOf(this,e.ConnectionError.prototype);const i="string"==typeof t?t:this.explanation,r="object"==typeof t?t:n;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=r}};e.CallCancelledError=class extends We{constructor(t,n){super(t,n),this.causes=["The incoming call was cancelled because it was not answered in time or it was accepted/rejected by another application instance registered with the same identity."],this.code=31008,this.description="Call cancelled",this.explanation="Unable to answer because the call has ended",this.name="CallCancelledError",this.solutions=[],Object.setPrototypeOf(this,e.CallCancelledError.prototype);const i="string"==typeof t?t:this.explanation,r="object"==typeof t?t:n;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=r}};e.TransportError=class extends We{constructor(t,n){super(t,n),this.causes=[],this.code=31009,this.description="Transport error",this.explanation="No transport available to send or receive messages",this.name="TransportError",this.solutions=[],Object.setPrototypeOf(this,e.TransportError.prototype);const i="string"==typeof t?t:this.explanation,r="object"==typeof t?t:n;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=r}}}(Ke||(Ke={})),function(e){e.MalformedRequestError=class extends We{constructor(t,n){super(t,n),this.causes=["Invalid content or MessageType passed to sendMessage method."],this.code=31100,this.description="The request had malformed syntax.",this.explanation="The request could not be understood due to malformed syntax.",this.name="MalformedRequestError",this.solutions=["Ensure content and MessageType passed to sendMessage method are valid."],Object.setPrototypeOf(this,e.MalformedRequestError.prototype);const i="string"==typeof t?t:this.explanation,r="object"==typeof t?t:n;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=r}};e.MissingParameterArrayError=class extends We{constructor(t,n){super(t,n),this.causes=[],this.code=31101,this.description="Missing parameter array in request",this.explanation="",this.name="MissingParameterArrayError",this.solutions=[],Object.setPrototypeOf(this,e.MissingParameterArrayError.prototype);const i="string"==typeof t?t:this.explanation,r="object"==typeof t?t:n;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=r}};e.AuthorizationTokenMissingError=class extends We{constructor(t,n){super(t,n),this.causes=[],this.code=31102,this.description="Authorization token missing in request.",this.explanation="",this.name="AuthorizationTokenMissingError",this.solutions=[],Object.setPrototypeOf(this,e.AuthorizationTokenMissingError.prototype);const i="string"==typeof t?t:this.explanation,r="object"==typeof t?t:n;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=r}};e.MaxParameterLengthExceededError=class extends We{constructor(t,n){super(t,n),this.causes=[],this.code=31103,this.description="Maximum parameter length has been exceeded.",this.explanation="Length of parameters cannot exceed MAX_PARAM_LENGTH.",this.name="MaxParameterLengthExceededError",this.solutions=[],Object.setPrototypeOf(this,e.MaxParameterLengthExceededError.prototype);const i="string"==typeof t?t:this.explanation,r="object"==typeof t?t:n;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=r}};e.InvalidBridgeTokenError=class extends We{constructor(t,n){super(t,n),this.causes=[],this.code=31104,this.description="Invalid bridge token",this.explanation="",this.name="InvalidBridgeTokenError",this.solutions=[],Object.setPrototypeOf(this,e.InvalidBridgeTokenError.prototype);const i="string"==typeof t?t:this.explanation,r="object"==typeof t?t:n;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=r}};e.InvalidClientNameError=class extends We{constructor(t,n){super(t,n),this.causes=["Client name contains invalid characters."],this.code=31105,this.description="Invalid client name",this.explanation="Client name should not contain control, space, delims, or unwise characters.",this.name="InvalidClientNameError",this.solutions=["Make sure that client name does not contain any of the invalid characters."],Object.setPrototypeOf(this,e.InvalidClientNameError.prototype);const i="string"==typeof t?t:this.explanation,r="object"==typeof t?t:n;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=r}};e.ReconnectParameterInvalidError=class extends We{constructor(t,n){super(t,n),this.causes=[],this.code=31107,this.description="The reconnect parameter is invalid",this.explanation="",this.name="ReconnectParameterInvalidError",this.solutions=[],Object.setPrototypeOf(this,e.ReconnectParameterInvalidError.prototype);const i="string"==typeof t?t:this.explanation,r="object"==typeof t?t:n;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=r}}}(Xe||(Xe={})),function(e){e.AuthorizationError=class extends We{constructor(t,n){super(t,n),this.causes=[],this.code=31201,this.description="Authorization error",this.explanation="The request requires user authentication. The server understood the request, but is refusing to fulfill it.",this.name="AuthorizationError",this.solutions=[],Object.setPrototypeOf(this,e.AuthorizationError.prototype);const i="string"==typeof t?t:this.explanation,r="object"==typeof t?t:n;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=r}};e.NoValidAccountError=class extends We{constructor(t,n){super(t,n),this.causes=[],this.code=31203,this.description="No valid account",this.explanation="",this.name="NoValidAccountError",this.solutions=[],Object.setPrototypeOf(this,e.NoValidAccountError.prototype);const i="string"==typeof t?t:this.explanation,r="object"==typeof t?t:n;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=r}};e.InvalidJWTTokenError=class extends We{constructor(t,n){super(t,n),this.causes=[],this.code=31204,this.description="Invalid JWT token",this.explanation="",this.name="InvalidJWTTokenError",this.solutions=[],Object.setPrototypeOf(this,e.InvalidJWTTokenError.prototype);const i="string"==typeof t?t:this.explanation,r="object"==typeof t?t:n;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=r}};e.JWTTokenExpiredError=class extends We{constructor(t,n){super(t,n),this.causes=[],this.code=31205,this.description="JWT token expired",this.explanation="",this.name="JWTTokenExpiredError",this.solutions=[],Object.setPrototypeOf(this,e.JWTTokenExpiredError.prototype);const i="string"==typeof t?t:this.explanation,r="object"==typeof t?t:n;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=r}};e.RateExceededError=class extends We{constructor(t,n){super(t,n),this.causes=["Rate limit exceeded."],this.code=31206,this.description="Rate exceeded authorized limit.",this.explanation="The request performed exceeds the authorized limit.",this.name="RateExceededError",this.solutions=["Ensure message send rate does not exceed authorized limits."],Object.setPrototypeOf(this,e.RateExceededError.prototype);const i="string"==typeof t?t:this.explanation,r="object"==typeof t?t:n;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=r}};e.JWTTokenExpirationTooLongError=class extends We{constructor(t,n){super(t,n),this.causes=[],this.code=31207,this.description="JWT token expiration too long",this.explanation="",this.name="JWTTokenExpirationTooLongError",this.solutions=[],Object.setPrototypeOf(this,e.JWTTokenExpirationTooLongError.prototype);const i="string"==typeof t?t:this.explanation,r="object"==typeof t?t:n;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=r}};e.ReconnectAttemptError=class extends We{constructor(t,n){super(t,n),this.causes=[],this.code=31209,this.description="Reconnect attempt is not authorized.",this.explanation="",this.name="ReconnectAttemptError",this.solutions=[],Object.setPrototypeOf(this,e.ReconnectAttemptError.prototype);const i="string"==typeof t?t:this.explanation,r="object"==typeof t?t:n;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=r}};e.CallMessageEventTypeInvalidError=class extends We{constructor(t,n){super(t,n),this.causes=["The Call Message Event Type is invalid and is not understood by Twilio Voice."],this.code=31210,this.description="Call Message Event Type is invalid.",this.explanation="The Call Message Event Type is invalid and is not understood by Twilio Voice.",this.name="CallMessageEventTypeInvalidError",this.solutions=["Ensure the Call Message Event Type is Valid and understood by Twilio Voice and try again."],Object.setPrototypeOf(this,e.CallMessageEventTypeInvalidError.prototype);const i="string"==typeof t?t:this.explanation,r="object"==typeof t?t:n;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=r}};e.PayloadSizeExceededError=class extends We{constructor(t,n){super(t,n),this.causes=["The payload size of Call Message Event exceeds the authorized limit."],this.code=31212,this.description="Call Message Event Payload size exceeded authorized limit.",this.explanation="The request performed to send a Call Message Event exceeds the payload size authorized limit",this.name="PayloadSizeExceededError",this.solutions=["Reduce payload size of Call Message Event to be within the authorized limit and try again."],Object.setPrototypeOf(this,e.PayloadSizeExceededError.prototype);const i="string"==typeof t?t:this.explanation,r="object"==typeof t?t:n;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=r}}}(Ve||(Ve={})),function(e){e.PermissionDeniedError=class extends We{constructor(t,n){super(t,n),this.causes=["The user denied the getUserMedia request.","The browser denied the getUserMedia request."],this.code=31401,this.description="UserMedia Permission Denied Error",this.explanation="The browser or end-user denied permissions to user media. Therefore we were unable to acquire input audio.",this.name="PermissionDeniedError",this.solutions=["The user should accept the request next time prompted. If the browser saved the deny, the user should change that permission in their browser.","The user should to verify that the browser has permission to access the microphone at this address."],Object.setPrototypeOf(this,e.PermissionDeniedError.prototype);const i="string"==typeof t?t:this.explanation,r="object"==typeof t?t:n;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=r}};e.AcquisitionFailedError=class extends We{constructor(t,n){super(t,n),this.causes=["NotFoundError - The deviceID specified was not found.","The getUserMedia constraints were overconstrained and no devices matched."],this.code=31402,this.description="UserMedia Acquisition Failed Error",this.explanation="The browser and end-user allowed permissions, however getting the media failed. Usually this is due to bad constraints, but can sometimes fail due to browser, OS or hardware issues.",this.name="AcquisitionFailedError",this.solutions=["Ensure the deviceID being specified exists.","Try acquiring media with fewer constraints."],Object.setPrototypeOf(this,e.AcquisitionFailedError.prototype);const i="string"==typeof t?t:this.explanation,r="object"==typeof t?t:n;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=r}}}(Ye||(Ye={})),function(e){e.ConnectionError=class extends We{constructor(t,n){super(t,n),this.causes=[],this.code=53e3,this.description="Signaling connection error",this.explanation="Raised whenever a signaling connection error occurs that is not covered by a more specific error code.",this.name="ConnectionError",this.solutions=[],Object.setPrototypeOf(this,e.ConnectionError.prototype);const i="string"==typeof t?t:this.explanation,r="object"==typeof t?t:n;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=r}};e.ConnectionDisconnected=class extends We{constructor(t,n){super(t,n),this.causes=["The device running your application lost its Internet connection."],this.code=53001,this.description="Signaling connection disconnected",this.explanation="Raised whenever the signaling connection is unexpectedly disconnected.",this.name="ConnectionDisconnected",this.solutions=["Ensure the device running your application has access to a stable Internet connection."],Object.setPrototypeOf(this,e.ConnectionDisconnected.prototype);const i="string"==typeof t?t:this.explanation,r="object"==typeof t?t:n;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=r}}}(Ze||(Ze={})),function(e){e.ClientLocalDescFailed=class extends We{constructor(t,n){super(t,n),this.causes=["The Client may not be using a supported WebRTC implementation.","The Client may not have the necessary resources to create or apply a new media description."],this.code=53400,this.description="Client is unable to create or apply a local media description",this.explanation="Raised whenever a Client is unable to create or apply a local media description.",this.name="ClientLocalDescFailed",this.solutions=["If you are experiencing this error using the JavaScript SDK, ensure you are running it with a supported WebRTC implementation."],Object.setPrototypeOf(this,e.ClientLocalDescFailed.prototype);const i="string"==typeof t?t:this.explanation,r="object"==typeof t?t:n;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=r}};e.ClientRemoteDescFailed=class extends We{constructor(t,n){super(t,n),this.causes=["The Client may not be using a supported WebRTC implementation.","The Client may be connecting peer-to-peer with another Participant that is not using a supported WebRTC implementation.","The Client may not have the necessary resources to apply a new media description."],this.code=53402,this.description="Client is unable to apply a remote media description",this.explanation="Raised whenever the Client receives a remote media description but is unable to apply it.",this.name="ClientRemoteDescFailed",this.solutions=["If you are experiencing this error using the JavaScript SDK, ensure you are running it with a supported WebRTC implementation."],Object.setPrototypeOf(this,e.ClientRemoteDescFailed.prototype);const i="string"==typeof t?t:this.explanation,r="object"==typeof t?t:n;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=r}};e.ConnectionError=class extends We{constructor(t,n){super(t,n),this.causes=["The Client was unable to establish a media connection.","A media connection which was active failed liveliness checks."],this.code=53405,this.description="Media connection failed",this.explanation="Raised by the Client or Server whenever a media connection fails.",this.name="ConnectionError",this.solutions=["If the problem persists, try connecting to another region.","Check your Client's network connectivity.","If you've provided custom ICE Servers then ensure that the URLs and credentials are valid."],Object.setPrototypeOf(this,e.ConnectionError.prototype);const i="string"==typeof t?t:this.explanation,r="object"==typeof t?t:n;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=r}}}(et||(et={}));const tt=new Map([[20101,Ve.AccessTokenInvalid],[20104,Ve.AccessTokenExpired],[20151,Ve.AuthenticationFailed],[31202,Be.AccessTokenSignatureValidationFailed],[31400,Ge.BadRequest],[31404,Ge.NotFound],[31480,Ge.TemporarilyUnavailable],[31486,Ge.BusyHere],[31603,Qe.Decline],[31e3,Ke.UnknownError],[31001,Ke.ApplicationNotFoundError],[31002,Ke.ConnectionDeclinedError],[31003,Ke.ConnectionTimeoutError],[31005,Ke.ConnectionError],[31008,Ke.CallCancelledError],[31009,Ke.TransportError],[31100,Xe.MalformedRequestError],[31101,Xe.MissingParameterArrayError],[31102,Xe.AuthorizationTokenMissingError],[31103,Xe.MaxParameterLengthExceededError],[31104,Xe.InvalidBridgeTokenError],[31105,Xe.InvalidClientNameError],[31107,Xe.ReconnectParameterInvalidError],[31201,Ve.AuthorizationError],[31203,Ve.NoValidAccountError],[31204,Ve.InvalidJWTTokenError],[31205,Ve.JWTTokenExpiredError],[31206,Ve.RateExceededError],[31207,Ve.JWTTokenExpirationTooLongError],[31209,Ve.ReconnectAttemptError],[31210,Ve.CallMessageEventTypeInvalidError],[31212,Ve.PayloadSizeExceededError],[31401,Ye.PermissionDeniedError],[31402,Ye.AcquisitionFailedError],[53e3,Ze.ConnectionError],[53001,Ze.ConnectionDisconnected],[53400,et.ClientLocalDescFailed],[53402,et.ClientRemoteDescFailed],[53405,et.ConnectionError]]);Object.freeze(tt);const nt=new Set([31001,31002,31003,31101,31102,31103,31104,31105,31107,31201,31202,31203,31204,31205,31207,31404,31480,31486,31603]);function it(e,t){if("number"!=typeof t)return;if(n=t,!tt.has(n))return;var n;return!e&&nt.has(t)?void 0:function(e){const t=tt.get(e);if(!t)throw new rt(`Error code ${e} not found`);return t}(t)}class rt extends Error{constructor(e){super(e),this.name="InvalidArgumentError"}}class st extends Error{constructor(e){super(e),this.name="InvalidStateError"}}class at extends Error{constructor(e){super(e),this.name="NotSupportedError"}}const ot="@twilio/voice-sdk",lt="2.16.0",ct="https://sdk.twilio.com/js/client/sounds/releases/1.0.0",ut=`${ct}/cowbell.mp3?cache=${lt}`;class dt{static getLogLevelInstance(e){if(!dt.loglevelInstance)try{dt.loglevelInstance=(e&&e.LogLevelModule?e.LogLevelModule:He).getLogger(ot)}catch(t){dt.loglevelInstance=console}return dt.loglevelInstance}constructor(e,t){this._log=dt.getLogLevelInstance(t),this._prefix=`[TwilioVoice][${e}]`}debug(...e){this._log.debug(this._prefix,...e)}error(...e){this._log.error(this._prefix,...e)}info(...e){this._log.info(this._prefix,...e)}setDefaultLevel(e){this._log.setDefaultLevel&&this._log.setDefaultLevel(e)}warn(...e){this._log.warn(this._prefix,...e)}}dt.levels=Ue.levels,dt.getLogLevelInstance();const ht=`${ct}/outgoing.mp3`;class pt{constructor(e,t,n,i){this._name=e,this._availableDevices=t,this._beforeChange=n,this._isSupported=i,this._activeDevices=new Set,this._log=new dt("OutputDeviceCollection")}delete(e){this._log.debug(".delete",e);const t=!!this._activeDevices.delete(e),n=this._availableDevices.get("default")||Array.from(this._availableDevices.values())[0];!this._activeDevices.size&&n&&this._activeDevices.add(n);const i=Array.from(this._activeDevices.values()).map(e=>e.deviceId);return this._beforeChange(this._name,i),!!t}get(){return this._activeDevices}set(e){if(this._log.debug(".set",e),!this._isSupported)return Promise.reject(new at("This browser does not support audio output selection"));const t=Array.isArray(e)?e:[e];if(!t.length)return Promise.reject(new rt("Must specify at least one device to set"));const n=[],i=t.map(e=>{const t=this._availableDevices.get(e);return t||n.push(e),t});return n.length?Promise.reject(new rt(`Devices not found: ${n.join(", ")}`)):new Promise(e=>{e(this._beforeChange(this._name,t))}).then(()=>{this._activeDevices.clear(),i.forEach(this._activeDevices.add,this._activeDevices)})}test(e=ht){return this._isSupported?this._activeDevices.size?Promise.all(Array.from(this._activeDevices).map(t=>{let n;return new Promise(t=>{n=new Audio(e),n.oncanplay=t}).then(()=>n.setSinkId(t.deviceId).then(()=>n.play()))})):Promise.reject(new st("No active output devices to test")):Promise.reject(new at("This browser does not support audio output selection"))}}class ft{constructor(e){Object.defineProperties(this,{deviceId:{get:()=>e.deviceId},groupId:{get:()=>e.groupId},kind:{get:()=>e.kind},label:{get:()=>e.label}})}}function mt(e){if(!(this instanceof mt))return new mt(e);this.message=e}function gt(e){return e&&e.length?e.reduce((e,t)=>e+t)/e.length:0}function vt(e,t,n){n=n||(e=>e);const i=new Set(t.map(n));return e.filter(e=>!i.has(n(e)))}function yt(e){return!!e.userAgent.match("Electron")}function bt(e,t){const n=!!t.userAgent.match("CriOS"),i=!!t.userAgent.match("HeadlessChrome"),r=void 0!==e.chrome&&"Google Inc."===t.vendor&&-1===t.userAgent.indexOf("OPR")&&-1===t.userAgent.indexOf("Edge");return n||yt(t)||r||i}function _t(e){return!!(e=e||("undefined"==typeof window?global.navigator:window.navigator))&&"string"==typeof e.userAgent&&/edge\/\d+/i.test(e.userAgent)}function xt(e){return e?e.split("&").reduce((e,t)=>{const n=t.split("="),i=n[0],r=decodeURIComponent((n[1]||"").replace(/\+/g,"%20"));return i&&(e[i]=r),e},{}):""}function wt(e,t){const n=e instanceof Map||e instanceof Set?Array.from(e.values()):e;return t=t||(e=>e),n.reduce((e,n)=>{const i=t(n);return e.concat(i)},[])}function kt(e,t,n){return new Promise((i,r)=>{function s(){e.removeListener(n,a),i()}function a(){e.removeListener(t,s),r()}e.once(t,s),e.once(n,a)})}function St(e,t){const n=t.map(e=>"audio/"+e.toLowerCase());return e.sort((e,t)=>{const i=n.indexOf(e.mimeType.toLowerCase()),r=n.indexOf(t.mimeType.toLowerCase());return(i>=0?i:Number.MAX_VALUE)-(r>=0?r:Number.MAX_VALUE)})}mt.prototype.toString=function(){return`Twilio.Exception: ${this.message}`};const Ct=mt,Et=Object.freeze(Object.defineProperty({__proto__:null,Exception:Ct,average:gt,difference:vt,flatMap:wt,isChrome:bt,isElectron:yt,isFirefox:function(e){return!!(e=e||("undefined"==typeof window?global.navigator:window.navigator))&&"string"==typeof e.userAgent&&/firefox|fxios/i.test(e.userAgent)},isLegacyEdge:_t,isSafari:function(e){return!!e.vendor&&-1!==e.vendor.indexOf("Apple")&&e.userAgent&&-1===e.userAgent.indexOf("CriOS")&&-1===e.userAgent.indexOf("FxiOS")},promisifyEvents:kt,queryToJson:xt,sortByMimeTypes:St},Symbol.toStringTag,{value:"Module"})),Nt={audioinput:"Audio Input",audiooutput:"Audio Output"};class Tt extends Ae.EventEmitter{get audioConstraints(){return this._audioConstraints}get inputDevice(){return this._inputDevice}get inputStream(){return this._processedStream||this._selectedInputDeviceStream}get processedStream(){return this._processedStream}constructor(e,t,n){super(),this.availableInputDevices=new Map,this.availableOutputDevices=new Map,this._audioConstraints=null,this._defaultInputDeviceStream=null,this._enabledSounds={[Wn.SoundName.Disconnect]:!0,[Wn.SoundName.Incoming]:!0,[Wn.SoundName.Outgoing]:!0},this._inputDevice=null,this._inputDevicePromise=null,this._isPollingInputVolume=!1,this._log=new dt("AudioHelper"),this._processedStream=null,this._selectedInputDeviceStream=null,this._unknownDeviceIndexes={audioinput:{},audiooutput:{}},this._updateAvailableDevices=()=>this._mediaDevices&&this._enumerateDevices?this._enumerateDevices().then(e=>{this._updateDevices(e.filter(e=>"audiooutput"===e.kind),this.availableOutputDevices,this._removeLostOutput),this._updateDevices(e.filter(e=>"audioinput"===e.kind),this.availableInputDevices,this._removeLostInput);const t=this.availableOutputDevices.get("default")||Array.from(this.availableOutputDevices.values())[0];[this.speakerDevices,this.ringtoneDevices].forEach(e=>{!e.get().size&&this.availableOutputDevices.size&&this.isOutputSelectionSupported&&e.set(t.deviceId).catch(e=>{this._log.warn(`Unable to set audio output devices. ${e}`)})})}):Promise.reject("Enumeration not supported"),this._removeLostInput=e=>{if(!this.inputDevice||this.inputDevice.deviceId!==e.deviceId)return!1;this._destroyProcessedStream(),this._replaceStream(null),this._inputDevice=null,this._maybeStopPollingVolume();const t=this.availableInputDevices.get("default")||Array.from(this.availableInputDevices.values())[0];return t&&this.setInputDevice(t.deviceId),!0},this._removeLostOutput=e=>{const t=this.speakerDevices.delete(e),n=this.ringtoneDevices.delete(e);return t||n},n=Object.assign({AudioContext:"undefined"!=typeof AudioContext&&AudioContext,setSinkId:"undefined"!=typeof HTMLAudioElement&&HTMLAudioElement.prototype.setSinkId},n),this._beforeSetInputDevice=n.beforeSetInputDevice||(()=>Promise.resolve()),this._updateUserOptions(n),this._audioProcessorEventObserver=n.audioProcessorEventObserver,this._mediaDevices=n.mediaDevices||navigator.mediaDevices,this._onActiveInputChanged=t,this._enumerateDevices="function"==typeof n.enumerateDevices?n.enumerateDevices:this._mediaDevices&&this._mediaDevices.enumerateDevices.bind(this._mediaDevices);const i=!(!n.AudioContext&&!n.audioContext),r=!!this._enumerateDevices;n.enabledSounds&&(this._enabledSounds=n.enabledSounds);const s="function"==typeof n.setSinkId;this.isOutputSelectionSupported=r&&s,this.isVolumeSupported=i,this.isVolumeSupported&&(this._audioContext=n.audioContext||n.AudioContext&&new n.AudioContext,this._audioContext&&(this._inputVolumeAnalyser=this._audioContext.createAnalyser(),this._inputVolumeAnalyser.fftSize=32,this._inputVolumeAnalyser.smoothingTimeConstant=.3)),this.ringtoneDevices=new pt("ringtone",this.availableOutputDevices,e,this.isOutputSelectionSupported),this.speakerDevices=new pt("speaker",this.availableOutputDevices,e,this.isOutputSelectionSupported),this.addListener("newListener",e=>{"inputVolume"===e&&this._maybeStartPollingVolume()}),this.addListener("removeListener",e=>{"inputVolume"===e&&this._maybeStopPollingVolume()}),this.once("newListener",()=>{this.isOutputSelectionSupported||this._log.warn("Warning: This browser does not support audio output selection."),this.isVolumeSupported||this._log.warn("Warning: This browser does not support Twilio's volume indicator feature.")}),r&&this._initializeEnumeration(),navigator&&navigator.permissions&&"function"==typeof navigator.permissions.query?navigator.permissions.query({name:"microphone"}).then(e=>{if("granted"!==e.state){const t=()=>{this._updateAvailableDevices(),this._stopMicrophonePermissionListener()};e.addEventListener("change",t),this._microphonePermissionStatus=e,this._onMicrophonePermissionStatusChanged=t}}).catch(e=>this._log.warn(`Warning: unable to listen for microphone permission changes. ${e}`)):this._log.warn("Warning: current browser does not support permissions API.")}_destroy(){this._stopDefaultInputDeviceStream(),this._stopSelectedInputDeviceStream(),this._destroyProcessedStream(),this._maybeStopPollingVolume(),this.removeAllListeners(),this._stopMicrophonePermissionListener(),this._unbind()}_getInputDevicePromise(){return this._inputDevicePromise}_maybeStartPollingVolume(){if(!this.isVolumeSupported||!this.inputStream)return;if(this._updateVolumeSource(),this._isPollingInputVolume||!this._inputVolumeAnalyser)return;const e=this._inputVolumeAnalyser.frequencyBinCount,t=new Uint8Array(e);this._isPollingInputVolume=!0;const n=()=>{if(this._isPollingInputVolume){if(this._inputVolumeAnalyser){this._inputVolumeAnalyser.getByteFrequencyData(t);const e=gt(t);this.emit("inputVolume",e/255)}requestAnimationFrame(n)}};requestAnimationFrame(n)}_maybeStopPollingVolume(){this.isVolumeSupported&&(!this._isPollingInputVolume||this.inputStream&&this.listenerCount("inputVolume")||(this._inputVolumeSource&&(this._inputVolumeSource.disconnect(),delete this._inputVolumeSource),this._isPollingInputVolume=!1))}_openDefaultDeviceWithConstraints(e){return this._log.info("Opening default device with constraints",e),this._getUserMedia(e).then(e=>(this._log.info("Opened default device. Updating available devices."),this._updateAvailableDevices().catch(e=>{this._log.warn("Unable to updateAvailableDevices after gUM call",e)}),this._defaultInputDeviceStream=e,this._maybeCreateProcessedStream(e)))}_stopDefaultInputDeviceStream(){this._defaultInputDeviceStream&&(this._log.info("stopping default device stream"),this._defaultInputDeviceStream.getTracks().forEach(e=>e.stop()),this._defaultInputDeviceStream=null,this._destroyProcessedStream())}_unbind(){var e;(null===(e=this._mediaDevices)||void 0===e?void 0:e.removeEventListener)&&this._mediaDevices.removeEventListener("devicechange",this._updateAvailableDevices)}_updateUserOptions(e){"function"==typeof e.enumerateDevices&&(this._enumerateDevices=e.enumerateDevices),"function"==typeof e.getUserMedia&&(this._getUserMedia=e.getUserMedia)}addProcessor(e){if(this._log.debug(".addProcessor"),this._processor)throw new at("Adding multiple AudioProcessors is not supported at this time.");if("object"!=typeof e||null===e)throw new rt("Missing AudioProcessor argument.");if("function"!=typeof e.createProcessedStream)throw new rt("Missing createProcessedStream() method.");if("function"!=typeof e.destroyProcessedStream)throw new rt("Missing destroyProcessedStream() method.");return this._processor=e,this._audioProcessorEventObserver.emit("add"),this._restartStreams()}disconnect(e){return this._log.debug(".disconnect",e),this._maybeEnableSound(Wn.SoundName.Disconnect,e)}incoming(e){return this._log.debug(".incoming",e),this._maybeEnableSound(Wn.SoundName.Incoming,e)}outgoing(e){return this._log.debug(".outgoing",e),this._maybeEnableSound(Wn.SoundName.Outgoing,e)}removeProcessor(e){if(this._log.debug(".removeProcessor"),"object"!=typeof e||null===e)throw new rt("Missing AudioProcessor argument.");if(this._processor!==e)throw new rt("Cannot remove an AudioProcessor that has not been previously added.");return this._destroyProcessedStream(),this._processor=null,this._audioProcessorEventObserver.emit("remove"),this._restartStreams()}setAudioConstraints(e){return this._log.debug(".setAudioConstraints",e),this._audioConstraints=Object.assign({},e),delete this._audioConstraints.deviceId,this.inputDevice?this._setInputDevice(this.inputDevice.deviceId,!0):Promise.resolve()}setInputDevice(e){return this._log.debug(".setInputDevice",e),this._setInputDevice(e,!1)}unsetAudioConstraints(){return this._log.debug(".unsetAudioConstraints"),this._audioConstraints=null,this.inputDevice?this._setInputDevice(this.inputDevice.deviceId,!0):Promise.resolve()}unsetInputDevice(){return this._log.debug(".unsetInputDevice",this.inputDevice),this.inputDevice?(this._destroyProcessedStream(),this._onActiveInputChanged(null).then(()=>{this._replaceStream(null),this._inputDevice=null,this._maybeStopPollingVolume()})):Promise.resolve()}_destroyProcessedStream(){if(this._processor&&this._processedStream){this._log.info("destroying processed stream");const e=this._processedStream;this._processedStream.getTracks().forEach(e=>e.stop()),this._processedStream=null,this._processor.destroyProcessedStream(e),this._audioProcessorEventObserver.emit("destroy")}}_getUnknownDeviceIndex(e){const t=e.deviceId,n=e.kind;let i=this._unknownDeviceIndexes[n][t];return i||(i=Object.keys(this._unknownDeviceIndexes[n]).length+1,this._unknownDeviceIndexes[n][t]=i),i}_initializeEnumeration(){if(!this._mediaDevices||!this._enumerateDevices)throw new at("Enumeration is not supported");this._mediaDevices.addEventListener&&this._mediaDevices.addEventListener("devicechange",this._updateAvailableDevices),this._updateAvailableDevices().then(()=>{this.isOutputSelectionSupported&&Promise.all([this.speakerDevices.set("default"),this.ringtoneDevices.set("default")]).catch(e=>{this._log.warn(`Warning: Unable to set audio output devices. ${e}`)})})}_maybeCreateProcessedStream(e){return this._processor?(this._log.info("Creating processed stream"),this._processor.createProcessedStream(e).then(e=>(this._processedStream=e,this._audioProcessorEventObserver.emit("create"),this._processedStream))):Promise.resolve(e)}_maybeEnableSound(e,t){return void 0!==t&&(this._enabledSounds[e]=t),this._enabledSounds[e]}_replaceStream(e){this._log.info("Replacing with new stream."),this._selectedInputDeviceStream&&(this._log.info("Old stream detected. Stopping tracks."),this._stopSelectedInputDeviceStream()),this._selectedInputDeviceStream=e}_restartStreams(){if(this.inputDevice&&this._selectedInputDeviceStream)return this._log.info("Restarting selected input device"),this._setInputDevice(this.inputDevice.deviceId,!0);if(this._defaultInputDeviceStream){const e=this.availableInputDevices.get("default")||Array.from(this.availableInputDevices.values())[0];return this._log.info("Restarting default input device, now becoming selected."),this._setInputDevice(e.deviceId,!0)}return Promise.resolve()}_setInputDevice(e,t){return Re(this,void 0,void 0,function*(){return this._inputDevicePromise=(()=>Re(this,void 0,void 0,function*(){if(yield this._beforeSetInputDevice(),"string"!=typeof e)return Promise.reject(new rt("Must specify the device to set"));const n=this.availableInputDevices.get(e);if(!n)return Promise.reject(new rt(`Device not found: ${e}`));if(this._log.info("Setting input device. ID: "+e),this._inputDevice&&this._inputDevice.deviceId===e&&this._selectedInputDeviceStream){if(!t)return Promise.resolve();this._log.info("Same track detected on setInputDevice, stopping old tracks."),this._stopSelectedInputDeviceStream()}this._stopDefaultInputDeviceStream();const i={audio:Object.assign({deviceId:{exact:e}},this.audioConstraints)};return this._log.info("setInputDevice: getting new tracks."),this._getUserMedia(i).then(e=>(this._destroyProcessedStream(),this._maybeCreateProcessedStream(e).then(t=>(this._log.info("setInputDevice: invoking _onActiveInputChanged."),this._onActiveInputChanged(t).then(()=>{this._replaceStream(e),this._inputDevice=n,this._maybeStartPollingVolume()})))))}))().finally(()=>{this._inputDevicePromise=null})})}_stopMicrophonePermissionListener(){var e;(null===(e=this._microphonePermissionStatus)||void 0===e?void 0:e.removeEventListener)&&this._microphonePermissionStatus.removeEventListener("change",this._onMicrophonePermissionStatusChanged)}_stopSelectedInputDeviceStream(){this._selectedInputDeviceStream&&(this._log.info("Stopping selected device stream"),this._selectedInputDeviceStream.getTracks().forEach(e=>e.stop()))}_updateDevices(e,t,n){const i=e.map(e=>e.deviceId),r=Array.from(t.values()).map(e=>e.deviceId),s=[],a=vt(r,i);a.forEach(e=>{const i=t.get(e);i&&(t.delete(e),n(i)&&s.push(i))});let o=!1;if(e.forEach(e=>{const n=t.get(e.deviceId),i=this._wrapMediaDeviceInfo(e);n&&n.label===i.label||(t.set(e.deviceId,i),o=!0)}),o||a.length){const e="default",t=this.inputDevice&&this.inputDevice.deviceId===e,n=this._defaultInputDeviceStream&&this.availableInputDevices.get(e);(t||n)&&(this._log.warn("Calling getUserMedia after device change to ensure that the           tracks of the active device (default) have not gone stale."),setTimeout(()=>{this._setInputDevice(e,!0)},0)),this._log.debug("#deviceChange",s),this.emit("deviceChange",s)}}_updateVolumeSource(){if(this.inputStream&&this._audioContext&&this._inputVolumeAnalyser){this._inputVolumeSource&&this._inputVolumeSource.disconnect();try{this._inputVolumeSource=this._audioContext.createMediaStreamSource(this.inputStream),this._inputVolumeSource.connect(this._inputVolumeAnalyser)}catch(e){this._log.warn("Unable to update volume source",e),delete this._inputVolumeSource}}}_wrapMediaDeviceInfo(e){const t={deviceId:e.deviceId,groupId:e.groupId,kind:e.kind,label:e.label};if(!t.label)if("default"===t.deviceId)t.label="Default";else{const n=this._getUnknownDeviceIndex(e);t.label=`Unknown ${Nt[t.kind]} Device ${n}`}return new ft(t)}}Tt||(Tt={});var jt=Tt;class Pt extends Ae.EventEmitter{constructor(){super(),this._log=new dt("AudioProcessorEventObserver"),this._log.info("Creating AudioProcessorEventObserver instance"),this.on("enabled",()=>this._reEmitEvent("enabled")),this.on("add",()=>this._reEmitEvent("add")),this.on("remove",()=>this._reEmitEvent("remove")),this.on("create",()=>this._reEmitEvent("create-processed-stream")),this.on("destroy",()=>this._reEmitEvent("destroy-processed-stream"))}destroy(){this.removeAllListeners()}_reEmitEvent(e){this._log.info(`AudioProcessor:${e}`),this.emit("event",{name:e,group:"audio-processor"})}}const It={dtmf0:[1360,960],dtmf1:[1230,720],dtmf2:[1360,720],dtmf3:[1480,720],dtmf4:[1230,790],dtmf5:[1360,790],dtmf6:[1480,790],dtmf7:[1230,870],dtmf8:[1360,870],dtmf9:[1480,870],dtmfh:[1480,960],dtmfs:[1230,960]};class Dt{constructor(e){this._context=e,this._gainNodes=[],this._gainNodes=[this._context.createGain(),this._context.createGain()],this._gainNodes.forEach(e=>{e.connect(this._context.destination),e.gain.value=.1,this._gainNodes.push(e)})}cleanup(){this._gainNodes.forEach(e=>{e.disconnect()})}play(e){const t=It[e];if(!t)throw new rt("Invalid DTMF sound name");[this._context.createOscillator(),this._context.createOscillator()].forEach((e,n)=>{e.type="sine",e.frequency.value=t[n],e.connect(this._gainNodes[n]),e.start(),e.stop(this._context.currentTime+.1),e.addEventListener("ended",()=>e.disconnect())})}}const At=function(e,t,n){const i=JSON.stringify(t.body||{}),r=new Headers;t.headers=t.headers||[],Object.entries(t.headers).forEach(([e,t])=>r.append(e,t)),fetch(t.url,{body:i,headers:r,method:e}).then(e=>e.text(),n).then(e=>n(null,e),n)};At.get=function(e,t){return new this("GET",e,t)},At.post=function(e,t){return new this("POST",e,t)};class Lt extends Ae.EventEmitter{constructor(e,t,n){if(super(),!(this instanceof Lt))return new Lt(e,t,n);let i=(n=Object.assign({defaultPayload:()=>({})},n)).defaultPayload;"function"!=typeof i&&(i=()=>Object.assign({},n.defaultPayload));let r=!0;const s=Object.assign({app_name:void 0,app_version:void 0},n.metadata);Object.defineProperties(this,{_defaultPayload:{value:i},_host:{value:n.host,writable:!0},_isEnabled:{get:()=>r,set(e){r=e}},_log:{value:new dt("EventPublisher")},_request:{value:n.request||At,writable:!0},_token:{value:t,writable:!0},isEnabled:{enumerable:!0,get:()=>r},metadata:{enumerable:!0,get:()=>s},productName:{enumerable:!0,value:e},token:{enumerable:!0,get(){return this._token}}})}}function Rt(e){return{audio_codec:e.codecName,audio_level_in:e.audioInputLevel,audio_level_out:e.audioOutputLevel,bytes_received:e.bytesReceived,bytes_sent:e.bytesSent,call_volume_input:e.inputVolume,call_volume_output:e.outputVolume,jitter:e.jitter,mos:e.mos&&Math.round(100*e.mos)/100,packets_lost:e.packetsLost,packets_lost_fraction:e.packetsLostFraction&&Math.round(100*e.packetsLostFraction)/100,packets_received:e.packetsReceived,rtt:e.rtt,timestamp:new Date(e.timestamp).toISOString(),total_bytes_received:e.totals.bytesReceived,total_bytes_sent:e.totals.bytesSent,total_packets_lost:e.totals.packetsLost,total_packets_received:e.totals.packetsReceived,total_packets_sent:e.totals.packetsSent}}Lt.prototype._post=function(e,t,n,i,r,s,a){if(!this.isEnabled&&!a||!this._host)return this._log.debug("Publishing cancelled",JSON.stringify({isEnabled:this.isEnabled,force:a,host:this._host})),Promise.resolve();if(!(s&&(s.parameters&&s.parameters.CallSid||s.outboundConnectionId)))return s?this._log.debug("Publishing cancelled. Missing connection info",JSON.stringify({outboundConnectionId:s.outboundConnectionId,parameters:s.parameters})):this._log.debug("Publishing cancelled. Missing connection object"),Promise.resolve();const o={group:n,level:t.toUpperCase(),name:i,payload:r&&r.forEach?r.slice(0):Object.assign(this._defaultPayload(s),r),payload_type:"application/json",private:!1,publisher:this.productName,timestamp:(new Date).toISOString()};this.metadata&&(o.publisher_metadata=this.metadata),"EndpointEvents"===e&&this._log.debug("Publishing insights",JSON.stringify({endpointName:e,event:o,force:a,host:this._host}));const l={body:o,headers:{"Content-Type":"application/json","X-Twilio-Token":this.token},url:`https://${this._host}/v4/${e}`};return new Promise((e,t)=>{this._request.post(l,n=>{n?(this.emit("error",n),t(n)):e()})}).catch(e=>{this._log.error(`Unable to post ${n} ${i} event to Insights. Received error: ${e}`)})},Lt.prototype.post=function(e,t,n,i,r,s){return this._post("EndpointEvents",e,t,n,i,r,s)},Lt.prototype.debug=function(e,t,n,i){return this.post("debug",e,t,n,i)},Lt.prototype.info=function(e,t,n,i){return this.post("info",e,t,n,i)},Lt.prototype.warn=function(e,t,n,i){return this.post("warning",e,t,n,i)},Lt.prototype.error=function(e,t,n,i){return this.post("error",e,t,n,i)},Lt.prototype.postMetrics=function(e,t,n,i,r){return new Promise(s=>{const a=n.map(Rt).map(e=>Object.assign(e,i));s(this._post("EndpointMetrics","info",e,t,a,r))})},Lt.prototype.setHost=function(e){this._host=e},Lt.prototype.setToken=function(e){this._token=e},Lt.prototype.enable=function(){this._isEnabled=!0},Lt.prototype.disable=function(){this._isEnabled=!1};const Ot=32767,Mt="undefined"!=typeof window?window.RTCStatsReport:void 0;function zt(e){if(!(this instanceof zt))return new zt(e);const t=this;Object.defineProperties(this,{_map:{value:e},size:{enumerable:!0,get:()=>t._map.size}}),this[Symbol.iterator]=e[Symbol.iterator]}function Ft(e){return{bytesReceived:void 0,bytesSent:void 0,dtlsState:void 0,id:e.id,localCertificateId:e.stat("localCertificateId"),remoteCertificateId:e.stat("remoteCertificateId"),rtcpTransportStatsId:void 0,selectedCandidatePairId:e.stat("selectedCandidatePairId"),timestamp:Date.parse(e.timestamp),type:"transport"}}function $t(e,t){return{associateStatsId:void 0,codecId:`codec-${e.id}`,firCount:t?Vt(e,"googFirsSent"):void 0,id:e.id,isRemote:void 0,mediaType:e.stat("mediaType"),nackCount:Vt(e,t?"googNacksSent":"googNacksReceived"),pliCount:Vt(e,t?"googPlisSent":"googPlisReceived"),qpSum:Vt(e,"qpSum"),sliCount:void 0,ssrc:e.stat("ssrc"),timestamp:Date.parse(e.timestamp),trackId:`track-${e.id}`,transportId:e.stat("transportId")}}function Ut(e,t){return{candidateType:Wt(e.stat("candidateType")),deleted:void 0,id:e.id,ip:e.stat("ipAddress"),isRemote:t,port:Vt(e,"portNumber"),priority:Bt(e,"priority"),protocol:e.stat("transport"),relayProtocol:void 0,timestamp:Date.parse(e.timestamp),transportId:void 0,type:t?"remote-candidate":"local-candidate",url:void 0}}function Ht(e){return isNaN(e)||""===e?void 0:parseInt(e,10)/1e3}function Wt(e){switch(e){case"peerreflexive":return"prflx";case"serverreflexive":return"srflx";default:return e}}function Vt(e,t){const n=e.stat(t);return Gt(e,t)?parseInt(n,10):void 0}function Bt(e,t){const n=e.stat(t);return Gt(e,t)?parseFloat(n):void 0}function qt(e,t){const n=e.stat(t);return Gt(e,t)?"true"===n||!0===n:void 0}function Gt(e,t){const n=e.stat(t);return void 0!==n&&""!==n}Mt&&(zt.prototype=Object.create(Mt.prototype),zt.prototype.constructor=zt),["entries","forEach","get","has","keys","values"].forEach(e=>{zt.prototype[e]=function(...t){return this._map[e](...t)}}),zt.fromArray=function(e){return new zt(e.reduce((e,t)=>(e.set(t.id,t),e),new Map))},zt.fromRTCStatsResponse=function(e){let t;const n=new Map,i=e.result().reduce((e,i)=>{const r=i.id;switch(i.type){case"googCertificate":e.set(r,function(e){return{base64Certificate:e.stat("googDerBase64"),fingerprint:e.stat("googFingerprint"),fingerprintAlgorithm:e.stat("googFingerprintAlgorithm"),id:e.id,issuerCertificateId:e.stat("googIssuerId"),timestamp:Date.parse(e.timestamp),type:"certificate"}}(i));break;case"datachannel":e.set(r,function(e){return{bytesReceived:void 0,bytesSent:void 0,datachannelid:e.stat("datachannelid"),id:e.id,label:e.stat("label"),messagesReceived:void 0,messagesSent:void 0,protocol:e.stat("protocol"),state:e.stat("state"),timestamp:Date.parse(e.timestamp),transportId:e.stat("transportId"),type:"data-channel"}}(i));break;case"googCandidatePair":qt(i,"googActiveConnection")&&(t=r),e.set(r,function(e){return{availableIncomingBitrate:void 0,availableOutgoingBitrate:void 0,bytesReceived:Vt(e,"bytesReceived"),bytesSent:Vt(e,"bytesSent"),consentRequestsSent:Vt(e,"consentRequestsSent"),currentRoundTripTime:Ht(e.stat("googRtt")),id:e.id,lastPacketReceivedTimestamp:void 0,lastPacketSentTimestamp:void 0,localCandidateId:e.stat("localCandidateId"),nominated:void 0,priority:void 0,readable:void 0,remoteCandidateId:e.stat("remoteCandidateId"),requestsReceived:Vt(e,"requestsReceived"),requestsSent:Vt(e,"requestsSent"),responsesReceived:Vt(e,"responsesReceived"),responsesSent:Vt(e,"responsesSent"),retransmissionsReceived:void 0,retransmissionsSent:void 0,state:void 0,timestamp:Date.parse(e.timestamp),totalRoundTripTime:void 0,transportId:e.stat("googChannelId"),type:"candidate-pair",writable:qt(e,"googWritable")}}(i));break;case"localcandidate":e.set(r,Ut(i,!1));break;case"remotecandidate":e.set(r,Ut(i,!0));break;case"ssrc":Gt(i,"packetsReceived")?e.set(`rtp-${r}`,function(e){const t=$t(e,!0);return Object.assign(t,{burstDiscardCount:void 0,burstDiscardRate:void 0,burstLossCount:void 0,burstLossRate:void 0,burstPacketsDiscarded:void 0,burstPacketsLost:void 0,bytesReceived:Vt(e,"bytesReceived"),fractionLost:void 0,framesDecoded:Vt(e,"framesDecoded"),gapDiscardRate:void 0,gapLossRate:void 0,jitter:Ht(e.stat("googJitterReceived")),packetsDiscarded:void 0,packetsLost:Vt(e,"packetsLost"),packetsReceived:Vt(e,"packetsReceived"),packetsRepaired:void 0,roundTripTime:Ht(e.stat("googRtt")),type:"inbound-rtp"}),t}(i)):e.set(`rtp-${r}`,function(e){const t=$t(e,!1);return Object.assign(t,{bytesSent:Vt(e,"bytesSent"),framesEncoded:Vt(e,"framesEncoded"),packetsSent:Vt(e,"packetsSent"),remoteTimestamp:void 0,targetBitrate:void 0,type:"outbound-rtp"}),t}(i)),e.set(`track-${r}`,function(e){return{audioLevel:Gt(e,"audioOutputLevel")?Vt(e,"audioOutputLevel")/Ot:(Vt(e,"audioInputLevel")||0)/Ot,detached:void 0,echoReturnLoss:Bt(e,"googEchoCancellationReturnLoss"),echoReturnLossEnhancement:Bt(e,"googEchoCancellationReturnLossEnhancement"),ended:void 0,frameHeight:Gt(e,"googFrameHeightReceived")?Vt(e,"googFrameHeightReceived"):Vt(e,"googFrameHeightSent"),frameWidth:Gt(e,"googFrameWidthReceived")?Vt(e,"googFrameWidthReceived"):Vt(e,"googFrameWidthSent"),framesCorrupted:void 0,framesDecoded:Vt(e,"framesDecoded"),framesDropped:void 0,framesPerSecond:void 0,framesReceived:void 0,framesSent:Vt(e,"framesEncoded"),fullFramesLost:void 0,id:e.id,kind:e.stat("mediaType"),partialFramesLost:void 0,remoteSource:void 0,ssrcIds:void 0,timestamp:Date.parse(e.timestamp),trackIdentifier:e.stat("googTrackId"),type:"track"}}(i)),e.set(`codec-${r}`,function(e){return{channels:void 0,clockRate:void 0,id:e.id,implementation:void 0,mimeType:`${e.stat("mediaType")}/${e.stat("googCodecName")}`,payloadType:void 0,sdpFmtpLine:void 0,timestamp:Date.parse(e.timestamp),type:"codec"}}(i));break;case"googComponent":const s=Ft(i);n.set(s.selectedCandidatePairId,r),e.set(r,Ft(i))}return e},new Map);if(t){const e=n.get(t);e&&(i.get(e).dtlsState="connected")}return new zt(i)};function Qt(e,t){return"function"==typeof e.get?e.get(t):e.find(e=>e.id===t)}function Jt(e){if(!e)return Promise.reject(new rt("PeerConnection is null"));if("function"!=typeof e.getStats)return Promise.reject(new at("WebRTC statistics are unsupported"));let t;try{t=e.getStats()}catch(n){t=new Promise(t=>e.getStats(t)).then(zt.fromRTCStatsResponse)}return t}function Kt(e,t){return t=Object.assign({createRTCSample:Zt},t),Jt(e).then(t.createRTCSample)}function Xt(e){return Jt(e).then(e=>{const{candidatePairs:t,localCandidates:n,remoteCandidates:i,transport:r}=Array.from(e.values()).reduce((e,t)=>{switch(["candidatePairs","localCandidates","remoteCandidates"].forEach(t=>{e[t]||(e[t]=[])}),t.type){case"candidate-pair":e.candidatePairs.push(t);break;case"local-candidate":e.localCandidates.push(t);break;case"remote-candidate":e.remoteCandidates.push(t);break;case"transport":t.selectedCandidatePairId&&(e.transport=t)}return e},{}),s=t.find(e=>e.selected||r&&e.id===r.selectedCandidatePairId);let a;return s&&(a={localCandidate:n.find(e=>e.id===s.localCandidateId),remoteCandidate:i.find(e=>e.id===s.remoteCandidateId)}),{iceCandidateStats:[...n,...i],selectedIceCandidatePairStats:a}})}function Yt(){}function Zt(e){let t=null;const n=new Yt;let i;Array.from(e.values()).forEach(r=>{if(r.isRemote)return;const s=r.type.replace("-","");if(i=i||r.timestamp,r.remoteId){const t=Qt(e,r.remoteId);t&&t.roundTripTime&&(n.rtt=1e3*t.roundTripTime)}switch(s){case"inboundrtp":n.timestamp=n.timestamp||r.timestamp,n.jitter=1e3*r.jitter,n.packetsLost=r.packetsLost,n.packetsReceived=r.packetsReceived,n.bytesReceived=r.bytesReceived;break;case"outboundrtp":if(n.timestamp=r.timestamp,n.packetsSent=r.packetsSent,n.bytesSent=r.bytesSent,r.codecId){const t=Qt(e,r.codecId);n.codecName=t?t.mimeType&&t.mimeType.match(/(.*\/)?(.*)/)[2]:r.codecId}break;case"transport":t=r.id}}),n.timestamp||(n.timestamp=i);const r=Qt(e,t);if(!r)return n;const s=Qt(e,r.selectedCandidatePairId);if(!s)return n;const a=Qt(e,s.localCandidateId),o=Qt(e,s.remoteCandidateId);return n.rtt||(n.rtt=s&&1e3*s.currentRoundTripTime),Object.assign(n,{localAddress:a&&(a.address||a.ip),remoteAddress:o&&(o.address||o.ip)}),n}class en extends Ae.EventEmitter{constructor(e,t){super(),this._hasInsightsErrored=!1,this._log=new dt("PreflightTest"),this._networkTiming={},this._options={codecPreferences:[si.Codec.PCMU,si.Codec.Opus],edge:"roaming",fakeMicInput:!1,logLevel:"error",signalingTimeoutMs:1e4},this._status=en.Status.Connecting,Object.assign(this._options,t),this._samples=[],this._warnings=[],this._startTime=Date.now(),this._initDevice(e,Object.assign(Object.assign({},this._options),{fileInputStream:this._options.fakeMicInput?this._getStreamFromFile():void 0}));const n=["codecPreferences","edge","fakeMicInput","logLevel","signalingTimeoutMs"],i=["audioContext","deviceFactory","fileInputStream","getRTCIceCandidateStatsReport","iceServers","rtcConfiguration"];if("object"==typeof t){const e=Object.assign({},t);Object.keys(e).forEach(t=>{n.includes(t)||i.includes(t)||delete e[t],i.includes(t)&&(e[t]=!0)}),this._log.debug(".constructor",JSON.stringify(e))}}stop(){this._log.debug(".stop");const e=new Ke.CallCancelledError;this._device?(this._device.once(Wn.EventName.Unregistered,()=>this._onFailed(e)),this._device.destroy()):this._onFailed(e)}_emitWarning(e,t,n){const i={name:e,description:t};n&&(i.rtcWarning=n),this._warnings.push(i),this._log.debug(`#${en.Events.Warning}`,JSON.stringify(i)),this.emit(en.Events.Warning,i)}_getCallQuality(e){return e>4.2?en.CallQuality.Excellent:e>=4.1&&e<=4.2?en.CallQuality.Great:e>=3.7&&e<=4?en.CallQuality.Good:e>=3.1&&e<=3.6?en.CallQuality.Fair:en.CallQuality.Degraded}_getReport(){var e,t,n;const i=this._getRTCStats(),r={start:this._startTime};this._endTime&&(r.end=this._endTime,r.duration=this._endTime-this._startTime);const s={callSid:this._callSid,edge:this._edge,iceCandidateStats:null!==(t=null===(e=this._rtcIceCandidateStatsReport)||void 0===e?void 0:e.iceCandidateStats)&&void 0!==t?t:[],networkTiming:this._networkTiming,samples:this._samples,selectedEdge:this._options.edge,stats:i,testTiming:r,totals:this._getRTCSampleTotals(),warnings:this._warnings},a=null===(n=this._rtcIceCandidateStatsReport)||void 0===n?void 0:n.selectedIceCandidatePairStats;return a&&(s.selectedIceCandidatePairStats=a,s.isTurnRequired="relay"===a.localCandidate.candidateType||"relay"===a.remoteCandidate.candidateType),i&&(s.callQuality=this._getCallQuality(i.mos.average)),s}_getRTCSampleTotals(){if(this._latestSample)return Object.assign({},this._latestSample.totals)}_getRTCStats(){const e=this._samples.findIndex(e=>"number"==typeof e.mos&&e.mos>0),t=e>=0?this._samples.slice(e):[];if(t&&t.length)return["jitter","mos","rtt"].reduce((e,n)=>{const i=t.map(e=>e[n]);return Object.assign(Object.assign({},e),{[n]:{average:Number((i.reduce((e,t)=>e+t)/i.length).toPrecision(5)),max:Math.max(...i),min:Math.min(...i)}})},{})}_getStreamFromFile(){const e=this._options.audioContext;if(!e)throw new at("Cannot fake input audio stream: AudioContext is not supported by this browser.");const t=new Audio(ut);t.addEventListener("canplaythrough",()=>t.play()),"function"==typeof t.setAttribute&&t.setAttribute("crossorigin","anonymous");const n=e.createMediaElementSource(t),i=e.createMediaStreamDestination();return n.connect(i),i.stream}_initDevice(e,t){try{this._device=new(t.deviceFactory||Wn)(e,{chunderw:t.chunderw,codecPreferences:t.codecPreferences,edge:t.edge,eventgw:t.eventgw,fileInputStream:t.fileInputStream,logLevel:t.logLevel,preflight:!0}),this._device.once(Wn.EventName.Registered,()=>{this._onDeviceRegistered()}),this._device.once(Wn.EventName.Error,e=>{this._onDeviceError(e)}),this._device.register()}catch(n){return void setTimeout(()=>{this._onFailed(n)})}this._signalingTimeoutTimer=setTimeout(()=>{this._onDeviceError(new Ze.ConnectionError("WebSocket Connection Timeout"))},t.signalingTimeoutMs)}_onDeviceError(e){this._device.destroy(),this._onFailed(e)}_onDeviceRegistered(){return Re(this,void 0,void 0,function*(){if(clearTimeout(this._echoTimer),clearTimeout(this._signalingTimeoutTimer),this._call=yield this._device.connect({rtcConfiguration:this._options.rtcConfiguration}),this._networkTiming.signaling={start:Date.now()},this._setupCallHandlers(this._call),this._edge=this._device.edge||void 0,this._options.fakeMicInput){this._echoTimer=setTimeout(()=>this._device.disconnectAll(),2e4);const e=this._device.audio;e&&(e.disconnect(!1),e.outgoing(!1))}this._call.once("disconnect",()=>{this._device.once(Wn.EventName.Unregistered,()=>this._onUnregistered()),this._device.destroy()});this._call._publisher.on("error",()=>{this._hasInsightsErrored||this._emitWarning("insights-connection-error","Received an error when attempting to connect to Insights gateway"),this._hasInsightsErrored=!0})})}_onFailed(e){clearTimeout(this._echoTimer),clearTimeout(this._signalingTimeoutTimer),this._releaseHandlers(),this._endTime=Date.now(),this._status=en.Status.Failed,this._log.debug(`#${en.Events.Failed}`,e),this.emit(en.Events.Failed,e)}_onUnregistered(){setTimeout(()=>{this._status!==en.Status.Failed&&(clearTimeout(this._echoTimer),clearTimeout(this._signalingTimeoutTimer),this._releaseHandlers(),this._endTime=Date.now(),this._status=en.Status.Completed,this._report=this._getReport(),this._log.debug(`#${en.Events.Completed}`,JSON.stringify(this._report)),this.emit(en.Events.Completed,this._report))},10)}_releaseHandlers(){[this._device,this._call].forEach(e=>{e&&e.eventNames().forEach(t=>e.removeAllListeners(t))})}_setupCallHandlers(e){this._options.fakeMicInput&&e.once("volume",()=>{e._mediaHandler.outputs.forEach(e=>e.audio.muted=!0)}),e.on("warning",(e,t)=>{this._emitWarning(e,"Received an RTCWarning. See .rtcWarning for the RTCWarning",t)}),e.once("accept",()=>{this._callSid=e._mediaHandler.callSid,this._status=en.Status.Connected,this._log.debug(`#${en.Events.Connected}`),this.emit(en.Events.Connected)}),e.on("sample",t=>Re(this,void 0,void 0,function*(){this._latestSample||(this._rtcIceCandidateStatsReport=yield(this._options.getRTCIceCandidateStatsReport||Xt)(e._mediaHandler.version.pc)),this._latestSample=t,this._samples.push(t),this._log.debug(`#${en.Events.Sample}`,JSON.stringify(t)),this.emit(en.Events.Sample,t)})),[{reportLabel:"peerConnection",type:"pcconnection"},{reportLabel:"ice",type:"iceconnection"},{reportLabel:"dtls",type:"dtlstransport"},{reportLabel:"signaling",type:"signaling"}].forEach(({type:t,reportLabel:n})=>{const i=`on${t}statechange`,r=e._mediaHandler[i];e._mediaHandler[i]=e=>{const t=this._networkTiming[n]=this._networkTiming[n]||{start:0};"connecting"===e||"checking"===e?t.start=Date.now():"connected"!==e&&"stable"!==e||t.duration||(t.end=Date.now(),t.duration=t.end-t.start),r(e)}})}get callSid(){return this._callSid}get endTime(){return this._endTime}get latestSample(){return this._latestSample}get report(){return this._report}get startTime(){return this._startTime}get status(){return this._status}}var tn,nn,rn,sn;tn=en||(en={}),(nn=tn.CallQuality||(tn.CallQuality={})).Excellent="excellent",nn.Great="great",nn.Good="good",nn.Fair="fair",nn.Degraded="degraded",(rn=tn.Events||(tn.Events={})).Completed="completed",rn.Connected="connected",rn.Failed="failed",rn.Sample="sample",rn.Warning="warning",(sn=tn.Status||(tn.Status={})).Connecting="connecting",sn.Connected="connected",sn.Completed="completed",sn.Failed="failed";const an=globalThis.WebSocket,on=1/0;var ln,cn;(cn=ln||(ln={})).Connecting="connecting",cn.Closed="closed",cn.Open="open";class un extends Ae.EventEmitter{constructor(e,t={}){super(),this.state=ln.Closed,this._backoffStartTime={preferred:null,primary:null},this._connectedUri=null,this._log=new dt("WSTransport"),this._shouldFallback=!1,this._uriIndex=0,this._moveUriIndex=()=>{this._uriIndex++,this._uriIndex>=this._uris.length&&(this._uriIndex=0)},this._onSocketClose=e=>{if(this._log.error(`Received websocket close event code: ${e.code}. Reason: ${e.reason}`),1006===e.code||1015===e.code){this.emit("error",{code:31005,message:e.reason||"Websocket connection to Twilio's signaling servers were unexpectedly ended. If this is happening consistently, there may be an issue resolving the hostname provided. If a region or an edge is being specified in Device setup, ensure it is valid.",twilioError:new Ze.ConnectionError});const t=this.state===ln.Open||this._previousState===ln.Open;!this._shouldFallback&&t||this._moveUriIndex(),this._shouldFallback=!0}this._closeSocket()},this._onSocketError=e=>{this._log.error(`WebSocket received error: ${e.message}`),this.emit("error",{code:31e3,message:e.message||"WSTransport socket error",twilioError:new Ze.ConnectionDisconnected})},this._onSocketMessage=e=>{if(this._setHeartbeatTimeout(),this._socket&&"\n"===e.data)return this._socket.send("\n"),void this._log.debug("heartbeat");e&&"string"==typeof e.data&&this._log.debug(`Received: ${e.data}`),this.emit("message",e)},this._onSocketOpen=()=>{this._log.info("WebSocket opened successfully."),this._timeOpened=Date.now(),this._shouldFallback=!1,this._setState(ln.Open),clearTimeout(this._connectTimeout),this._resetBackoffs(),this._setHeartbeatTimeout(),this.emit("open")},this._options=Object.assign(Object.assign({},un.defaultConstructorOptions),t),this._uris=e,this._backoff=this._setupBackoffs()}close(){this._log.info("WSTransport.close() called..."),this._close()}open(){this._log.info("WSTransport.open() called..."),!this._socket||this._socket.readyState!==an.CONNECTING&&this._socket.readyState!==an.OPEN?this._preferredUri?this._connect(this._preferredUri):this._connect(this._uris[this._uriIndex]):this._log.info("WebSocket already open.")}send(e){if(this._log.debug(`Sending: ${e}`),!this._socket||this._socket.readyState!==an.OPEN)return this._log.debug("Cannot send message. WebSocket is not open."),!1;try{this._socket.send(e)}catch(t){return this._log.error("Error while sending message:",t.message),this._closeSocket(),!1}return!0}updatePreferredURI(e){this._preferredUri=e}updateURIs(e){"string"==typeof e&&(e=[e]),this._uris=e,this._uriIndex=0}_close(){this._setState(ln.Closed),this._closeSocket()}_closeSocket(){clearTimeout(this._connectTimeout),clearTimeout(this._heartbeatTimeout),this._log.info("Closing and cleaning up WebSocket..."),this._socket?(this._socket.removeEventListener("close",this._onSocketClose),this._socket.removeEventListener("error",this._onSocketError),this._socket.removeEventListener("message",this._onSocketMessage),this._socket.removeEventListener("open",this._onSocketOpen),this._socket.readyState!==an.CONNECTING&&this._socket.readyState!==an.OPEN||this._socket.close(),this._timeOpened&&Date.now()-this._timeOpened>1e4&&this._resetBackoffs(),this.state!==ln.Closed&&this._performBackoff(),delete this._socket,this.emit("close")):this._log.info("No WebSocket to clean up.")}_connect(e,t){this._log.info("number"==typeof t?`Attempting to reconnect (retry #${t})...`:"Attempting to connect..."),this._closeSocket(),this._setState(ln.Connecting),this._connectedUri=e;try{this._socket=new this._options.WebSocket(this._connectedUri)}catch(n){return this._log.error("Could not connect to endpoint:",n.message),this._close(),void this.emit("error",{code:31e3,message:n.message||`Could not connect to ${this._connectedUri}`,twilioError:new Ze.ConnectionDisconnected})}this._socket.addEventListener("close",this._onSocketClose),this._socket.addEventListener("error",this._onSocketError),this._socket.addEventListener("message",this._onSocketMessage),this._socket.addEventListener("open",this._onSocketOpen),delete this._timeOpened,this._connectTimeout=setTimeout(()=>{this._log.info("WebSocket connection attempt timed out."),this._moveUriIndex(),this._closeSocket()},this._options.connectTimeoutMs)}_performBackoff(){this._preferredUri?(this._log.info("Preferred URI set; backing off."),this._backoff.preferred.backoff()):(this._log.info("Preferred URI not set; backing off."),this._backoff.primary.backoff())}_resetBackoffs(){this._backoff.preferred.reset(),this._backoff.primary.reset(),this._backoffStartTime.preferred=null,this._backoffStartTime.primary=null}_setHeartbeatTimeout(){clearTimeout(this._heartbeatTimeout),this._heartbeatTimeout=setTimeout(()=>{this._log.info("No messages received in 15 seconds. Reconnecting..."),this._shouldFallback=!0,this._closeSocket()},15e3)}_setState(e){this._previousState=this.state,this.state=e}_setupBackoffs(){const e={factor:2,jitter:.4,max:this._options.maxPreferredDelayMs,min:100};this._log.info("Initializing preferred transport backoff using config: ",e);const t=new Le(e);t.on("backoff",(e,t)=>{this.state!==ln.Closed?(this._log.info(`Will attempt to reconnect Websocket to preferred URI in ${t}ms`),0===e&&(this._backoffStartTime.preferred=Date.now(),this._log.info(`Preferred backoff start; ${this._backoffStartTime.preferred}`))):this._log.info("Preferred backoff initiated but transport state is closed; not attempting a connection.")}),t.on("ready",(e,t)=>{if(this.state!==ln.Closed){if(null!==this._backoffStartTime.preferred)return Date.now()-this._backoffStartTime.preferred>this._options.maxPreferredDurationMs?(this._log.info("Max preferred backoff attempt time exceeded; falling back to primary backoff."),this._preferredUri=null,void this._backoff.primary.backoff()):"string"!=typeof this._preferredUri?(this._log.info("Preferred URI cleared; falling back to primary backoff."),this._preferredUri=null,void this._backoff.primary.backoff()):void this._connect(this._preferredUri,e+1);this._log.info("Preferred backoff start time invalid; not attempting a connection.")}else this._log.info("Preferred backoff ready but transport state is closed; not attempting a connection.")});const n={factor:2,jitter:.4,max:this._options.maxPrimaryDelayMs,min:this._uris&&this._uris.length>1?Math.floor(4001*Math.random())+1e3:100};this._log.info("Initializing primary transport backoff using config: ",n);const i=new Le(n);return i.on("backoff",(e,t)=>{this.state!==ln.Closed?(this._log.info(`Will attempt to reconnect WebSocket in ${t}ms`),0===e&&(this._backoffStartTime.primary=Date.now(),this._log.info(`Primary backoff start; ${this._backoffStartTime.primary}`))):this._log.info("Primary backoff initiated but transport state is closed; not attempting a connection.")}),i.on("ready",(e,t)=>{this.state!==ln.Closed?null!==this._backoffStartTime.primary?Date.now()-this._backoffStartTime.primary>this._options.maxPrimaryDurationMs?this._log.info("Max primary backoff attempt time exceeded; not attempting a connection."):this._connect(this._uris[this._uriIndex],e+1):this._log.info("Primary backoff start time invalid; not attempting a connection."):this._log.info("Primary backoff ready but transport state is closed; not attempting a connection.")}),{preferred:t,primary:i}}get uri(){return this._connectedUri}}un.defaultConstructorOptions={WebSocket:an,connectTimeoutMs:5e3,maxPreferredDelayMs:1e3,maxPreferredDurationMs:15e3,maxPrimaryDelayMs:2e4,maxPrimaryDurationMs:on};class dn extends Ae.EventEmitter{constructor(e,t,n){if(super(),!(this instanceof dn))return new dn(e,t,n);const i={TransportFactory:un};n=n||{};for(const s in i)s in n||(n[s]=i[s]);this.options=n,this.token=e||"",this.status="disconnected",this.gateway=null,this.region=null,this._messageQueue=[],this._preferredUri=null,this._uris=t,this._handleTransportClose=this._handleTransportClose.bind(this),this._handleTransportError=this._handleTransportError.bind(this),this._handleTransportMessage=this._handleTransportMessage.bind(this),this._handleTransportOpen=this._handleTransportOpen.bind(this),this._log=new dt("PStream"),this.on("error",()=>{this._log.warn("Unexpected error handled in pstream")});const r=this;return this.addListener("ready",()=>{r.status="ready"}),this.addListener("offline",()=>{r.status="offline"}),this.addListener("close",()=>{r._log.info('Received "close" from server. Destroying PStream...'),r._destroy()}),this.transport=new this.options.TransportFactory(this._uris,{backoffMaxMs:this.options.backoffMaxMs,maxPreferredDurationMs:this.options.maxPreferredDurationMs}),Object.defineProperties(this,{uri:{enumerable:!0,get(){return this.transport.uri}}}),this.transport.on("close",this._handleTransportClose),this.transport.on("error",this._handleTransportError),this.transport.on("message",this._handleTransportMessage),this.transport.on("open",this._handleTransportOpen),this.transport.open(),this}}function hn(){const e="undefined"!=typeof navigator?navigator:{};return{browser:{platform:e.platform||"unknown",userAgent:e.userAgent||"unknown"},p:"browser",plugin:"rtc",v:lt}}var pn,fn,mn,gn;dn.prototype._handleTransportClose=function(){this.emit("transportClose"),"disconnected"!==this.status&&("offline"!==this.status&&this.emit("offline",this),this.status="disconnected")},dn.prototype._handleTransportError=function(e){e?this.emit("error",void 0!==e.code?{error:e}:e):this.emit("error",{error:{code:31e3,message:"Websocket closed without a provided reason",twilioError:new Ze.ConnectionDisconnected}})},dn.prototype._handleTransportMessage=function(e){if(!e||!e.data||"string"!=typeof e.data)return;const{type:t,payload:n={}}=JSON.parse(e.data);this.gateway=n.gateway||this.gateway,this.region=n.region||this.region,"error"===t&&n.error&&(n.error.twilioError=new Ze.ConnectionError),this.emit(t,n)},dn.prototype._handleTransportOpen=function(){this.status="connected",this.setToken(this.token),this.emit("transportOpen");this._messageQueue.splice(0,this._messageQueue.length).forEach(e=>this._publish(...e))},dn.toString=()=>"[Twilio.PStream class]",dn.prototype.toString=()=>"[Twilio.PStream instance]",dn.prototype.setToken=function(e){this._log.info("Setting token and publishing listen"),this.token=e;let t=0;const n=this.options.maxPreferredDurationMs;this._log.info(`maxPreferredDurationMs:${n}`),"number"==typeof n&&n>=0&&(t=Math.min(Math.ceil(n/1e3),30)),this._log.info(`reconnectTimeout:${t}`);const i={browserinfo:hn(),reconnectTimeout:t,token:e};this._publish("listen",i)},dn.prototype.sendMessage=function(e,t,n="application/json",i,r){const s={callsid:e,content:t,contenttype:n,messagetype:i,voiceeventsid:r};this._publish("message",s,!0)},dn.prototype.register=function(e){const t={media:e};this._publish("register",t,!0)},dn.prototype.invite=function(e,t,n){const i={callsid:t,sdp:e,twilio:n?{params:n}:{}};this._publish("invite",i,!0)},dn.prototype.reconnect=function(e,t,n){const i={callsid:t,reconnect:n,sdp:e,twilio:{}};this._publish("invite",i,!0)},dn.prototype.answer=function(e,t){this._publish("answer",{sdp:e,callsid:t},!0)},dn.prototype.dtmf=function(e,t){this._publish("dtmf",{callsid:e,dtmf:t},!0)},dn.prototype.hangup=function(e,t){const n=t?{callsid:e,message:t}:{callsid:e};this._publish("hangup",n,!0)},dn.prototype.reject=function(e){this._publish("reject",{callsid:e},!0)},dn.prototype.reinvite=function(e,t){this._publish("reinvite",{sdp:e,callsid:t},!1)},dn.prototype._destroy=function(){this.transport.removeListener("close",this._handleTransportClose),this.transport.removeListener("error",this._handleTransportError),this.transport.removeListener("message",this._handleTransportMessage),this.transport.removeListener("open",this._handleTransportOpen),this.transport.close(),this.emit("offline",this)},dn.prototype.destroy=function(){return this._log.info("PStream.destroy() called..."),this._destroy(),this},dn.prototype.updatePreferredURI=function(e){this._preferredUri=e,this.transport.updatePreferredURI(e)},dn.prototype.updateURIs=function(e){this._uris=e,this.transport.updateURIs(this._uris)},dn.prototype.publish=function(e,t){return this._publish(e,t,!0)},dn.prototype._publish=function(e,t,n){const i=JSON.stringify({payload:t,type:e,version:"1.6"});!!this.transport.send(i)||(this.emit("error",{error:{code:31009,message:"No transport available to send or receive messages",twilioError:new Ke.TransportError}}),n&&this._messageQueue.push([e,t,!0]))},(fn=pn||(pn={})).Sydney="sydney",fn.SaoPaulo="sao-paulo",fn.Dublin="dublin",fn.Frankfurt="frankfurt",fn.Tokyo="tokyo",fn.Singapore="singapore",fn.Ashburn="ashburn",fn.Umatilla="umatilla",fn.Roaming="roaming",fn.AshburnIx="ashburn-ix",fn.SanJoseIx="san-jose-ix",fn.LondonIx="london-ix",fn.FrankfurtIx="frankfurt-ix",fn.SingaporeIx="singapore-ix",fn.SydneyIx="sydney-ix",fn.TokyoIx="tokyo-ix",(gn=mn||(mn={})).Au1="au1",gn.Au1Ix="au1-ix",gn.Br1="br1",gn.De1="de1",gn.De1Ix="de1-ix",gn.Gll="gll",gn.Ie1="ie1",gn.Ie1Ix="ie1-ix",gn.Ie1Tnx="ie1-tnx",gn.Jp1="jp1",gn.Jp1Ix="jp1-ix",gn.Sg1="sg1",gn.Sg1Ix="sg1-ix",gn.Sg1Tnx="sg1-tnx",gn.Us1="us1",gn.Us1Ix="us1-ix",gn.Us1Tnx="us1-tnx",gn.Us2="us2",gn.Us2Ix="us2-ix",gn.Us2Tnx="us2-tnx";const vn={ASIAPAC_SINGAPORE:mn.Sg1,ASIAPAC_SYDNEY:mn.Au1,ASIAPAC_TOKYO:mn.Jp1,EU_FRANKFURT:mn.De1,EU_IRELAND:mn.Ie1,SOUTH_AMERICA_SAO_PAULO:mn.Br1,US_EAST_VIRGINIA:mn.Us1,US_WEST_OREGON:mn.Us2},yn={[mn.Au1]:pn.Sydney,[mn.Br1]:pn.SaoPaulo,[mn.Ie1]:pn.Dublin,[mn.De1]:pn.Frankfurt,[mn.Jp1]:pn.Tokyo,[mn.Sg1]:pn.Singapore,[mn.Us1]:pn.Ashburn,[mn.Us2]:pn.Umatilla,[mn.Gll]:pn.Roaming,[mn.Us1Ix]:pn.AshburnIx,[mn.Us2Ix]:pn.SanJoseIx,[mn.Ie1Ix]:pn.LondonIx,[mn.De1Ix]:pn.FrankfurtIx,[mn.Sg1Ix]:pn.SingaporeIx,[mn.Au1Ix]:pn.SydneyIx,[mn.Jp1Ix]:pn.TokyoIx,[mn.Us1Tnx]:pn.AshburnIx,[mn.Us2Tnx]:pn.AshburnIx,[mn.Ie1Tnx]:pn.LondonIx,[mn.Sg1Tnx]:pn.SingaporeIx},bn=pn.Roaming;function _n(e){return`voice-js.${e}.twilio.com`}function xn(e){return e?`eventgw.${e}.twilio.com`:"eventgw.twilio.com"}function wn(e){return`wss://${e}/signal`}function kn(e){if(e&&"string"!=typeof e&&!Array.isArray(e))throw new rt("If `edge` is provided, it must be of type `string` or an array of strings.");let t;if(e){t=(Array.isArray(e)?e:[e]).map(e=>_n(e))}else t=[_n(bn)];return t}const Sn={0:"PCMU",8:"PCMA"};function Cn(e,t){if("number"!=typeof t||t<6e3||t>51e4)return e;const n=/a=rtpmap:(\d+) opus/m.exec(e),i=n&&n.length?n[1]:111,r=new RegExp(`a=fmtp:${i}`);return e.split("\n").map(e=>r.test(e)?e+`;maxaveragebitrate=${t}`:e).join("\n")}function En(e,t){const n=function(e){return e.replace(/\r\n\r\n$/,"\r\n").split("\r\nm=").slice(1).map(e=>`m=${e}`).filter(e=>{const t=new RegExp("m=.*","gm"),n=new RegExp("a=.*","gm");return t.test(e)&&n.test(e)})}(e);return[e.split("\r\nm=")[0]].concat(n.map(e=>{if(!/^m=(audio|video)/.test(e))return e;const n=e.match(/^m=(audio|video)/)[1],i=function(e){return Array.from((t=e,function(e){const t=e.split("\r\n")[0],n=t.match(/([0-9]+)/g);return n?n.slice(1).map(e=>parseInt(e,10)):[]}(t).reduce((e,n)=>{const i=new RegExp(`a=rtpmap:${n} ([^/]+)`),r=t.match(i),s=r?r[1].toLowerCase():Sn[n]?Sn[n].toLowerCase():"";return e.set(n,s)},new Map))).reduce((e,t)=>{const n=t[0],i=t[1],r=e.get(i)||[];return e.set(i,r.concat(n))},new Map);var t}(e),r=function(e,t){t=t.map(e=>e.toLowerCase());const n=wt(t,t=>e.get(t)||[]),i=vt(Array.from(e.keys()),t),r=wt(i,t=>e.get(t));return n.concat(r)}(i,t),s=function(e,t){const n=t.split("\r\n");let i=n[0];const r=n.slice(1);return i=i.replace(/([0-9]+\s?)+$/,e.join(" ")),[i].concat(r).join("\r\n")}(r,e),a=i.get("pcma")||[],o=i.get("pcmu")||[];return("audio"===n?new Set(a.concat(o)):new Set).has(r[0])?s.replace(/\r\nb=(AS|TIAS):([0-9]+)/g,""):s})).join("\r\n")}function Nn(e){this.log=new dt("RTCPC"),"undefined"!=typeof window?e&&e.RTCPeerConnection?this.RTCPeerConnection=e.RTCPeerConnection:"function"==typeof window.RTCPeerConnection?this.RTCPeerConnection=window.RTCPeerConnection:"function"==typeof window.webkitRTCPeerConnection?this.RTCPeerConnection=webkitRTCPeerConnection:"function"==typeof window.mozRTCPeerConnection?(this.RTCPeerConnection=mozRTCPeerConnection,window.RTCSessionDescription=mozRTCSessionDescription,window.RTCIceCandidate=mozRTCIceCandidate):this.log.info("No RTCPeerConnection implementation available"):this.log.info("No RTCPeerConnection implementation available. The window object was not found.")}function Tn(e,t,n,i){return function(){const r=Array.prototype.slice.call(arguments);return new Promise(n=>{const s=e.apply(t,r);if(i){if("object"!=typeof s||"function"!=typeof s.then)throw new Error;n(s)}else n(s)}).catch(()=>new Promise((i,s)=>{e.apply(t,n?[i,s].concat(r):r.concat([i,s]))}))}}function jn(e,t){return Tn(e,t,!0,!0)}function Pn(e,t){return Tn(e,t,!1,!1)}Nn.prototype.create=function(e){this.pc=new this.RTCPeerConnection(e)},Nn.prototype.createModernConstraints=e=>{if(void 0===e)return null;const t=Object.assign({},e);return"undefined"==typeof webkitRTCPeerConnection||_t()?(void 0!==e.audio&&(t.offerToReceiveAudio=e.audio),void 0!==e.video&&(t.offerToReceiveVideo=e.video)):(t.mandatory={},void 0!==e.audio&&(t.mandatory.OfferToReceiveAudio=e.audio),void 0!==e.video&&(t.mandatory.OfferToReceiveVideo=e.video)),delete t.audio,delete t.video,t},Nn.prototype.createOffer=function(e,t,n,i){return t=this.createModernConstraints(t),jn(this.pc.createOffer,this.pc)(t).then(t=>{if(!this.pc)return Promise.resolve();const n=Cn(t.sdp,e);return Pn(this.pc.setLocalDescription,this.pc)(new RTCSessionDescription({sdp:n,type:"offer"}))}).then(n,i)},Nn.prototype.createAnswer=function(e,t,n,i){return t=this.createModernConstraints(t),jn(this.pc.createAnswer,this.pc)(t).then(t=>{if(!this.pc)return Promise.resolve();const n=Cn(t.sdp,e);return Pn(this.pc.setLocalDescription,this.pc)(new RTCSessionDescription({sdp:n,type:"answer"}))}).then(n,i)},Nn.prototype.processSDP=function(e,t,n,i,r,s){n=En(n,t);const a=new RTCSessionDescription({sdp:n,type:"offer"});return Pn(this.pc.setRemoteDescription,this.pc)(a).then(()=>{this.createAnswer(e,i,r,s)})},Nn.prototype.getSDP=function(){return this.pc.localDescription.sdp},Nn.prototype.processAnswer=function(e,t,n,i){return this.pc?(t=En(t,e),Pn(this.pc.setRemoteDescription,this.pc)(new RTCSessionDescription({sdp:t,type:"answer"})).then(n,i)):Promise.resolve()},Nn.test=()=>{if("object"==typeof navigator){const t=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.getUserMedia;if(_t(navigator))return!1;if(t&&"function"==typeof window.RTCPeerConnection)return!0;if(t&&"function"==typeof window.webkitRTCPeerConnection)return!0;if(t&&"function"==typeof window.mozRTCPeerConnection){try{if("function"!=typeof(new window.mozRTCPeerConnection).getLocalStreams)return!1}catch(e){return!1}return!0}if("undefined"!=typeof RTCIceGatherer)return!0}return!1};function In(e,t,n){if(!e||!t)throw new rt("Audiohelper, and pstream are required arguments");if(!(this instanceof In))return new In(e,t,n);function i(){this._log.warn("Unexpected noop call in peerconnection")}this._log=new dt("PeerConnection"),this.onaudio=i,this.onopen=i,this.onerror=i,this.onclose=i,this.ondisconnected=i,this.onfailed=i,this.onconnected=i,this.onreconnected=i,this.onsignalingstatechange=i,this.ondtlstransportstatechange=i,this.onicegatheringfailure=i,this.onicegatheringstatechange=i,this.oniceconnectionstatechange=i,this.onpcconnectionstatechange=i,this.onicecandidate=i,this.onselectedcandidatepairchange=i,this.onvolume=i,this.version=null,this.pstream=t,this.stream=null,this.sinkIds=new Set(["default"]),this.outputs=new Map,this.status="connecting",this.callSid=null,this.isMuted=!1;const r="undefined"!=typeof window&&(window.AudioContext||window.webkitAudioContext);return this._isSinkSupported=!!r&&"undefined"!=typeof HTMLAudioElement&&HTMLAudioElement.prototype.setSinkId,this._audioContext=r&&e._audioContext,this._audioHelper=e,this._hasIceCandidates=!1,this._hasIceGatheringFailures=!1,this._iceGatheringTimeoutId=null,this._masterAudio=null,this._masterAudioDeviceId=null,this._mediaStreamSource=null,this._dtmfSender=null,this._dtmfSenderUnsupported=!1,this._callEvents=[],this._nextTimeToPublish=Date.now(),this._onAnswerOrRinging=i,this._onHangup=i,this._remoteStream=null,this._shouldManageStream=!0,this._iceState="new",this.options=n=n||{},this.navigator=n.navigator||("undefined"!=typeof navigator?navigator:null),this.util=n.util||Et,this.codecPreferences=n.codecPreferences,this}function Dn(e,t){let n;return n=t?new t:"undefined"!=typeof MediaStream?new MediaStream:new webkitMediaStream,e.getAudioTracks().forEach(n.addTrack,n),n}function An(e,t){if(void 0!==e.srcObject)e.srcObject=t;else if(void 0!==e.mozSrcObject)e.mozSrcObject=t;else{if(void 0===e.src)return!1;{const n=e.options.window||window;e.src=(n.URL||n.webkitURL).createObjectURL(t)}}return!0}function Ln(e,t){return(t=t||{}).util=t.util||Et,t.navigator=t.navigator||("undefined"!=typeof navigator?navigator:null),new Promise((n,i)=>{if(!t.navigator)throw new at("getUserMedia is not supported");switch("function"){case typeof(t.navigator.mediaDevices&&t.navigator.mediaDevices.getUserMedia):return n(t.navigator.mediaDevices.getUserMedia(e));case typeof t.navigator.webkitGetUserMedia:return t.navigator.webkitGetUserMedia(e,n,i);case typeof t.navigator.mozGetUserMedia:return t.navigator.mozGetUserMedia(e,n,i);case typeof t.navigator.getUserMedia:return t.navigator.getUserMedia(e,n,i);default:throw new at("getUserMedia is not supported")}}).catch(e=>{throw t.util.isFirefox()&&"NotReadableError"===e.name?new at("Firefox does not currently support opening multiple audio input trackssimultaneously, even across different tabs.\nRelated Bugzilla thread: https://bugzilla.mozilla.org/show_bug.cgi?id=1299324"):e})}function Rn(){return`KX${function(){if("object"!=typeof window)throw new at("This platform is not supported.");const{crypto:e}=window;if("object"!=typeof e)throw new at("The `crypto` module is not available on this platform.");if("function"!=typeof e.getRandomValues)throw new at("The function `crypto.getRandomValues` is not available on this platform.");if("function"!=typeof window.Uint8Array)throw new at("The `Uint8Array` module is not available on this platform.");return e.getRandomValues(new window.Uint8Array(16)).reduce((e,t)=>`${e}${t.toString(16).padStart(2,"0")}`,"")}()}`}In.prototype.uri=function(){return this._uri},In.prototype.openDefaultDeviceWithConstraints=function(e){return this._audioHelper._openDefaultDeviceWithConstraints(e).then(this._setInputTracksFromStream.bind(this,!1))},In.prototype.setInputTracksFromStream=function(e){const t=this;return this._setInputTracksFromStream(!0,e).then(()=>{t._shouldManageStream=!1})},In.prototype._createAnalyser=(e,t)=>{t=Object.assign({fftSize:32,smoothingTimeConstant:.3},t);const n=e.createAnalyser();for(const i in t)n[i]=t[i];return n},In.prototype._setVolumeHandler=function(e){this.onvolume=e},In.prototype._startPollingVolume=function(){if(!this._audioContext||!this.stream||!this._remoteStream)return;const e=this._audioContext,t=(this._inputAnalyser=this._createAnalyser(e)).frequencyBinCount,n=new Uint8Array(t);this._inputAnalyser2=this._createAnalyser(e,{maxDecibels:0,minDecibels:-127,smoothingTimeConstant:0});const i=(this._outputAnalyser=this._createAnalyser(e)).frequencyBinCount,r=new Uint8Array(i);this._outputAnalyser2=this._createAnalyser(e,{maxDecibels:0,minDecibels:-127,smoothingTimeConstant:0}),this._updateInputStreamSource(this.stream),this._updateOutputStreamSource(this._remoteStream);const s=this;setTimeout(function e(){if(!s._audioContext)return;if("closed"===s.status)return s._inputAnalyser.disconnect(),s._outputAnalyser.disconnect(),s._inputAnalyser2.disconnect(),void s._outputAnalyser2.disconnect();s._inputAnalyser.getByteFrequencyData(n);const t=s.util.average(n);s._inputAnalyser2.getByteFrequencyData(n);const i=s.util.average(n);s._outputAnalyser.getByteFrequencyData(r);const a=s.util.average(r);s._outputAnalyser2.getByteFrequencyData(r);const o=s.util.average(r);s.onvolume(t/255,a/255,i,o),setTimeout(e,50)},50)},In.prototype._stopStream=function(){this._shouldManageStream&&this._audioHelper._stopDefaultInputDeviceStream()},In.prototype._updateInputStreamSource=function(e){this._inputStreamSource&&this._inputStreamSource.disconnect();try{this._inputStreamSource=this._audioContext.createMediaStreamSource(e),this._inputStreamSource.connect(this._inputAnalyser),this._inputStreamSource.connect(this._inputAnalyser2)}catch(t){this._log.warn("Unable to update input MediaStreamSource",t),this._inputStreamSource=null}},In.prototype._updateOutputStreamSource=function(e){this._outputStreamSource&&this._outputStreamSource.disconnect();try{this._outputStreamSource=this._audioContext.createMediaStreamSource(e),this._outputStreamSource.connect(this._outputAnalyser),this._outputStreamSource.connect(this._outputAnalyser2)}catch(t){this._log.warn("Unable to update output MediaStreamSource",t),this._outputStreamSource=null}},In.prototype._setInputTracksFromStream=function(e,t){if(!t)return Promise.reject(new rt("Can not set input stream to null while in a call"));if(!t.getAudioTracks().length)return Promise.reject(new rt("Supplied input stream has no audio tracks"));const n=this.stream,i=()=>(this.mute(this.isMuted),Promise.resolve(this.stream));return n?(this._shouldManageStream&&this._stopStream(),this._sender||(this._sender=this.version.pc.getSenders()[0]),this._sender.replaceTrack(t.getAudioTracks()[0]).then(()=>(this._updateInputStreamSource(t),this.stream=e?Dn(t,this.options.MediaStream):t,i()))):(this.stream=e?Dn(t,this.options.MediaStream):t,i())},In.prototype._onInputDevicesChanged=function(){if(!this.stream)return;this.stream.getAudioTracks().every(e=>"ended"===e.readyState)&&this._shouldManageStream&&this.openDefaultDeviceWithConstraints({audio:!0})},In.prototype._onIceGatheringFailure=function(e){this._hasIceGatheringFailures=!0,this.onicegatheringfailure(e)},In.prototype._onMediaConnectionStateChange=function(e){const t=this._iceState;if(t===e||"connected"!==e&&"disconnected"!==e&&"failed"!==e)return;let n;switch(this._iceState=e,e){case"connected":"disconnected"===t||"failed"===t?(n="ICE liveliness check succeeded. Connection with Twilio restored",this._log.info(n),this.onreconnected(n)):(n="Media connection established.",this._log.info(n),this.onconnected(n)),this._stopIceGatheringTimeout(),this._hasIceGatheringFailures=!1;break;case"disconnected":n="ICE liveliness check failed. May be having trouble connecting to Twilio",this._log.warn(n),this.ondisconnected(n);break;case"failed":n="Connection with Twilio was interrupted.",this._log.warn(n),this.onfailed(n)}},In.prototype._setSinkIds=function(e){return this._isSinkSupported?(this.sinkIds=new Set(e.forEach?e:[e]),this.version?this._updateAudioOutputs():Promise.resolve()):Promise.reject(new at("Audio output selection is not supported by this browser"))},In.prototype._startIceGatheringTimeout=function(){this._stopIceGatheringTimeout(),this._iceGatheringTimeoutId=setTimeout(()=>{this._onIceGatheringFailure("timeout")},15e3)},In.prototype._stopIceGatheringTimeout=function(){clearInterval(this._iceGatheringTimeoutId)},In.prototype._updateAudioOutputs=function(){const e=Array.from(this.sinkIds).filter(function(e){return!this.outputs.has(e)},this),t=Array.from(this.outputs.keys()).filter(function(e){return!this.sinkIds.has(e)},this),n=this,i=e.map(this._createAudioOutput,this);return Promise.all(i).then(()=>Promise.all(t.map(n._removeAudioOutput,n)))},In.prototype._createAudio=function(e){const t=new Audio(e);return this.onaudio(t),t},In.prototype._createAudioOutput=function(e){let t=null;this._mediaStreamSource&&(t=this._audioContext.createMediaStreamDestination(),this._mediaStreamSource.connect(t));const n=this._createAudio();An(n,t&&t.stream?t.stream:this.pcStream);const i=this;return n.setSinkId(e).then(()=>n.play()).then(()=>{i.outputs.set(e,{audio:n,dest:t})})},In.prototype._removeAudioOutputs=function(){return this._masterAudio&&void 0!==this._masterAudioDeviceId&&(this._disableOutput(this,this._masterAudioDeviceId),this.outputs.delete(this._masterAudioDeviceId),this._masterAudioDeviceId=null,this._masterAudio.paused||this._masterAudio.pause(),void 0!==this._masterAudio.srcObject?this._masterAudio.srcObject=null:this._masterAudio.src="",this._masterAudio=null),Array.from(this.outputs.keys()).map(this._removeAudioOutput,this)},In.prototype._disableOutput=function(e,t){const n=e.outputs.get(t);n&&(n.audio&&(n.audio.pause(),n.audio.src=""),n.dest&&n.dest.disconnect())},In.prototype._reassignMasterOutput=function(e,t){const n=e.outputs.get(t);e.outputs.delete(t);const i=this,r=Array.from(e.outputs.keys())[0],s="string"==typeof r?r:"default";return n.audio.setSinkId(s).then(()=>{i._disableOutput(e,s),e.outputs.set(s,n),e._masterAudioDeviceId=s}).catch(function(){e.outputs.set(t,n),i._log.info("Could not reassign master output. Attempted to roll back.")})},In.prototype._removeAudioOutput=function(e){return this._masterAudioDeviceId===e?this._reassignMasterOutput(this,e):(this._disableOutput(this,e),this.outputs.delete(e),Promise.resolve())},In.prototype._onAddTrack=function(e,t){const n=e._masterAudio=this._createAudio();An(n,t),n.play();const i=Array.from(e.outputs.keys())[0],r="string"==typeof i?i:"default";e._masterAudioDeviceId=r,e.outputs.set(r,{audio:n});try{e._mediaStreamSource=e._audioContext.createMediaStreamSource(t)}catch(s){this._log.warn("Unable to create a MediaStreamSource from onAddTrack",s),this._mediaStreamSource=null}e.pcStream=t,e._updateAudioOutputs()},In.prototype._fallbackOnAddTrack=function(e,t){const n=document&&document.createElement("audio");n.autoplay=!0,An(n,t)||e._log.info("Error attaching stream to element."),e.outputs.set("default",{audio:n})},In.prototype._setEncodingParameters=function(e){if(!e||!this._sender||"function"!=typeof this._sender.getParameters||"function"!=typeof this._sender.setParameters)return;const t=this._sender.getParameters();(t.priority||t.encodings&&t.encodings.length)&&(t.priority="high",t.encodings&&t.encodings.length&&t.encodings.forEach(e=>{e.priority="high",e.networkPriority="high"}),this._sender.setParameters(t))},In.prototype._setupPeerConnection=function(e){const t=this,n=new(this.options.rtcpcFactory||Nn)({RTCPeerConnection:this.options.RTCPeerConnection});var i,r;n.create(e),i=n.pc,r=this.stream,"function"==typeof i.addTrack?r.getAudioTracks().forEach(e=>{i.addTrack(e,r)}):i.addStream(r);const s=RTCRtpReceiver.getCapabilities("audio").codecs;this._log.debug("sorting codecs",s,this.codecPreferences);const a=St(s,this.codecPreferences),[o]=n.pc.getTransceivers();this._log.debug("setting sorted codecs",a),o.setCodecPreferences(a);const l="ontrack"in n.pc?"ontrack":"onaddstream";return n.pc[l]=e=>{const i=t._remoteStream=e.stream||e.streams[0];"function"==typeof n.pc.getSenders&&(this._sender=n.pc.getSenders()[0]),t._isSinkSupported?t._onAddTrack(t,i):t._fallbackOnAddTrack(t,i),t._startPollingVolume()},n},In.prototype._maybeSetIceAggressiveNomination=function(e){return this.options.forceAggressiveIceNomination?function(e){return bt(window,window.navigator)?e.split("\n").filter(e=>-1===e.indexOf("a=ice-lite")).join("\n"):e}(e):e},In.prototype._setupChannel=function(){const e=this.version.pc;this.version.pc.onopen=()=>{this.status="open",this.onopen()},this.version.pc.onstatechange=()=>{this.version.pc&&"stable"===this.version.pc.readyState&&(this.status="open",this.onopen())},this.version.pc.onsignalingstatechange=()=>{const t=e.signalingState;this._log.info(`signalingState is "${t}"`),this.version.pc&&"stable"===this.version.pc.signalingState&&(this.status="open",this.onopen()),this.onsignalingstatechange(e.signalingState)},e.onconnectionstatechange=t=>{let n=e.connectionState;if(!n&&t&&t.target){const e=t.target;n=e.connectionState||e.connectionState_,this._log.info(`pc.connectionState not detected. Using target PC. State=${n}`)}n?this._log.info(`pc.connectionState is "${n}"`):this._log.warn(`onconnectionstatechange detected but state is "${n}"`),this.onpcconnectionstatechange(n),this._onMediaConnectionStateChange(n)},e.onicecandidate=e=>{const{candidate:t}=e;t&&(this._hasIceCandidates=!0,this.onicecandidate(t),this._setupRTCIceTransportListener()),this._log.info(`ICE Candidate: ${JSON.stringify(t)}`)},e.onicegatheringstatechange=()=>{const t=e.iceGatheringState;"gathering"===t?this._startIceGatheringTimeout():"complete"===t&&(this._stopIceGatheringTimeout(),this._hasIceCandidates||this._onIceGatheringFailure("none"),this._hasIceCandidates&&this._hasIceGatheringFailures&&this._startIceGatheringTimeout()),this._log.info(`pc.iceGatheringState is "${e.iceGatheringState}"`),this.onicegatheringstatechange(t)},e.oniceconnectionstatechange=()=>{this._log.info(`pc.iceConnectionState is "${e.iceConnectionState}"`),this.oniceconnectionstatechange(e.iceConnectionState),this._onMediaConnectionStateChange(e.iceConnectionState)}},In.prototype._initializeMediaStream=function(e){return"open"!==this.status&&("disconnected"===this.pstream.status?(this.onerror({info:{code:31e3,message:"Cannot establish connection. Client is disconnected",twilioError:new Ze.ConnectionDisconnected}}),this.close(),!1):(this.version=this._setupPeerConnection(e),this._setupChannel(),!0))},In.prototype._removeReconnectionListeners=function(){this.pstream&&(this.pstream.removeListener("answer",this._onAnswerOrRinging),this.pstream.removeListener("hangup",this._onHangup))},In.prototype._setupRTCDtlsTransportListener=function(){const e=this.getRTCDtlsTransport();if(!e||e.onstatechange)return;const t=()=>{this._log.info(`dtlsTransportState is "${e.state}"`),this.ondtlstransportstatechange(e.state)};t(),e.onstatechange=t},In.prototype._setupRTCIceTransportListener=function(){const e=this._getRTCIceTransport();e&&!e.onselectedcandidatepairchange&&(e.onselectedcandidatepairchange=()=>this.onselectedcandidatepairchange(e.getSelectedCandidatePair()))},In.prototype.iceRestart=function(){this._log.info("Attempting to restart ICE..."),this._hasIceCandidates=!1,this.version.createOffer(this.options.maxAverageBitrate,{iceRestart:!0}).then(()=>{this._removeReconnectionListeners(),this._onAnswerOrRinging=e=>{if(this._removeReconnectionListeners(),!e.sdp||"have-local-offer"!==this.version.pc.signalingState){const t=`Invalid state or param during ICE Restart:hasSdp:${!!e.sdp}, signalingState:${this.version.pc.signalingState}`;return void this._log.warn(t)}const t=this._maybeSetIceAggressiveNomination(e.sdp);this._answerSdp=t,"closed"!==this.status&&this.version.processAnswer(this.codecPreferences,t,null,e=>{const t=e&&e.message?e.message:e;this._log.error(`Failed to process answer during ICE Restart. Error: ${t}`)})},this._onHangup=()=>{this._log.info("Received hangup during ICE Restart"),this._removeReconnectionListeners()},this.pstream.on("answer",this._onAnswerOrRinging),this.pstream.on("hangup",this._onHangup),this.pstream.reinvite(this.version.getSDP(),this.callSid)}).catch(e=>{const t=e&&e.message?e.message:e;this._log.error(`Failed to createOffer during ICE Restart. Error: ${t}`),this.onfailed(t)})},In.prototype.makeOutgoingCall=function(e,t,n,i,r){if(!this._initializeMediaStream(i))return;const s=this;function a(){s.options&&s._setEncodingParameters(s.options.dscp),r(s.version.pc)}function o(e){const t=e.message||e;s.onerror({info:{code:31e3,message:`Error processing answer: ${t}`,twilioError:new et.ClientRemoteDescFailed}})}this.callSid=n,this._onAnswerOrRinging=e=>{if(!e.sdp)return;const t=this._maybeSetIceAggressiveNomination(e.sdp);s._answerSdp=t,"closed"!==s.status&&s.version.processAnswer(this.codecPreferences,t,a,o),s.pstream.removeListener("answer",s._onAnswerOrRinging),s.pstream.removeListener("ringing",s._onAnswerOrRinging)},this.pstream.on("answer",this._onAnswerOrRinging),this.pstream.on("ringing",this._onAnswerOrRinging),this.version.createOffer(this.options.maxAverageBitrate,{audio:!0},function(){"closed"!==s.status&&(t?s.pstream.reconnect(s.version.getSDP(),s.callSid,t):s.pstream.invite(s.version.getSDP(),s.callSid,e),s._setupRTCDtlsTransportListener())},function(e){const t=e.message||e;s.onerror({info:{code:31e3,message:`Error creating the offer: ${t}`,twilioError:new et.ClientLocalDescFailed}})})},In.prototype.answerIncomingCall=function(e,t,n,i){if(!this._initializeMediaStream(n))return;t=this._maybeSetIceAggressiveNomination(t),this._answerSdp=t.replace(/^a=setup:actpass$/gm,"a=setup:passive"),this.callSid=e;const r=this;this.version.processSDP(this.options.maxAverageBitrate,this.codecPreferences,t,{audio:!0},function(){"closed"!==r.status&&(r.pstream.answer(r.version.getSDP(),e),r.options&&r._setEncodingParameters(r.options.dscp),i(r.version.pc),r._setupRTCDtlsTransportListener())},function(e){const t=e.message||e;r.onerror({info:{code:31e3,message:`Error creating the answer: ${t}`,twilioError:new et.ClientRemoteDescFailed}})})},In.prototype.close=function(){this.version&&this.version.pc&&("closed"!==this.version.pc.signalingState&&this.version.pc.close(),this.version.pc=null),this.stream&&(this.mute(!1),this._stopStream()),this.stream=null,this._removeReconnectionListeners(),this._stopIceGatheringTimeout(),Promise.all(this._removeAudioOutputs()).catch(()=>{}),this._mediaStreamSource&&this._mediaStreamSource.disconnect(),this._inputAnalyser&&this._inputAnalyser.disconnect(),this._outputAnalyser&&this._outputAnalyser.disconnect(),this._inputAnalyser2&&this._inputAnalyser2.disconnect(),this._outputAnalyser2&&this._outputAnalyser2.disconnect(),this.status="closed",this.onclose()},In.prototype.reject=function(e){this.callSid=e},In.prototype.ignore=function(e){this.callSid=e},In.prototype.mute=function(e){if(this.isMuted=e,this.stream)if(this._sender&&this._sender.track)this._sender.track.enabled=!e;else{("function"==typeof this.stream.getAudioTracks?this.stream.getAudioTracks():this.stream.audioTracks).forEach(t=>{t.enabled=!e})}},In.prototype.getOrCreateDTMFSender=function(){if(this._dtmfSender||this._dtmfSenderUnsupported)return this._dtmfSender||null;const e=this,t=this.version.pc;if(!t)return this._log.warn("No RTCPeerConnection available to call createDTMFSender on"),null;if("function"==typeof t.getSenders&&("function"==typeof RTCDTMFSender||"function"==typeof RTCDtmfSender)){const e=t.getSenders().find(e=>e.dtmf);if(e)return this._log.info("Using RTCRtpSender#dtmf"),this._dtmfSender=e.dtmf,this._dtmfSender}if("function"==typeof t.createDTMFSender&&"function"==typeof t.getLocalStreams){const n=t.getLocalStreams().map(t=>{const n=e._getAudioTracks(t);return n&&n[0]})[0];return n?(this._log.info("Creating RTCDTMFSender"),this._dtmfSender=t.createDTMFSender(n),this._dtmfSender):(this._log.warn("No local audio MediaStreamTrack available on the RTCPeerConnection to pass to createDTMFSender"),null)}return this._log.info("RTCPeerConnection does not support RTCDTMFSender"),this._dtmfSenderUnsupported=!0,null},In.prototype.getRTCDtlsTransport=function(){const e=this.version&&this.version.pc&&"function"==typeof this.version.pc.getSenders&&this.version.pc.getSenders()[0];return e&&e.transport||null},In.prototype._canStopMediaStreamTrack=()=>"function"==typeof MediaStreamTrack.prototype.stop,In.prototype._getAudioTracks=e=>"function"==typeof e.getAudioTracks?e.getAudioTracks():e.audioTracks,In.prototype._getRTCIceTransport=function(){const e=this.getRTCDtlsTransport();return e&&e.iceTransport||null},In.protocol=Nn.test()?new Nn:null,In.enabled=Nn.test();let On=class{constructor(){this._promise=new Promise((e,t)=>{this._resolve=e,this._reject=t})}get promise(){return this._promise}reject(e){this._reject(e)}resolve(e){this._resolve(e)}};class Mn{constructor(){this._operations=[]}enqueue(e){const t=!!this._operations.length,n=new On;return this._operations.push({deferred:n,callback:e}),t||this._processQueue(),n.promise}_processQueue(){return Re(this,void 0,void 0,function*(){for(;this._operations.length;){const{deferred:t,callback:n}=this._operations[0];let i,r,s;try{i=yield n(),s=!0}catch(e){r=e}this._operations.shift(),s?t.resolve(i):t.reject(r)}})}}class zn{get reject(){return this._reject}get resolve(){return this._resolve}constructor(){this.promise=new Promise((e,t)=>{this._resolve=e,this._reject=t})}}class Fn{constructor(){this._eventEmitter=new Ae.EventEmitter}addEventListener(e,t){return this._eventEmitter.addListener(e,t)}dispatchEvent(e,...t){return this._eventEmitter.emit(e,...t)}removeEventListener(e,t){return this._eventEmitter.removeListener(e,t)}}class $n extends Fn{get destination(){return this._destination}get loop(){return this._loop}set loop(e){const t=this;e||!this.loop||this.paused||this._audioNode.addEventListener("ended",function e(){t._audioNode.removeEventListener("ended",e),t.pause()}),this._loop=e}get muted(){return 0===this._gainNode.gain.value}set muted(e){this._gainNode.gain.value=e?0:1}get paused(){return null===this._audioNode}get src(){return this._src}set src(e){this._load(e)}get srcObject(){return this._audioElement.srcObject}set srcObject(e){this._audioElement.srcObject=e}get sinkId(){return this._sinkId}constructor(e,t={},n={}){super(),this._audioNode=null,this._loop=!1,this._pendingPlayDeferreds=[],this._sinkId="default",this._src="","string"!=typeof t&&(n=t),this._audioContext=e,this._audioElement=new(n.AudioFactory||Audio),this._bufferPromise=this._createPlayDeferred().promise,this._destination=this._audioContext.destination,this._gainNode=this._audioContext.createGain(),this._gainNode.connect(this._destination),this._XMLHttpRequest=n.XMLHttpRequestFactory||XMLHttpRequest,this.addEventListener("canplaythrough",()=>{this._resolvePlayDeferreds()}),"string"==typeof t&&(this.src=t)}load(){this._load(this._src)}pause(){this.paused||(this._audioElement.pause(),this._audioNode.stop(),this._audioNode.disconnect(this._gainNode),this._audioNode=null,this._rejectPlayDeferreds(new Error("The play() request was interrupted by a call to pause().")))}play(){return Re(this,void 0,void 0,function*(){if(!this.paused){if(yield this._bufferPromise,!this.paused)return;throw new Error("The play() request was interrupted by a call to pause().")}this._audioNode=this._audioContext.createBufferSource(),this._audioNode.loop=this.loop,this._audioNode.addEventListener("ended",()=>{this._audioNode&&this._audioNode.loop||this.dispatchEvent("ended")});const e=yield this._bufferPromise;if(this.paused)throw new Error("The play() request was interrupted by a call to pause().");if(this._audioNode.buffer=e,this._audioNode.connect(this._gainNode),this._audioNode.start(),this._audioElement.srcObject)return this._audioElement.play()})}setSinkId(e){return Re(this,void 0,void 0,function*(){if("function"!=typeof this._audioElement.setSinkId)throw new Error("This browser does not support setSinkId.");if(e!==this.sinkId){if("default"===e)return this.paused||this._gainNode.disconnect(this._destination),this._audioElement.srcObject=null,this._destination=this._audioContext.destination,this._gainNode.connect(this._destination),void(this._sinkId=e);yield this._audioElement.setSinkId(e),this._audioElement.srcObject||(this._gainNode.disconnect(this._audioContext.destination),this._destination=this._audioContext.createMediaStreamDestination(),this._audioElement.srcObject=this._destination.stream,this._sinkId=e,this._gainNode.connect(this._destination))}})}_createPlayDeferred(){const e=new zn;return this._pendingPlayDeferreds.push(e),e}_load(e){this._src&&this._src!==e&&this.pause(),this._src=e,this._bufferPromise=new Promise((t,n)=>Re(this,void 0,void 0,function*(){if(!e)return this._createPlayDeferred().promise;const n=yield function(e,t,n){return Re(this,void 0,void 0,function*(){const i=new t;i.open("GET",n,!0),i.responseType="arraybuffer";const r=yield new Promise(e=>{i.addEventListener("load",e),i.send()});try{return e.decodeAudioData(r.target.response)}catch(s){return new Promise(t=>{e.decodeAudioData(r.target.response,t)})}})}(this._audioContext,this._XMLHttpRequest,e);this.dispatchEvent("canplaythrough"),t(n)}))}_rejectPlayDeferreds(e){const t=this._pendingPlayDeferreds;t.splice(0,t.length).forEach(({reject:t})=>t(e))}_resolvePlayDeferreds(e){const t=this._pendingPlayDeferreds;t.splice(0,t.length).forEach(({resolve:t})=>t(e))}}function Un(e,t,n){if(!(this instanceof Un))return new Un(e,t,n);if(!e||!t)throw new rt("name and url are required arguments");(n=Object.assign({AudioFactory:"undefined"!=typeof Audio?Audio:null,maxDuration:0,shouldLoop:!1},n)).AudioPlayer=n.audioContext?$n.bind($n,n.audioContext):n.AudioFactory,Object.defineProperties(this,{_Audio:{value:n.AudioPlayer},_activeEls:{value:new Map},_isSinkSupported:{value:null!==n.AudioFactory&&"function"==typeof n.AudioFactory.prototype.setSinkId},_maxDuration:{value:n.maxDuration},_maxDurationTimeout:{value:null,writable:!0},_operations:{value:new Mn},_playPromise:{value:null,writable:!0},_shouldLoop:{value:n.shouldLoop},_sinkIds:{value:["default"]},isPlaying:{enumerable:!0,get(){return!!this._playPromise}},name:{enumerable:!0,value:e},url:{enumerable:!0,value:t}}),this._Audio&&this._play(!0,!1)}function Hn(e){e&&(e.pause(),e.src="",e.srcObject=null,e.load())}Un.prototype._playAudioElement=function(e,t,n){const i=this._activeEls.get(e);if(!i)throw new rt(`sinkId: "${e}" doesn't have an audio element`);return i.muted=!!t,i.loop=!!n,i.play().then(()=>i).catch(t=>{throw Hn(i),this._activeEls.delete(e),t})},Un.prototype._play=function(e,t){this.isPlaying&&this._stop(),this._maxDuration>0&&(this._maxDurationTimeout=setTimeout(this._stop.bind(this),this._maxDuration)),t="boolean"==typeof t?t:this._shouldLoop;const n=this;return this._playPromise=Promise.all(this._sinkIds.map(function(i){if(!n._Audio)return Promise.resolve();let r=n._activeEls.get(i);return r?n._playAudioElement(i,e,t):(r=new n._Audio(n.url),"function"==typeof r.setAttribute&&r.setAttribute("crossorigin","anonymous"),new Promise(e=>{r.addEventListener("canplaythrough",e)}).then(()=>(n._isSinkSupported?r.setSinkId(i):Promise.resolve()).then(function(){return n._activeEls.set(i,r),n._playPromise?n._playAudioElement(i,e,t):Promise.resolve()})))}))},Un.prototype._stop=function(){this._activeEls.forEach((e,t)=>{this._sinkIds.includes(t)?(e.pause(),e.currentTime=0):(Hn(e),this._activeEls.delete(t))}),clearTimeout(this._maxDurationTimeout),this._playPromise=null,this._maxDurationTimeout=null},Un.prototype.setSinkIds=function(e){this._isSinkSupported&&(e=e.forEach?e:[e],[].splice.apply(this._sinkIds,[0,this._sinkIds.length].concat(e)))},Un.prototype.stop=function(){this._operations.enqueue(()=>(this._stop(),Promise.resolve()))},Un.prototype.play=function(){return this._operations.enqueue(()=>this._play())};class Wn extends Ae.EventEmitter{static get audioContext(){return Wn._audioContext}static get extension(){const e="undefined"!=typeof document?document.createElement("audio"):{canPlayType:!1};let t,n;try{t=e.canPlayType&&!!e.canPlayType("audio/mpeg").replace(/no/,"")}catch(i){t=!1}try{n=e.canPlayType&&!!e.canPlayType("audio/ogg;codecs='vorbis'").replace(/no/,"")}catch(i){n=!1}return n&&!t?"ogg":"mp3"}static get isSupported(){return Nn.test()}static get packageName(){return ot}static runPreflight(e,t){return new en(e,Object.assign({audioContext:Wn._getOrCreateAudioContext()},t))}static toString(){return"[Twilio.Device class]"}static get version(){return lt}static _getOrCreateAudioContext(){return Wn._audioContext||("undefined"!=typeof AudioContext?Wn._audioContext=new AudioContext:"undefined"!=typeof webkitAudioContext&&(Wn._audioContext=new webkitAudioContext)),Wn._audioContext}constructor(e,t={}){if(super(),this._activeCall=null,this._audio=null,this._audioProcessorEventObserver=null,this._callInputStream=null,this._calls=[],this._callSinkIds=["default"],this._chunderURIs=[],this._defaultOptions={allowIncomingWhileBusy:!1,closeProtection:!1,codecPreferences:[si.Codec.PCMU,si.Codec.Opus],dscp:!0,enableImprovedSignalingErrorPrecision:!1,forceAggressiveIceNomination:!1,logLevel:Ue.levels.ERROR,maxCallSignalingTimeoutMs:0,preflight:!1,sounds:{},tokenRefreshMs:1e4,voiceEventSidGenerator:Rn},this._edge=null,this._home=null,this._identity=null,this._log=new dt("Device"),this._makeCallPromise=null,this._options={},this._preferredURI=null,this._publisher=null,this._region=null,this._regTimer=null,this._shouldReRegister=!1,this._soundcache=new Map,this._state=Wn.State.Unregistered,this._stateEventMapping={[Wn.State.Destroyed]:Wn.EventName.Destroyed,[Wn.State.Unregistered]:Wn.EventName.Unregistered,[Wn.State.Registering]:Wn.EventName.Registering,[Wn.State.Registered]:Wn.EventName.Registered},this._stream=null,this._streamConnectedPromise=null,this._tokenWillExpireTimeout=null,this._createDefaultPayload=e=>{const t={aggressive_nomination:this._options.forceAggressiveIceNomination,browser_extension:this._isBrowserExtension,dscp:!!this._options.dscp,ice_restart_enabled:!0,platform:"undefined"!=typeof RTCIceGatherer?"ORTC":"WebRTC",sdk_version:lt};function n(e,n){n&&(t[e]=n)}if(e){const i=e.parameters.CallSid;n("call_sid",/^TJ/.test(i)?void 0:i),n("temp_call_sid",e.outboundConnectionId),n("audio_codec",e.codec),t.direction=e.direction}return n("gateway",this._stream&&this._stream.gateway),n("region",this._stream&&this._stream.region),t},this._onSignalingClose=()=>{this._stream=null,this._streamConnectedPromise=null},this._onSignalingConnected=e=>{var t;const n=function(e){return vn[e]||null}(e.region);if(this._edge=e.edge||yn[n]||e.region,this._region=n||e.region,this._home=e.home,null===(t=this._publisher)||void 0===t||t.setHost(xn(e.home)),e.token&&(this._identity=e.token.identity,"number"==typeof e.token.ttl&&"number"==typeof this._options.tokenRefreshMs)){const t=1e3*e.token.ttl,n=Math.max(0,t-this._options.tokenRefreshMs);this._tokenWillExpireTimeout=setTimeout(()=>{this._log.debug("#tokenWillExpire"),this.emit("tokenWillExpire",this),this._tokenWillExpireTimeout&&(clearTimeout(this._tokenWillExpireTimeout),this._tokenWillExpireTimeout=null)},n)}const i=this._getChunderws()||kn(this._edge);if(i.length>0){const[e]=i;this._preferredURI=wn(e)}else this._log.warn("Could not parse a preferred URI from the stream#connected event.");this._shouldReRegister&&this.register()},this._onSignalingError=e=>{if("object"!=typeof e)return void this._log.warn("Invalid signaling error payload",e);const{error:t,callsid:n,voiceeventsid:i}=e;if("object"!=typeof t||i)return void this._log.warn("Ignoring signaling error payload",{originalError:t,voiceeventsid:i});const r="string"==typeof n&&this._findCall(n)||void 0,{code:s,message:a}=t;let{twilioError:o}=t;if("number"==typeof s)if(31201===s)o=new Ve.AuthenticationFailed(t);else if(31204===s)o=new Ve.AccessTokenInvalid(t);else if(31205===s)this._stopRegistrationTimer(),o=new Ve.AccessTokenExpired(t);else{const e=it(!!this._options.enableImprovedSignalingErrorPrecision,s);void 0!==e&&(o=new e(t))}o||(this._log.error("Unknown signaling error: ",t),o=new Ke.UnknownError(a,t)),this._log.error("Received error: ",o),this._log.debug("#error",t),this.emit(Wn.EventName.Error,o,r)},this._onSignalingInvite=e=>Re(this,void 0,void 0,function*(){var t;const n=!!this._activeCall;if(n&&!this._options.allowIncomingWhileBusy)return void this._log.info("Device busy; ignoring incoming invite");if(!e.callsid||!e.sdp)return this._log.debug("#error",e),void this.emit(Wn.EventName.Error,new Ge.BadRequest("Malformed invite from gateway"));const i=e.parameters||{};i.CallSid=i.CallSid||e.callsid;const r=Object.assign({},xt(i.Params));let s;this._makeCallPromise=this._makeCall(r,{callParameters:i,enableImprovedSignalingErrorPrecision:!!this._options.enableImprovedSignalingErrorPrecision,offerSdp:e.sdp,reconnectToken:e.reconnect,voiceEventSidGenerator:this._options.voiceEventSidGenerator});try{s=yield this._makeCallPromise}finally{this._makeCallPromise=null}this._calls.push(s),s.once("accept",()=>{this._soundcache.get(Wn.SoundName.Incoming).stop(),this._publishNetworkChange()});const a=(null===(t=this._audio)||void 0===t?void 0:t.incoming())&&!n?()=>this._soundcache.get(Wn.SoundName.Incoming).play():()=>Promise.resolve();this._showIncomingCall(s,a)}),this._onSignalingOffline=()=>{this._log.info("Stream is offline"),this._edge=null,this._region=null,this._shouldReRegister=this.state!==Wn.State.Unregistered,this._setState(Wn.State.Unregistered)},this._onSignalingReady=()=>{this._log.info("Stream is ready"),this._setState(Wn.State.Registered)},this._publishNetworkChange=()=>{this._activeCall&&this._networkInformation&&this._publisher.info("network-information","network-change",{connection_type:this._networkInformation.type,downlink:this._networkInformation.downlink,downlinkMax:this._networkInformation.downlinkMax,effective_type:this._networkInformation.effectiveType,rtt:this._networkInformation.rtt},this._activeCall)},this._updateInputStream=e=>{const t=this._activeCall;return t&&!e?Promise.reject(new st("Cannot unset input device while a call is in progress.")):(this._callInputStream=e,t?t._setInputTracksFromStream(e):Promise.resolve())},this._updateSinkIds=(e,t)=>("ringtone"===e?this._updateRingtoneSinkIds(t):this._updateSpeakerSinkIds(t)).then(()=>{this._publisher.info("audio",`${e}-devices-set`,{audio_device_ids:t},this._activeCall)},n=>{throw this._publisher.error("audio",`${e}-devices-set-failed`,{audio_device_ids:t,message:n.message},this._activeCall),n}),this._setupLoglevel(t.logLevel),this._logOptions("constructor",t),this.updateToken(e),_t())throw new at("Microsoft Edge Legacy (https://support.microsoft.com/en-us/help/4533505/what-is-microsoft-edge-legacy) is deprecated and will not be able to connect to Twilio to make or receive calls after September 1st, 2020. Please see this documentation for a list of supported browsers https://www.twilio.com/docs/voice/client/javascript#supported-browsers");if(!Wn.isSupported&&t.ignoreBrowserSupport){if(window&&window.location&&"http:"===window.location.protocol)throw new at("twilio.js wasn't able to find WebRTC browser support.           This is most likely because this page is served over http rather than https,           which does not support WebRTC in many browsers. Please load this page over https and           try again.");throw new at("twilio.js 1.3+ SDKs require WebRTC browser support.         For more information, see <https://www.twilio.com/docs/api/client/twilio-js>.         If you have any questions about this announcement, please contact         Twilio Support at <help@twilio.com>.")}const n=globalThis,i=n.msBrowser||n.browser||n.chrome;if(this._isBrowserExtension=!!i&&!!i.runtime&&!!i.runtime.id||!!n.safari&&!!n.safari.extension,this._isBrowserExtension&&this._log.info("Running as browser extension."),navigator){const e=navigator;this._networkInformation=e.connection||e.mozConnection||e.webkitConnection}this._networkInformation&&"function"==typeof this._networkInformation.addEventListener&&this._networkInformation.addEventListener("change",this._publishNetworkChange),Wn._getOrCreateAudioContext(),Wn._audioContext&&(Wn._dialtonePlayer||(Wn._dialtonePlayer=new Dt(Wn._audioContext))),this._boundDestroy=this.destroy.bind(this),this._boundConfirmClose=this._confirmClose.bind(this),"undefined"!=typeof window&&window.addEventListener&&(window.addEventListener("unload",this._boundDestroy),window.addEventListener("pagehide",this._boundDestroy)),this.updateOptions(t)}get audio(){return this._audio}connect(){return Re(this,arguments,void 0,function*(e={}){if(this._log.debug(".connect",JSON.stringify(e)),this._throwIfDestroyed(),this._activeCall)throw new st("A Call is already active");let t,n,i;if(e.connectToken){try{const r=JSON.parse(decodeURIComponent(atob(e.connectToken)));t=r.customParameters,n=r.parameters,i=r.signalingReconnectToken}catch(l){throw new rt("Cannot parse connectToken")}if(!n||!n.CallSid||!i)throw new rt("Invalid connectToken")}let r=!1,s={};const a={enableImprovedSignalingErrorPrecision:!!this._options.enableImprovedSignalingErrorPrecision,rtcConfiguration:e.rtcConfiguration,voiceEventSidGenerator:this._options.voiceEventSidGenerator};let o;i&&n?(r=!0,a.callParameters=n,a.reconnectCallSid=n.CallSid,a.reconnectToken=i,s=t||s):s=e.params||s,this._makeCallPromise=this._makeCall(s,a,r);try{o=this._activeCall=yield this._makeCallPromise}finally{this._makeCallPromise=null}return this._calls.splice(0).forEach(e=>e.ignore()),this._soundcache.get(Wn.SoundName.Incoming).stop(),o.accept({rtcConstraints:e.rtcConstraints}),this._publishNetworkChange(),o})}get calls(){return this._calls}destroy(){var e;this._log.debug(".destroy"),this._log.debug("Rejecting any incoming calls");this._calls.slice(0).forEach(e=>e.reject()),this.disconnectAll(),this._stopRegistrationTimer(),this._destroyStream(),this._destroyAudioHelper(),null===(e=this._audioProcessorEventObserver)||void 0===e||e.destroy(),this._destroyPublisher(),this._networkInformation&&"function"==typeof this._networkInformation.removeEventListener&&this._networkInformation.removeEventListener("change",this._publishNetworkChange),"undefined"!=typeof window&&window.removeEventListener&&(window.removeEventListener("beforeunload",this._boundConfirmClose),window.removeEventListener("unload",this._boundDestroy),window.removeEventListener("pagehide",this._boundDestroy)),this._setState(Wn.State.Destroyed),Ae.EventEmitter.prototype.removeAllListeners.call(this)}disconnectAll(){this._log.debug(".disconnectAll");this._calls.splice(0).forEach(e=>e.disconnect()),this._activeCall&&this._activeCall.disconnect()}get edge(){return this._edge}get home(){return this._home}get identity(){return this._identity}get isBusy(){return!!this._activeCall}register(){return Re(this,void 0,void 0,function*(){if(this._log.debug(".register"),this.state!==Wn.State.Unregistered)throw new st(`Attempt to register when device is in state "${this.state}". Must be "${Wn.State.Unregistered}".`);this._shouldReRegister=!1,this._setState(Wn.State.Registering),yield this._streamConnectedPromise||this._setupStream(),yield this._sendPresence(!0),yield kt(this,Wn.State.Registered,Wn.State.Unregistered)})}get state(){return this._state}get token(){return this._token}toString(){return"[Twilio.Device instance]"}unregister(){return Re(this,void 0,void 0,function*(){if(this._log.debug(".unregister"),this.state!==Wn.State.Registered)throw new st(`Attempt to unregister when device is in state "${this.state}". Must be "${Wn.State.Registered}".`);this._shouldReRegister=!1;const e=yield this._streamConnectedPromise,t=new Promise(t=>{e.on("offline",t)});yield this._sendPresence(!1),yield t})}updateOptions(e={}){if(this._logOptions("updateOptions",e),this.state===Wn.State.Destroyed)throw new st(`Attempt to "updateOptions" when device is in state "${this.state}".`);this._options=Object.assign(Object.assign(Object.assign({},this._defaultOptions),this._options),e);const t=new Set(this._chunderURIs),n=this._chunderURIs=(this._getChunderws()||kn(this._options.edge)).map(wn);let i=t.size!==n.length;if(!i)for(const r of n)if(!t.has(r)){i=!0;break}if(this.isBusy&&i)throw new st("Cannot change Edge while on an active Call");this._setupLoglevel(this._options.logLevel);for(const r of Object.keys(Wn._defaultSounds)){const e=Wn._defaultSounds[r],t=`${ct}/${e.filename}.${Wn.extension}?cache=${lt}`,n=this._options.sounds&&this._options.sounds[r]||t,i=new(this._options.Sound||Un)(r,n,{audioContext:this._options.disableAudioContextSounds?null:Wn.audioContext,maxDuration:e.maxDuration,shouldLoop:e.shouldLoop});this._soundcache.set(r,i)}this._setupAudioHelper(),this._setupPublisher(),i&&this._streamConnectedPromise&&this._setupStream(),"undefined"!=typeof window&&"function"==typeof window.addEventListener&&this._options.closeProtection&&(window.removeEventListener("beforeunload",this._boundConfirmClose),window.addEventListener("beforeunload",this._boundConfirmClose))}updateToken(e){if(this._log.debug(".updateToken"),this.state===Wn.State.Destroyed)throw new st(`Attempt to "updateToken" when device is in state "${this.state}".`);if("string"!=typeof e)throw new rt('Parameter "token" must be of type "string".');this._token=e,this._stream&&this._stream.setToken(this._token),this._publisher&&this._publisher.setToken(this._token)}_confirmClose(e){if(!this._activeCall)return"";const t=this._options.closeProtection||!1,n="string"!=typeof t?"A call is currently in-progress. Leaving or reloading this page will end the call.":t;return(e||window.event).returnValue=n,n}_destroyAudioHelper(){this._audio&&(this._audio._destroy(),this._audio=null)}_destroyPublisher(){this._publisher&&(this._publisher=null)}_destroyStream(){this._stream&&(this._stream.removeListener("close",this._onSignalingClose),this._stream.removeListener("connected",this._onSignalingConnected),this._stream.removeListener("error",this._onSignalingError),this._stream.removeListener("invite",this._onSignalingInvite),this._stream.removeListener("offline",this._onSignalingOffline),this._stream.removeListener("ready",this._onSignalingReady),this._stream.destroy(),this._stream=null),this._onSignalingOffline(),this._streamConnectedPromise=null}_findCall(e){return this._calls.find(t=>t.parameters.CallSid===e||t.outboundConnectionId===e)||null}_getChunderws(){return"string"==typeof this._options.chunderw?[this._options.chunderw]:Array.isArray(this._options.chunderw)?this._options.chunderw:null}_logOptions(e,t={}){const n=["allowIncomingWhileBusy","appName","appVersion","closeProtection","codecPreferences","disableAudioContextSounds","dscp","edge","enableImprovedSignalingErrorPrecision","forceAggressiveIceNomination","logLevel","maxAverageBitrate","maxCallSignalingTimeoutMs","sounds","tokenRefreshMs"],i=["RTCPeerConnection","enumerateDevices","getUserMedia","MediaStream"];if("object"==typeof t){const r=Object.assign({},t);Object.keys(r).forEach(e=>{n.includes(e)||i.includes(e)||delete r[e],i.includes(e)&&(r[e]=!0)}),this._log.debug(`.${e}`,JSON.stringify(r))}}_makeCall(e,t){return Re(this,arguments,void 0,function*(e,t,n=!1){var i;const r=null===(i=this._audio)||void 0===i?void 0:i._getInputDevicePromise();r&&(this._log.debug("inputDevicePromise detected, waiting..."),yield r,this._log.debug("inputDevicePromise resolved"));const s={audioHelper:this._audio,onIgnore:()=>{this._soundcache.get(Wn.SoundName.Incoming).stop()},pstream:yield this._streamConnectedPromise||this._setupStream(),publisher:this._publisher,soundcache:this._soundcache};t=Object.assign({MediaStream:this._options.MediaStream,RTCPeerConnection:this._options.RTCPeerConnection,beforeAccept:e=>{this._activeCall&&this._activeCall!==e&&(this._activeCall.disconnect(),this._removeCall(this._activeCall))},codecPreferences:this._options.codecPreferences,customSounds:this._options.sounds,dialtonePlayer:Wn._dialtonePlayer,dscp:this._options.dscp,forceAggressiveIceNomination:this._options.forceAggressiveIceNomination,getInputStream:()=>this._options.fileInputStream||this._callInputStream,getSinkIds:()=>this._callSinkIds,maxAverageBitrate:this._options.maxAverageBitrate,preflight:this._options.preflight,rtcConstraints:this._options.rtcConstraints,shouldPlayDisconnect:()=>{var e;return null===(e=this._audio)||void 0===e?void 0:e.disconnect()},twimlParams:e,voiceEventSidGenerator:this._options.voiceEventSidGenerator},t);const a=()=>{this._stream?null===this._activeCall&&0===this._calls.length&&this._stream.updatePreferredURI(null):this._log.warn("UnsetPreferredUri called without a stream")},o=new(this._options.Call||si)(s,t);return this._publisher.info("settings","init",{MediaStream:!!this._options.MediaStream,RTCPeerConnection:!!this._options.RTCPeerConnection,enumerateDevices:!!this._options.enumerateDevices,getUserMedia:!!this._options.getUserMedia},o),o.once("accept",()=>{var e,t,i;this._stream.updatePreferredURI(this._preferredURI),this._removeCall(o),this._activeCall=o,this._audio&&this._audio._maybeStartPollingVolume(),o.direction===si.CallDirection.Outgoing&&(null===(e=this._audio)||void 0===e?void 0:e.outgoing())&&!n&&this._soundcache.get(Wn.SoundName.Outgoing).play();const r={edge:this._edge||this._region};this._options.edge&&(r.selected_edge=Array.isArray(this._options.edge)?this._options.edge:[this._options.edge]),this._publisher.info("settings","edge",r,o),(null===(t=this._audio)||void 0===t?void 0:t.processedStream)&&(null===(i=this._audioProcessorEventObserver)||void 0===i||i.emit("enabled"))}),o.addListener("error",e=>{"closed"===o.status()&&(this._removeCall(o),a()),this._audio&&this._audio._maybeStopPollingVolume(),this._maybeStopIncomingSound()}),o.once("cancel",()=>{this._log.info(`Canceled: ${o.parameters.CallSid}`),this._removeCall(o),a(),this._audio&&this._audio._maybeStopPollingVolume(),this._maybeStopIncomingSound()}),o.once("disconnect",()=>{this._audio&&this._audio._maybeStopPollingVolume(),this._removeCall(o),a(),this._maybeStopIncomingSound()}),o.once("reject",()=>{this._log.info(`Rejected: ${o.parameters.CallSid}`),this._audio&&this._audio._maybeStopPollingVolume(),this._removeCall(o),a(),this._maybeStopIncomingSound()}),o.on("transportClose",()=>{o.status()===si.State.Pending&&(this._audio&&this._audio._maybeStopPollingVolume(),this._removeCall(o),this._maybeStopIncomingSound())}),o})}_maybeStopIncomingSound(){this._calls.length||this._soundcache.get(Wn.SoundName.Incoming).stop()}_removeCall(e){this._activeCall===e&&(this._activeCall=null,this._makeCallPromise=null);for(let t=this._calls.length-1;t>=0;t--)e===this._calls[t]&&this._calls.splice(t,1)}_sendPresence(e){return Re(this,void 0,void 0,function*(){const t=yield this._streamConnectedPromise;t&&(t.register({audio:e}),e?this._startRegistrationTimer():this._stopRegistrationTimer())})}_setState(e){if(e===this.state)return;this._state=e;const t=this._stateEventMapping[e];this._log.debug(`#${t}`),this.emit(t)}_setupAudioHelper(){this._audioProcessorEventObserver||(this._audioProcessorEventObserver=new Pt,this._audioProcessorEventObserver.on("event",({name:e,group:t})=>{this._publisher.info(t,e,{},this._activeCall)}));const e={audioContext:Wn.audioContext,audioProcessorEventObserver:this._audioProcessorEventObserver,beforeSetInputDevice:()=>this._makeCallPromise?(this._log.debug("beforeSetInputDevice pause detected"),this._makeCallPromise):(this._log.debug("beforeSetInputDevice pause not detected, setting default"),Promise.resolve()),enumerateDevices:this._options.enumerateDevices,getUserMedia:this._options.getUserMedia||Ln};if(this._audio)return this._log.info("Found existing audio helper; updating options..."),void this._audio._updateUserOptions(e);this._audio=new(this._options.AudioHelper||jt)(this._updateSinkIds,this._updateInputStream,e),this._audio.on("deviceChange",e=>{const t=this._activeCall,n=e.map(e=>e.deviceId);this._publisher.info("audio","device-change",{lost_active_device_ids:n},t),t&&t._mediaHandler._onInputDevicesChanged()})}_setupLoglevel(e){const t="number"==typeof e||"string"==typeof e?e:Ue.levels.ERROR;this._log.setDefaultLevel(t),this._log.info("Set logger default level to",t)}_setupPublisher(){this._publisher&&(this._log.info("Found existing publisher; destroying..."),this._destroyPublisher());const e={defaultPayload:this._createDefaultPayload,metadata:{app_name:this._options.appName,app_version:this._options.appVersion}};return this._options.eventgw&&(e.host=this._options.eventgw),this._home&&(e.host=xn(this._home)),this._publisher=new(this._options.Publisher||Lt)("twilio-js-sdk",this.token,e),!1===this._options.publishEvents?this._publisher.disable():this._publisher.on("error",e=>{this._log.warn("Cannot connect to insights.",e)}),this._publisher}_setupStream(){return this._stream&&(this._log.info("Found existing stream; destroying..."),this._destroyStream()),this._log.info("Setting up VSP"),this._stream=new(this._options.PStream||dn)(this.token,this._chunderURIs,{backoffMaxMs:this._options.backoffMaxMs,maxPreferredDurationMs:this._options.maxCallSignalingTimeoutMs}),this._stream.addListener("close",this._onSignalingClose),this._stream.addListener("connected",this._onSignalingConnected),this._stream.addListener("error",this._onSignalingError),this._stream.addListener("invite",this._onSignalingInvite),this._stream.addListener("offline",this._onSignalingOffline),this._stream.addListener("ready",this._onSignalingReady),this._streamConnectedPromise=kt(this._stream,"connected","close").then(()=>this._stream)}_showIncomingCall(e,t){let n;return Promise.race([t(),new Promise((e,t)=>{n=setTimeout(()=>{t(new Error("Playing incoming ringtone took too long; it might not play. Continuing execution..."))},2e3)})]).catch(e=>{this._log.warn(e.message)}).then(()=>{clearTimeout(n),this._log.debug("#incoming",JSON.stringify({customParameters:e.customParameters,parameters:e.parameters})),this.emit(Wn.EventName.Incoming,e)})}_startRegistrationTimer(){this._stopRegistrationTimer(),this._regTimer=setTimeout(()=>{this._sendPresence(!0)},3e4)}_stopRegistrationTimer(){this._regTimer&&clearTimeout(this._regTimer)}_throwIfDestroyed(){if(this.state===Wn.State.Destroyed)throw new st("Device has been destroyed.")}_updateRingtoneSinkIds(e){return Promise.resolve(this._soundcache.get(Wn.SoundName.Incoming).setSinkIds(e))}_updateSpeakerSinkIds(e){Array.from(this._soundcache.entries()).filter(e=>e[0]!==Wn.SoundName.Incoming).forEach(t=>t[1].setSinkIds(e)),this._callSinkIds=e;const t=this._activeCall;return t?t._setSinkIds(e):Promise.resolve()}}var Vn,Bn,qn,Gn;Wn._defaultSounds={disconnect:{filename:"disconnect",maxDuration:3e3},dtmf0:{filename:"dtmf-0",maxDuration:1e3},dtmf1:{filename:"dtmf-1",maxDuration:1e3},dtmf2:{filename:"dtmf-2",maxDuration:1e3},dtmf3:{filename:"dtmf-3",maxDuration:1e3},dtmf4:{filename:"dtmf-4",maxDuration:1e3},dtmf5:{filename:"dtmf-5",maxDuration:1e3},dtmf6:{filename:"dtmf-6",maxDuration:1e3},dtmf7:{filename:"dtmf-7",maxDuration:1e3},dtmf8:{filename:"dtmf-8",maxDuration:1e3},dtmf9:{filename:"dtmf-9",maxDuration:1e3},dtmfh:{filename:"dtmf-hash",maxDuration:1e3},dtmfs:{filename:"dtmf-star",maxDuration:1e3},incoming:{filename:"incoming",shouldLoop:!0},outgoing:{filename:"outgoing",maxDuration:3e3}},Vn=Wn||(Wn={}),(Bn=Vn.EventName||(Vn.EventName={})).Error="error",Bn.Incoming="incoming",Bn.Destroyed="destroyed",Bn.Unregistered="unregistered",Bn.Registering="registering",Bn.Registered="registered",Bn.TokenWillExpire="tokenWillExpire",(qn=Vn.State||(Vn.State={})).Destroyed="destroyed",qn.Unregistered="unregistered",qn.Registering="registering",qn.Registered="registered",(Gn=Vn.SoundName||(Vn.SoundName={})).Incoming="incoming",Gn.Outgoing="outgoing",Gn.Disconnect="disconnect",Gn.Dtmf0="dtmf0",Gn.Dtmf1="dtmf1",Gn.Dtmf2="dtmf2",Gn.Dtmf3="dtmf3",Gn.Dtmf4="dtmf4",Gn.Dtmf5="dtmf5",Gn.Dtmf6="dtmf6",Gn.Dtmf7="dtmf7",Gn.Dtmf8="dtmf8",Gn.Dtmf9="dtmf9",Gn.DtmfS="dtmfs",Gn.DtmfH="dtmfh";class Qn{constructor(e,t=!1){let n;this.deleted=!1;const i=e.candidate.split("network-cost ");i[1]&&(n=parseInt(i[1],10)),this.candidateType=e.type,this.ip=e.ip||e.address,this.isRemote=t,this.networkCost=n,this.port=e.port,this.priority=e.priority,this.protocol=e.protocol,this.relatedAddress=e.relatedAddress,this.relatedPort=e.relatedPort,this.tcpType=e.tcpType,this.transportId=e.sdpMid}toPayload(){return{candidate_type:this.candidateType,deleted:this.deleted,ip:this.ip,is_remote:this.isRemote,"network-cost":this.networkCost,port:this.port,priority:this.priority,protocol:this.protocol,related_address:this.relatedAddress,related_port:this.relatedPort,tcp_type:this.tcpType,transport_id:this.transportId}}}const Jn=94.768;function Kn(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)&&e>=0}var Xn={calculate:function(e,t,n){if("number"!=typeof e||"number"!=typeof t||"number"!=typeof n||!Kn(e)||!Kn(t)||!Kn(n))return null;const i=e+2*t+10;let r=0;switch(!0){case i<160:r=Jn-i/40;break;case i<1e3:r=Jn-(i-120)/10}if(!0==n<=r/2.5)r=Math.max(r-2.5*n,6.52);else r=0;return 1+.035*r+7e-6*r*(r-60)*(100-r)},isNonNegativeNumber:Kn};const Yn={audioInputLevel:{minStandardDeviation:327.67,sampleCount:10},audioOutputLevel:{minStandardDeviation:327.67,sampleCount:10},bytesReceived:{clearCount:2,min:1,raiseCount:3,sampleCount:3},bytesSent:{clearCount:2,min:1,raiseCount:3,sampleCount:3},jitter:{max:30},mos:{min:3},packetsLostFraction:[{max:1},{clearValue:1,maxAverage:3,sampleCount:7}],rtt:{max:400}};class Zn extends Ae.EventEmitter{constructor(e){super(),this._activeWarnings=new Map,this._currentStreaks=new Map,this._inputVolumes=[],this._outputVolumes=[],this._sampleBuffer=[],this._supplementalSampleBuffers={audioInputLevel:[],audioOutputLevel:[]},this._warningsEnabled=!0,e=e||{},this._getRTCStats=e.getRTCStats||Kt,this._mos=e.Mos||Xn,this._peerConnection=e.peerConnection,this._thresholds=Object.assign(Object.assign({},Yn),e.thresholds);const t=Object.values(this._thresholds).map(e=>e.sampleCount).filter(e=>!!e);this._maxSampleCount=Math.max(5,...t),this._peerConnection&&this.enable(this._peerConnection)}addVolumes(e,t){this._inputVolumes.push(e),this._outputVolumes.push(t)}disable(){return this._sampleInterval&&(clearInterval(this._sampleInterval),delete this._sampleInterval),this}disableWarnings(){return this._warningsEnabled&&this._activeWarnings.clear(),this._warningsEnabled=!1,this}enable(e){if(e){if(this._peerConnection&&e!==this._peerConnection)throw new rt("Attempted to replace an existing PeerConnection in StatsMonitor.enable");this._peerConnection=e}if(!this._peerConnection)throw new rt("Can not enable StatsMonitor without a PeerConnection");return this._sampleInterval=this._sampleInterval||setInterval(this._fetchSample.bind(this),1e3),this}enableWarnings(){return this._warningsEnabled=!0,this}hasActiveWarning(e,t){const n=`${e}:${t}`;return!!this._activeWarnings.get(n)}_addSample(e){const t=this._sampleBuffer;t.push(e),t.length>this._maxSampleCount&&t.splice(0,t.length-this._maxSampleCount)}_clearWarning(e,t,n){const i=`${e}:${t}`,r=this._activeWarnings.get(i);!r||Date.now()-r.timeRaised<5e3||(this._activeWarnings.delete(i),this.emit("warning-cleared",Object.assign(Object.assign({},n),{name:e,threshold:{name:t,value:this._thresholds[e][t]}})))}_createSample(e,t){const n=t&&t.totals.bytesSent||0,i=t&&t.totals.bytesReceived||0,r=t&&t.totals.packetsSent||0,s=t&&t.totals.packetsReceived||0,a=t&&t.totals.packetsLost||0,o=e.bytesSent-n,l=e.bytesReceived-i,c=e.packetsSent-r,u=e.packetsReceived-s,d=e.packetsLost-a,h=u+d,p=h>0?d/h*100:0,f=e.packetsReceived+e.packetsLost,m=f>0?e.packetsLost/f*100:100,g="number"!=typeof e.rtt&&t?t.rtt:e.rtt,v=this._inputVolumes.splice(0);this._supplementalSampleBuffers.audioInputLevel.push(v);const y=this._outputVolumes.splice(0);return this._supplementalSampleBuffers.audioOutputLevel.push(y),{audioInputLevel:Math.round(gt(v)),audioOutputLevel:Math.round(gt(y)),bytesReceived:l,bytesSent:o,codecName:e.codecName,jitter:e.jitter,mos:this._mos.calculate(g,e.jitter,t&&p),packetsLost:d,packetsLostFraction:p,packetsReceived:u,packetsSent:c,rtt:g,timestamp:e.timestamp,totals:{bytesReceived:e.bytesReceived,bytesSent:e.bytesSent,packetsLost:e.packetsLost,packetsLostFraction:m,packetsReceived:e.packetsReceived,packetsSent:e.packetsSent}}}_fetchSample(){this._getSample().then(e=>{this._addSample(e),this._raiseWarnings(),this.emit("sample",e)}).catch(e=>{this.disable(),this.emit("error",e)})}_getSample(){return this._getRTCStats(this._peerConnection).then(e=>{let t=null;return this._sampleBuffer.length&&(t=this._sampleBuffer[this._sampleBuffer.length-1]),this._createSample(e,t)})}_raiseWarning(e,t,n){const i=`${e}:${t}`;if(this._activeWarnings.has(i))return;this._activeWarnings.set(i,{timeRaised:Date.now()});const r=this._thresholds[e];let s;if(Array.isArray(r)){const e=r.find(e=>t in e);e&&(s=e[t])}else s=this._thresholds[e][t];this.emit("warning",Object.assign(Object.assign({},n),{name:e,threshold:{name:t,value:s}}))}_raiseWarnings(){this._warningsEnabled&&Object.keys(this._thresholds).forEach(e=>this._raiseWarningsForStat(e))}_raiseWarningsForStat(e){(Array.isArray(this._thresholds[e])?this._thresholds[e]:[this._thresholds[e]]).forEach(t=>{const n=this._sampleBuffer,i=t.clearCount||0,r=t.raiseCount||3,s=t.sampleCount||this._maxSampleCount;let a=n.slice(-s);const o=a.map(t=>t[e]);if(o.some(e=>null==e))return;let l;if("number"==typeof t.max&&(l=function(e,t){return t.reduce((t,n)=>t+(n>e?1:0),0)}(t.max,o),l>=r?this._raiseWarning(e,"max",{values:o,samples:a}):l<=i&&this._clearWarning(e,"max",{values:o,samples:a})),"number"==typeof t.min&&(l=function(e,t){return t.reduce((t,n)=>t+(n<e?1:0),0)}(t.min,o),l>=r?this._raiseWarning(e,"min",{values:o,samples:a}):l<=i&&this._clearWarning(e,"min",{values:o,samples:a})),"number"==typeof t.maxDuration&&n.length>1){a=n.slice(-2);const i=a[0][e],r=a[1][e],s=this._currentStreaks.get(e)||0,o=i===r?s+1:0;this._currentStreaks.set(e,o),o>=t.maxDuration?this._raiseWarning(e,"maxDuration",{value:o}):0===o&&this._clearWarning(e,"maxDuration",{value:s})}if("number"==typeof t.minStandardDeviation){const n=this._supplementalSampleBuffers[e];if(!n||n.length<t.sampleCount)return;n.length>t.sampleCount&&n.splice(0,n.length-t.sampleCount);const i=function(e){if(e.length<=0)return null;const t=e.reduce((e,t)=>e+t,0)/e.length,n=e.map(e=>Math.pow(e-t,2));return Math.sqrt(n.reduce((e,t)=>e+t,0)/n.length)}(function(e){return e.reduce((e,t)=>[...e,...t],[])}(n.slice(-s)));if("number"!=typeof i)return;i<t.minStandardDeviation?this._raiseWarning(e,"minStandardDeviation",{value:i}):this._clearWarning(e,"minStandardDeviation",{value:i})}[["maxAverage",(e,t)=>e>t],["minAverage",(e,t)=>e<t]].forEach(([n,i])=>{if("number"==typeof t[n]&&o.length>=s){const r=gt(o);i(r,t[n])?this._raiseWarning(e,n,{values:o,samples:a}):i(r,t.clearValue||t[n])||this._clearWarning(e,n,{values:o,samples:a})}})})}}const ei={factor:1.1,jitter:.5,max:3e4,min:1},ti={disconnect:!0,info:{code:31003,message:"Connection with Twilio was interrupted.",twilioError:new et.ConnectionError}},ni={packetsLostFraction:{max:"packet-loss",maxAverage:"packets-lost-fraction"}},ii={audioInputLevel:"audio-input-level",audioOutputLevel:"audio-output-level",bytesReceived:"bytes-received",bytesSent:"bytes-sent",jitter:"jitter",mos:"mos",rtt:"rtt"},ri={max:"high-",maxAverage:"high-",maxDuration:"constant-",min:"low-",minStandardDeviation:"constant-"};class si extends Ae.EventEmitter{get direction(){return this._direction}get codec(){return this._codec}get connectToken(){const e=this._signalingReconnectToken,t=this.parameters&&this.parameters.CallSid?this.parameters.CallSid:void 0;if(!e||!t)return;const n=this.customParameters&&"function"==typeof this.customParameters.keys?Array.from(this.customParameters.keys()).reduce((e,t)=>(e[t]=this.customParameters.get(t),e),{}):{},i=this.parameters||{};return btoa(encodeURIComponent(JSON.stringify({customParameters:n,parameters:i,signalingReconnectToken:e})))}constructor(e,t){super(),this.parameters={},this._inputVolumeStreak=0,this._isAnswered=!1,this._isCancelled=!1,this._isRejected=!1,this._latestInputVolume=0,this._latestOutputVolume=0,this._log=new dt("Call"),this._mediaStatus=si.State.Pending,this._messages=new Map,this._metricsSamples=[],this._options={MediaHandler:In,MediaStream:null,enableImprovedSignalingErrorPrecision:!1,offerSdp:null,shouldPlayDisconnect:()=>!0,voiceEventSidGenerator:Rn},this._outputVolumeStreak=0,this._shouldSendHangup=!0,this._signalingStatus=si.State.Pending,this._soundcache=new Map,this._status=si.State.Pending,this._wasConnected=!1,this.toString=()=>"[Twilio.Call instance]",this._emitWarning=(e,t,n,i,r,s)=>{const a=`${e}warning${r?"-cleared":"-raised"}`;if("constant-audio-input-level"===t&&this.isMuted())return;let o=r?"info":"warning";"constant-audio-output-level"===t&&(o="info");const l={threshold:n};if(i&&(i instanceof Array?l.values=i.map(e=>"number"==typeof e?Math.round(100*e)/100:i):l.value=i),this._publisher.post(o,a,t,{data:l},this),"constant-audio-output-level"!==t){const e=r?"warning-cleared":"warning";this._log.debug(`#${e}`,t),this.emit(e,t,s&&!r?s:null)}},this._onAck=e=>{const{acktype:t,callsid:n,voiceeventsid:i}=e;this.parameters.CallSid===n?"message"===t&&this._onMessageSent(i):this._log.warn(`Received ack from a different callsid: ${n}`)},this._onAnswer=e=>{"string"==typeof e.reconnect&&(this._signalingReconnectToken=e.reconnect),this._isAnswered&&this._status!==si.State.Reconnecting||(this._setCallSid(e),this._isAnswered=!0,this._maybeTransitionToOpen())},this._onCancel=e=>{const t=e.callsid;this.parameters.CallSid===t&&(this._isCancelled=!0,this._publisher.info("connection","cancel",null,this),this._cleanupEventListeners(),this._mediaHandler.close(),this._status=si.State.Closed,this._log.debug("#cancel"),this.emit("cancel"),this._pstream.removeListener("cancel",this._onCancel))},this._onConnected=()=>{this._log.info("Received connected from pstream"),this._signalingReconnectToken&&this._mediaHandler.version&&this._pstream.reconnect(this._mediaHandler.version.getSDP(),this.parameters.CallSid,this._signalingReconnectToken)},this._onHangup=e=>{if(this.status()!==si.State.Closed){if(e.callsid&&(this.parameters.CallSid||this.outboundConnectionId)){if(e.callsid!==this.parameters.CallSid&&e.callsid!==this.outboundConnectionId)return}else if(e.callsid)return;if(this._log.info("Received HANGUP from gateway"),e.error){const t=e.error.code,n=it(this._options.enableImprovedSignalingErrorPrecision,t),i=void 0!==n?new n(e.error.message):new Ke.ConnectionError("Error sent from gateway in HANGUP",e.error);this._log.error("Received an error from the gateway:",i),this._log.debug("#error",i),this.emit("error",i)}this._shouldSendHangup=!1,this._publisher.info("connection","disconnected-by-remote",null,this),this._disconnect(null,!0),this._cleanupEventListeners()}},this._onMediaFailure=e=>{const{ConnectionDisconnected:t,ConnectionFailed:n,IceGatheringFailed:i,LowBytes:r}=si.MediaFailure,s=e===n||e===i;if(!bt(window,window.navigator)&&e===n)return this._mediaHandler.onerror(ti);if(this._mediaStatus===si.State.Reconnecting){if(s){if(Date.now()-this._mediaReconnectStartTime>ei.max)return this._log.warn("Exceeded max ICE retries"),this._mediaHandler.onerror(ti);try{this._mediaReconnectBackoff.backoff()}catch(c){if(!c.message||"Backoff in progress."!==c.message)throw c}}return}const a=this._mediaHandler.version.pc,o=a&&"disconnected"===a.iceConnectionState,l=this._monitor.hasActiveWarning("bytesSent","min")||this._monitor.hasActiveWarning("bytesReceived","min");if(e===r&&o||e===t&&l||s){const e=new et.ConnectionError("Media connection failed.");this._log.warn("ICE Connection disconnected."),this._publisher.warn("connection","error",e,this),this._publisher.info("connection","reconnecting",null,this),this._mediaReconnectStartTime=Date.now(),this._status=si.State.Reconnecting,this._mediaStatus=si.State.Reconnecting,this._mediaReconnectBackoff.reset(),this._mediaReconnectBackoff.backoff(),this._log.debug("#reconnecting"),this.emit("reconnecting",e)}},this._onMediaReconnected=()=>{this._mediaStatus===si.State.Reconnecting&&(this._log.info("ICE Connection reestablished."),this._mediaStatus=si.State.Open,this._signalingStatus===si.State.Open&&(this._publisher.info("connection","reconnected",null,this),this._log.debug("#reconnected"),this.emit("reconnected"),this._status=si.State.Open))},this._onMessageReceived=e=>{const{callsid:t,content:n,contenttype:i,messagetype:r,voiceeventsid:s}=e;if(this.parameters.CallSid!==t)return void this._log.warn(`Received a message from a different callsid: ${t}`);const a={content:n,contentType:i,messageType:r,voiceEventSid:s};this._publisher.info("call-message",r,{content_type:i,event_type:"received",voice_event_sid:s},this),this._log.debug("#messageReceived",JSON.stringify(a)),this.emit("messageReceived",a)},this._onMessageSent=e=>{if(!this._messages.has(e))return void this._log.warn(`Received a messageSent with a voiceEventSid that doesn't exists: ${e}`);const t=this._messages.get(e);this._messages.delete(e),this._publisher.info("call-message",null==t?void 0:t.messageType,{content_type:null==t?void 0:t.contentType,event_type:"sent",voice_event_sid:e},this),this._log.debug("#messageSent",JSON.stringify(t)),this.emit("messageSent",t)},this._onRinging=e=>{if(this._setCallSid(e),this._status!==si.State.Connecting&&this._status!==si.State.Ringing)return;const t=!!e.sdp;this._status=si.State.Ringing,this._publisher.info("connection","outgoing-ringing",{hasEarlyMedia:t},this),this._log.debug("#ringing"),this.emit("ringing",t)},this._onRTCSample=e=>{const t=Object.assign(Object.assign({},e),{inputVolume:this._latestInputVolume,outputVolume:this._latestOutputVolume});this._codec=t.codecName,this._metricsSamples.push(t),this._metricsSamples.length>=10&&this._publishMetrics(),this.emit("sample",e)},this._onSignalingError=e=>{const{callsid:t,voiceeventsid:n,error:i}=e;if(this.parameters.CallSid===t){if(n&&this._messages.has(n)){let t;this._messages.delete(n),this._log.warn("Received an error while sending a message.",e),this._publisher.error("call-message","error",{code:i.code,message:i.message,voice_event_sid:n},this);const r=it(!!this._options.enableImprovedSignalingErrorPrecision,i.code);void 0!==r&&(t=new r(i)),t||(this._log.error("Unknown Call Message Error: ",i),t=new Ke.UnknownError(i.message,i)),this._log.debug("#error",i,t),this.emit("error",t)}}else this._log.warn(`Received an error from a different callsid: ${t}`)},this._onSignalingReconnected=()=>{this._signalingStatus===si.State.Reconnecting&&(this._log.info("Signaling Connection reestablished."),this._signalingStatus=si.State.Open,this._mediaStatus===si.State.Open&&(this._publisher.info("connection","reconnected",null,this),this._log.debug("#reconnected"),this.emit("reconnected"),this._status=si.State.Open))},this._onTransportClose=()=>{this._log.error("Received transportClose from pstream"),this._log.debug("#transportClose"),this.emit("transportClose"),this._signalingReconnectToken?(this._status=si.State.Reconnecting,this._signalingStatus=si.State.Reconnecting,this._publisher.info("connection","reconnecting",null,this),this._log.debug("#reconnecting"),this.emit("reconnecting",new Ze.ConnectionDisconnected)):(this._status=si.State.Closed,this._signalingStatus=si.State.Closed)},this._reemitWarning=(e,t)=>{const n=/^audio/.test(e.name)?"audio-level-":"network-quality-",i=ri[e.threshold.name];let r;e.name in ni?r=ni[e.name][e.threshold.name]:e.name in ii&&(r=ii[e.name]);const s=i+r;this._emitWarning(n,s,e.threshold.value,e.values||e.value,t,e)},this._reemitWarningCleared=e=>{this._reemitWarning(e,!0)},this._soundcache=e.soundcache,"function"==typeof e.onIgnore&&(this._onIgnore=e.onIgnore);const n=t&&t.twimlParams||{};this.customParameters=new Map(Object.entries(n).map(([e,t])=>[e,String(t)])),Object.assign(this._options,t),this._options.callParameters&&(this.parameters=this._options.callParameters),this._options.reconnectToken&&(this._signalingReconnectToken=this._options.reconnectToken),this._voiceEventSidGenerator=this._options.voiceEventSidGenerator||Rn,this._direction=this.parameters.CallSid&&!this._options.reconnectCallSid?si.CallDirection.Incoming:si.CallDirection.Outgoing,this.parameters?this.callerInfo=this.parameters.StirStatus?{isVerified:"TN-Validation-Passed-A"===this.parameters.StirStatus}:null:this.callerInfo=null,this._mediaReconnectBackoff=new Le(ei),this._mediaReconnectBackoff.on("ready",()=>this._mediaHandler.iceRestart()),this.outboundConnectionId="TJSxxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)});const i=this._publisher=e.publisher;this._direction===si.CallDirection.Incoming?i.info("connection","incoming",null,this):i.info("connection","outgoing",{preflight:this._options.preflight,reconnect:!!this._options.reconnectCallSid},this);const r=this._monitor=new(this._options.StatsMonitor||Zn);r.on("sample",this._onRTCSample),r.disableWarnings(),setTimeout(()=>r.enableWarnings(),5e3),r.on("warning",(e,t)=>{"bytesSent"!==e.name&&"bytesReceived"!==e.name||this._onMediaFailure(si.MediaFailure.LowBytes),this._reemitWarning(e,t)}),r.on("warning-cleared",e=>{this._reemitWarningCleared(e)}),this._mediaHandler=new this._options.MediaHandler(e.audioHelper,e.pstream,{MediaStream:this._options.MediaStream,RTCPeerConnection:this._options.RTCPeerConnection,codecPreferences:this._options.codecPreferences,dscp:this._options.dscp,forceAggressiveIceNomination:this._options.forceAggressiveIceNomination,maxAverageBitrate:this._options.maxAverageBitrate}),this.on("volume",(e,t)=>{this._inputVolumeStreak=this._checkVolume(e,this._inputVolumeStreak,this._latestInputVolume,"input"),this._outputVolumeStreak=this._checkVolume(t,this._outputVolumeStreak,this._latestOutputVolume,"output"),this._latestInputVolume=e,this._latestOutputVolume=t}),this._mediaHandler.onaudio=e=>{this._log.debug("#audio"),this.emit("audio",e)},this._mediaHandler.onvolume=(e,t,n,i)=>{r.addVolumes(n/255*32767,i/255*32767),this.emit("volume",e,t)},this._mediaHandler.ondtlstransportstatechange=e=>{const t="failed"===e?"error":"debug";this._publisher.post(t,"dtls-transport-state",e,null,this)},this._mediaHandler.onpcconnectionstatechange=e=>{let t="debug";const n=this._mediaHandler.getRTCDtlsTransport();"failed"===e&&(t=n&&"failed"===n.state?"error":"warning"),this._publisher.post(t,"pc-connection-state",e,null,this)},this._mediaHandler.onicecandidate=e=>{const t=new Qn(e).toPayload();this._publisher.debug("ice-candidate","ice-candidate",t,this)},this._mediaHandler.onselectedcandidatepairchange=e=>{const t=new Qn(e.local).toPayload(),n=new Qn(e.remote,!0).toPayload();this._publisher.debug("ice-candidate","selected-ice-candidate-pair",{local_candidate:t,remote_candidate:n},this)},this._mediaHandler.oniceconnectionstatechange=e=>{const t="failed"===e?"error":"debug";this._publisher.post(t,"ice-connection-state",e,null,this)},this._mediaHandler.onicegatheringfailure=e=>{this._publisher.warn("ice-gathering-state",e,null,this),this._onMediaFailure(si.MediaFailure.IceGatheringFailed)},this._mediaHandler.onicegatheringstatechange=e=>{this._publisher.debug("ice-gathering-state",e,null,this)},this._mediaHandler.onsignalingstatechange=e=>{this._publisher.debug("signaling-state",e,null,this)},this._mediaHandler.ondisconnected=e=>{this._log.warn(e),this._publisher.warn("network-quality-warning-raised","ice-connectivity-lost",{message:e},this),this._log.debug("#warning","ice-connectivity-lost"),this.emit("warning","ice-connectivity-lost"),this._onMediaFailure(si.MediaFailure.ConnectionDisconnected)},this._mediaHandler.onfailed=e=>{this._onMediaFailure(si.MediaFailure.ConnectionFailed)},this._mediaHandler.onconnected=()=>{this._status===si.State.Reconnecting&&this._onMediaReconnected()},this._mediaHandler.onreconnected=e=>{this._log.info(e),this._publisher.info("network-quality-warning-cleared","ice-connectivity-lost",{message:e},this),this._log.debug("#warning-cleared","ice-connectivity-lost"),this.emit("warning-cleared","ice-connectivity-lost"),this._onMediaReconnected()},this._mediaHandler.onerror=e=>{!0===e.disconnect&&this._disconnect(e.info&&e.info.message);const t=e.info.twilioError||new Ke.UnknownError(e.info.message);this._log.error("Received an error from MediaStream:",e),this._log.debug("#error",t),this.emit("error",t)},this._mediaHandler.onopen=()=>{this._status!==si.State.Open&&this._status!==si.State.Reconnecting&&(this._status===si.State.Ringing||this._status===si.State.Connecting?(this.mute(this._mediaHandler.isMuted),this._mediaStatus=si.State.Open,this._maybeTransitionToOpen()):this._mediaHandler.close())},this._mediaHandler.onclose=()=>{this._status=si.State.Closed,this._options.shouldPlayDisconnect&&this._options.shouldPlayDisconnect()&&!this._isCancelled&&!this._isRejected&&this._soundcache.get(Wn.SoundName.Disconnect).play(),r.disable(),this._publishMetrics(),this._isCancelled||this._isRejected||(this._log.debug("#disconnect"),this.emit("disconnect",this))},this._pstream=e.pstream,this._pstream.on("ack",this._onAck),this._pstream.on("cancel",this._onCancel),this._pstream.on("error",this._onSignalingError),this._pstream.on("ringing",this._onRinging),this._pstream.on("transportClose",this._onTransportClose),this._pstream.on("connected",this._onConnected),this._pstream.on("message",this._onMessageReceived),this.on("error",e=>{this._publisher.error("connection","error",{code:e.code,message:e.message},this),this._pstream&&"disconnected"===this._pstream.status&&this._cleanupEventListeners()}),this.on("disconnect",()=>{this._cleanupEventListeners()})}_setInputTracksFromStream(e){return this._mediaHandler.setInputTracksFromStream(e)}_setSinkIds(e){return this._mediaHandler._setSinkIds(e)}accept(e){if(this._log.debug(".accept",e),this._status!==si.State.Pending)return void this._log.debug(`.accept noop. status is '${this._status}'`);const t=(e=e||{}).rtcConfiguration||this._options.rtcConfiguration,n=e.rtcConstraints||this._options.rtcConstraints||{},i={audio:void 0===n.audio||n.audio};this._status=si.State.Connecting;const r=()=>{if(this._status!==si.State.Connecting)return this._cleanupEventListeners(),void this._mediaHandler.close();const e=e=>{const t=this._direction===si.CallDirection.Incoming?"accepted-by-local":"accepted-by-remote";this._publisher.info("connection",t,null,this);const{codecName:n,codecParams:i}=function(e){const[,t,n]=/a=rtpmap:(\d+) (\S+)/m.exec(e)||[null,"",""],i=new RegExp(`a=fmtp:${t} (\\S+)`,"m"),[,r]=i.exec(e)||[null,""];return{codecName:n,codecParams:r}}(this._mediaHandler.version.getSDP());this._publisher.info("settings","codec",{codec_params:i,selected_codec:n},this),this._monitor.enable(e)},n="function"==typeof this._options.getSinkIds&&this._options.getSinkIds();if(Array.isArray(n)&&this._mediaHandler._setSinkIds(n).catch(()=>{}),this._pstream.addListener("hangup",this._onHangup),this._direction===si.CallDirection.Incoming)this._isAnswered=!0,this._pstream.on("answer",this._onAnswer),this._mediaHandler.answerIncomingCall(this.parameters.CallSid,this._options.offerSdp,t,e);else{const n=Array.from(this.customParameters.entries()).map(e=>`${encodeURIComponent(e[0])}=${encodeURIComponent(e[1])}`).join("&");this._pstream.on("answer",this._onAnswer),this._mediaHandler.makeOutgoingCall(n,this._signalingReconnectToken,this._options.reconnectCallSid||this.outboundConnectionId,t,e)}};this._options.beforeAccept&&this._options.beforeAccept(this);const s="function"==typeof this._options.getInputStream&&this._options.getInputStream();(s?this._mediaHandler.setInputTracksFromStream(s):this._mediaHandler.openDefaultDeviceWithConstraints(i)).then(()=>{this._publisher.info("get-user-media","succeeded",{data:{audioConstraints:i}},this),r()},e=>{let t;31208===e.code||-1!==["PermissionDeniedError","NotAllowedError"].indexOf(e.name)?(t=new Ye.PermissionDeniedError,this._publisher.error("get-user-media","denied",{data:{audioConstraints:i,error:e}},this)):(t=new Ye.AcquisitionFailedError,this._publisher.error("get-user-media","failed",{data:{audioConstraints:i,error:e}},this)),this._disconnect(),this._log.debug("#error",e),this.emit("error",t)})}disconnect(){this._log.debug(".disconnect"),this._disconnect()}getLocalStream(){return this._mediaHandler&&this._mediaHandler.stream}getRemoteStream(){return this._mediaHandler&&this._mediaHandler._remoteStream}ignore(){this._log.debug(".ignore"),this._status===si.State.Pending?(this._status=si.State.Closed,this._mediaHandler.ignore(this.parameters.CallSid),this._publisher.info("connection","ignored-by-local",null,this),this._onIgnore&&this._onIgnore()):this._log.debug(`.ignore noop. status is '${this._status}'`)}isMuted(){return this._mediaHandler.isMuted}mute(e=!0){this._log.debug(".mute",e);const t=this._mediaHandler.isMuted;this._mediaHandler.mute(e);const n=this._mediaHandler.isMuted;t!==n&&(this._publisher.info("connection",n?"muted":"unmuted",null,this),this._log.debug("#mute",n),this.emit("mute",n,this))}postFeedback(e,t){if(null==e)return this._postFeedbackDeclined();if(!Object.values(si.FeedbackScore).includes(e))throw new rt(`Feedback score must be one of: ${Object.values(si.FeedbackScore)}`);if(null!=t&&!Object.values(si.FeedbackIssue).includes(t))throw new rt(`Feedback issue must be one of: ${Object.values(si.FeedbackIssue)}`);return this._publisher.info("feedback","received",{issue_name:t,quality_score:e},this,!0)}reject(){this._log.debug(".reject"),this._status===si.State.Pending?(this._isRejected=!0,this._pstream.reject(this.parameters.CallSid),this._mediaHandler.reject(this.parameters.CallSid),this._publisher.info("connection","rejected-by-local",null,this),this._cleanupEventListeners(),this._mediaHandler.close(),this._status=si.State.Closed,this._log.debug("#reject"),this.emit("reject")):this._log.debug(`.reject noop. status is '${this._status}'`)}sendDigits(e){if(this._log.debug(".sendDigits",e),e.match(/[^0-9*#w]/))throw new rt("Illegal character passed into sendDigits");const t=this._options.customSounds||{},n=[];e.split("").forEach(e=>{let t="w"!==e?`dtmf${e}`:"";"dtmf*"===t&&(t="dtmfs"),"dtmf#"===t&&(t="dtmfh"),n.push(t)});const i=()=>{const e=n.shift();e&&(this._options.dialtonePlayer&&!t[e]?this._options.dialtonePlayer.play(e):this._soundcache.get(e).play()),n.length&&setTimeout(()=>i(),200)};i();const r=this._mediaHandler.getOrCreateDTMFSender();if(r){if(!("canInsertDTMF"in r)||r.canInsertDTMF)return this._log.info("Sending digits using RTCDTMFSender"),void function e(t){if(!t.length)return;const n=t.shift();n&&n.length&&r.insertDTMF(n,160,70),setTimeout(e.bind(null,t),500)}(e.split("w"));this._log.info("RTCDTMFSender cannot insert DTMF")}if(this._log.info("Sending digits over PStream"),null!==this._pstream&&"disconnected"!==this._pstream.status)this._pstream.dtmf(this.parameters.CallSid,e);else{const e=new Ke.ConnectionError("Could not send DTMF: Signaling channel is disconnected");this._log.debug("#error",e),this.emit("error",e)}}sendMessage(e){this._log.debug(".sendMessage",JSON.stringify(e));const{content:t,contentType:n,messageType:i}=e;if(null==t)throw new rt("`content` is empty");if("string"!=typeof i)throw new rt("`messageType` must be a string.");if(0===i.length)throw new rt("`messageType` must be a non-empty string.");if(null===this._pstream)throw new st("Could not send CallMessage; Signaling channel is disconnected");const r=this.parameters.CallSid;if(void 0===this.parameters.CallSid)throw new st("Could not send CallMessage; Call has no CallSid");const s=this._voiceEventSidGenerator();return this._messages.set(s,{content:t,contentType:n,messageType:i,voiceEventSid:s}),this._pstream.sendMessage(r,t,n,i,s),s}status(){return this._status}_checkVolume(e,t,n,i){const r=t>=10;let s=0;return n===e&&(s=t),s>=10?this._emitWarning("audio-level-",`constant-audio-${i}-level`,10,s,!1):r&&this._emitWarning("audio-level-",`constant-audio-${i}-level`,10,s,!0),s}_cleanupEventListeners(){const e=()=>{this._pstream&&(this._pstream.removeListener("ack",this._onAck),this._pstream.removeListener("answer",this._onAnswer),this._pstream.removeListener("cancel",this._onCancel),this._pstream.removeListener("error",this._onSignalingError),this._pstream.removeListener("hangup",this._onHangup),this._pstream.removeListener("ringing",this._onRinging),this._pstream.removeListener("transportClose",this._onTransportClose),this._pstream.removeListener("connected",this._onConnected),this._pstream.removeListener("message",this._onMessageReceived))};e(),setTimeout(e,0)}_createMetricPayload(){const e={call_sid:this.parameters.CallSid,dscp:!!this._options.dscp,sdk_version:lt};return this._options.gateway&&(e.gateway=this._options.gateway),e.direction=this._direction,e}_disconnect(e,t){if(e="string"==typeof e?e:null,this._status===si.State.Open||this._status===si.State.Connecting||this._status===si.State.Reconnecting||this._status===si.State.Ringing){if(this._log.info("Disconnecting..."),null!==this._pstream&&"disconnected"!==this._pstream.status&&this._shouldSendHangup){const t=this.parameters.CallSid||this.outboundConnectionId;t&&this._pstream.hangup(t,e)}this._cleanupEventListeners(),this._mediaHandler.close(),t||this._publisher.info("connection","disconnected-by-local",null,this)}}_maybeTransitionToOpen(){this._wasConnected,this._isAnswered&&(this._onSignalingReconnected(),this._signalingStatus=si.State.Open,this._mediaHandler&&"open"===this._mediaHandler.status&&(this._status=si.State.Open,this._wasConnected||(this._wasConnected=!0,this._log.debug("#accept"),this.emit("accept",this))))}_postFeedbackDeclined(){return this._publisher.info("feedback","received-none",null,this,!0)}_publishMetrics(){0!==this._metricsSamples.length&&this._publisher.postMetrics("quality-metrics-samples","metrics-sample",this._metricsSamples.splice(0),this._createMetricPayload(),this).catch(e=>{this._log.warn("Unable to post metrics to Insights. Received error:",e)})}_setCallSid(e){const t=e.callsid;t&&(this.parameters.CallSid=t,this._mediaHandler.callSid=t)}}var ai,oi,li,ci,ui,di,hi;si.toString=()=>"[Twilio.Call class]",function(e){e.Closed="closed",e.Connecting="connecting",e.Open="open",e.Pending="pending",e.Reconnecting="reconnecting",e.Ringing="ringing"}((ai=si||(si={})).State||(ai.State={})),(oi=ai.FeedbackIssue||(ai.FeedbackIssue={})).AudioLatency="audio-latency",oi.ChoppyAudio="choppy-audio",oi.DroppedCall="dropped-call",oi.Echo="echo",oi.NoisyCall="noisy-call",oi.OneWayAudio="one-way-audio",(li=ai.FeedbackScore||(ai.FeedbackScore={}))[li.One=1]="One",li[li.Two=2]="Two",li[li.Three=3]="Three",li[li.Four=4]="Four",li[li.Five=5]="Five",(ci=ai.CallDirection||(ai.CallDirection={})).Incoming="INCOMING",ci.Outgoing="OUTGOING",(ui=ai.Codec||(ai.Codec={})).Opus="opus",ui.PCMU="pcmu",(di=ai.IceGatheringFailureReason||(ai.IceGatheringFailureReason={})).None="none",di.Timeout="timeout",(hi=ai.MediaFailure||(ai.MediaFailure={})).ConnectionDisconnected="ConnectionDisconnected",hi.ConnectionFailed="ConnectionFailed",hi.IceGatheringFailed="IceGatheringFailed",hi.LowBytes="LowBytes";const pi=new class{constructor(){this.device=null,this.currentCall=null,this.statusCallback=null,this.tokenRefreshInterval=null,this.getTokenCallback=null}registerStatusCallback(e){this.statusCallback=e}registerTokenRefresh(e){this.getTokenCallback=e}async refreshToken(){if(this.getTokenCallback&&this.device)try{const e=await this.getTokenCallback();this.device.updateToken(e)}catch(e){}}async initialize(e){try{return this.device=new Wn(e,{logLevel:1,codecPreferences:["opus","pcmu"],disableAudioContextSounds:!0,enableRingingTimer:!0,enableImprovedSignalingErrorPrecision:!0}),this.device.on("registered",()=>{}),this.device.on("error",e=>{e&&"object"==typeof e&&20101===e.code&&this.refreshToken()}),this.device.on("incoming",e=>{e.accept(),this.currentCall=e,this.setupCallListeners(e)}),await this.device.register(),this.getTokenCallback&&(this.tokenRefreshInterval=setInterval(()=>{this.refreshToken()},3e6)),this}catch(t){throw t}}async connect(e,t){if(!this.device)throw new Error("Device not initialized");this.statusCallback&&this.statusCallback(ye.DIALING);const n={To:e};t&&(n.callerId=t);try{const e=await this.device.connect({params:n});return this.currentCall=e,this.setupCallListeners(e),e}catch(i){throw this.statusCallback&&this.statusCallback(ye.WRAP_UP),i}}setupCallListeners(e){e.on("accept",()=>{this.statusCallback&&this.statusCallback(ye.CONNECTED)}),e.on("disconnect",()=>{this.statusCallback&&this.statusCallback(ye.WRAP_UP),this.currentCall=null}),e.on("error",e=>{this.statusCallback&&this.statusCallback(ye.WRAP_UP)})}disconnect(){this.tokenRefreshInterval&&(clearInterval(this.tokenRefreshInterval),this.tokenRefreshInterval=null),this.currentCall?this.currentCall.disconnect():this.device&&this.device.disconnectAll()}mute(e){this.currentCall&&this.currentCall.mute(e)}async getIncomingPhoneNumbers(){return[]}},fi=i.lazy(()=>he(()=>import("./LeadListManager-Xue_loWR.js"),__vite__mapDeps([0,1,2])).then(e=>({default:e.LeadListManager}))),mi=i.lazy(()=>he(()=>import("./TeamManagement-CCQGhgS_.js"),__vite__mapDeps([3,1,2])).then(e=>({default:e.TeamManagement}))),gi=()=>ie.jsx("div",{className:"flex items-center justify-center h-screen",children:ie.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 dark:border-blue-400"})}),vi=pi,yi=()=>{const[e,t]=r.useState(!1),n=s(),[i,a]=r.useState("dashboard"),[o,l]=r.useState(Pe),[c,u]=r.useState(je),[d,h]=r.useState(null),[p,f]=r.useState(null),[m,g]=r.useState([]),[v,y]=r.useState(!1),[b,_]=r.useState(!1),[x,w]=r.useState(null),[k,S]=r.useState(null),[C,E]=r.useState([]),[N,T]=r.useState([]);r.useEffect(()=>{(async()=>{try{const t=await ke.getCurrentUser();t&&S(t);{const t=await ke.getProspects();l(t);const n=await ke.getCallHistory();g(n);try{const e=await ke.getTeamMembers();T(e)}catch(e){}try{const e=await ke.getTwilioNumbers();if(e&&e.length>0){E(e);const t=e[0].phoneNumber;f(t)}}catch(e){}vi.registerTokenRefresh(async()=>await ke.getToken("agent_1"));const i=await ke.getToken("agent_1");await vi.initialize(i)}vi.registerStatusCallback(e=>{h(t=>t?{...t,state:e}:null)}),_(!0),w(null)}catch(e){_(!1),w("Twilio initialization failed. Please refresh or contact support.")}})()},[]);const j=async e=>{if(b)try{h({prospect:e,state:ye.DIALING,startTime:Date.now()}),await vi.connect(e.phone,p||void 0),u(e=>({...e,callsMade:e.callsMade+1}))}catch(n){alert("Call failed to connect. Check console for details."),h(null),t(!0)}else alert("Twilio is not ready. Please wait for initialization.")},P=async e=>{if(!b)return ie.jsx(xe,{queue:D,onCall:j,disabled:!b,onAdvanceToNext:()=>{window.__powerDialerAdvanceToNext&&window.__powerDialerAdvanceToNext()}});const t={id:`manual-${Date.now()}`,firstName:"Manual",lastName:"Dial",company:"Unknown",title:"Unknown",phone:e,email:"",status:"New",timezone:"Unknown"};j(t)},I=async e=>{const t=new FileReader;t.onload=async t=>{const n=t.target?.result;if(n){const t=n.split("\n");if(t.length<2)return;const r=t[0].split(",").map(e=>e.trim().toLowerCase()),s=t.slice(1).map(e=>{if(!e.trim())return null;const t=e.split(",").map(e=>e.trim()),n={};return r.forEach((e,i)=>{e.includes("first")?n.firstName=t[i]:e.includes("last")?n.lastName=t[i]:e.includes("phone")?n.phone=t[i]:e.includes("email")?n.email=t[i]:e.includes("company")?n.company=t[i]:e.includes("title")?n.title=t[i]:e.includes("status")?n.status=t[i]:(e.includes("zone")||e.includes("time"))&&(n.timezone=t[i])}),n.phone?n:null}).filter(Boolean);{const t=[];for(const e of s){const n=await ke.createProspect(e);t.push(n.id)}if(t.length>0)try{const n=`${e.name} - ${(new Date).toLocaleDateString()}`;await ke.createLeadList(n,`Imported from ${e.name}`,t)}catch(i){}const n=await ke.getProspects();l(n)}}},t.readAsText(e)},D=o.filter(e=>"New"===e.status);return ie.jsxs("div",{className:(v?"dark":"")+" h-full",children:[x&&ie.jsx("div",{className:"fixed top-0 left-0 w-full bg-red-600 text-white text-center py-2 z-50",children:x}),ie.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-slate-900 text-gray-900 dark:text-gray-100 font-sans transition-colors duration-200",children:[ie.jsxs("aside",{className:"w-20 lg:w-64 bg-slate-900 dark:bg-slate-950 text-white flex flex-col flex-shrink-0 border-r border-slate-800 dark:border-slate-800 transition-all duration-300",children:[ie.jsxs("div",{className:"p-6 flex items-center justify-center lg:justify-start border-b border-slate-800",children:[ie.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center font-bold text-xl text-white",children:"C"}),ie.jsx("span",{className:"ml-3 font-bold text-lg hidden lg:block tracking-tight",children:"Creativeprocess.io"})]}),ie.jsxs("nav",{className:"flex-1 py-6 space-y-2 px-3",children:[ie.jsx(xi,{icon:ie.jsx($,{size:20}),label:"Dashboard",active:"dashboard"===i,onClick:()=>a("dashboard")}),ie.jsx(xi,{icon:ie.jsx(U,{size:20}),label:"Prospects",active:"prospects"===i,onClick:()=>a("prospects")}),ie.jsx(xi,{icon:ie.jsx(H,{size:20}),label:"Power Dialer",active:"power-dialer"===i,onClick:()=>a("power-dialer")}),ie.jsx(xi,{icon:ie.jsx(W,{size:20}),label:"Manual Dialer",active:"manual-dialer"===i,onClick:()=>a("manual-dialer")}),ie.jsx(xi,{icon:ie.jsx(V,{size:20}),label:"Call History",active:"history"===i,onClick:()=>a("history")}),ie.jsx(xi,{icon:ie.jsx(B,{size:20}),label:"Lead Lists",active:"lead-lists"===i,onClick:()=>a("lead-lists")}),ie.jsx(xi,{icon:ie.jsx(q,{size:20}),label:"Settings",active:"settings"===i,onClick:()=>a("settings")}),"admin"===k?.role&&ie.jsxs(ie.Fragment,{children:[ie.jsx("div",{className:"my-2 border-t border-slate-700"}),ie.jsx(xi,{icon:ie.jsx(U,{size:20}),label:"Team Management",active:"team-management"===i,onClick:()=>a("team-management")})]})]}),ie.jsx("div",{className:"p-4 border-t border-slate-800",children:ie.jsxs("button",{onClick:async()=>{await ke.logout(),n("/login")},className:"flex items-center justify-center lg:justify-start w-full text-slate-400 hover:text-white transition",children:[ie.jsx(G,{size:20}),ie.jsx("span",{className:"ml-3 hidden lg:block",children:"Logout"})]})})]}),ie.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden relative",children:[ie.jsx(Ee,{title:i.replace("-"," "),user:k,isDarkMode:v,onDarkModeToggle:()=>y(!v),callerId:p,onCallerIdChange:f,twilioNumbers:C,onViewProfile:()=>a("profile")}),ie.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-8 bg-gray-50 dark:bg-slate-900 transition-colors duration-200",children:ie.jsx("div",{className:"max-w-7xl mx-auto h-full",children:(()=>{switch(i){case"dashboard":return ie.jsxs(ie.Fragment,{children:[ie.jsxs("div",{className:"mb-8",children:[ie.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:["Good Morning, ",k?.firstName||"Agent"]}),ie.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Here is your daily performance overview."})]}),ie.jsx(fe,{stats:c}),ie.jsxs("div",{className:"mt-8",children:[ie.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-200 mb-4",children:"Recent Priority Leads"}),ie.jsx(ve,{prospects:o.slice(0,5),onCall:j,onUpload:I})]})]});case"prospects":return ie.jsxs(ie.Fragment,{children:[ie.jsx("div",{className:"mb-6 flex justify-between items-end",children:ie.jsxs("div",{children:[ie.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Prospects"}),ie.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage and organize your lead lists."})]})}),ie.jsx(ve,{prospects:o,onCall:j,onUpload:I})]});case"power-dialer":return ie.jsx(xe,{queue:D,onCall:j,disabled:!b,onAdvanceToNext:()=>{window.__powerDialerAdvanceToNext&&window.__powerDialerAdvanceToNext()},dispositionSaved:e,setDispositionSaved:t});case"manual-dialer":return ie.jsx(_e,{onCall:P,disabled:!b});case"history":return ie.jsx(Ce,{history:m});case"settings":return ie.jsx(Se,{currentCallerId:p,onSetCallerId:f});case"team-management":return ie.jsx(r.Suspense,{fallback:ie.jsx(gi,{}),children:ie.jsx(mi,{})});case"profile":return k?ie.jsx(Te,{user:k,onBack:()=>a("dashboard"),onUpdate:S}):null;case"lead-lists":return ie.jsx(r.Suspense,{fallback:ie.jsx(gi,{}),children:ie.jsx(fi,{prospects:o,teamMembers:N})});default:return ie.jsx("div",{children:"View not found"})}})()})}),d&&ie.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-sm z-50 flex items-center justify-center md:block md:bg-transparent md:backdrop-blur-none md:pointer-events-none",children:ie.jsx("div",{className:"md:pointer-events-auto w-full h-full md:absolute md:inset-0",children:ie.jsx(be,{prospect:d.prospect,callState:d.state,onHangup:()=>{vi.disconnect()},onSaveDisposition:async(e,t)=>{if(!d)return;const n=Math.floor((Date.now()-d.startTime)/1e3),i={prospectId:d.prospect.id,prospectName:`${d.prospect.firstName} ${d.prospect.lastName}`,outcome:e,duration:n,notes:t,timestamp:(new Date).toISOString()};try{const e=await ke.logCall(i);g(t=>[...t,e]);const t=await ke.getProspects();l(t)}catch(r){}u(t=>{const i={...t,talkTime:t.talkTime+Math.floor(n/60)};return"Connected"===e&&(i.connections+=1),"Meeting Set"===e&&(i.connections+=1,i.appointmentsSet+=1),i}),h(null)}})})})]})]})]})},bi=({children:e})=>{const[t,n]=r.useState(null);return r.useEffect(()=>{(async()=>{if(ke.getAuthToken()){const e=await ke.getCurrentUser();n(!!e)}else n(!1)})()},[]),null===t?ie.jsx("div",{className:"flex items-center justify-center h-screen",children:"Loading..."}):t?ie.jsx(ie.Fragment,{children:e}):ie.jsx(c,{to:"/login"})},_i=()=>ie.jsx(a,{children:ie.jsxs(o,{children:[ie.jsx(l,{path:"/login",element:ie.jsx(Ne,{})}),ie.jsx(l,{path:"/",element:ie.jsx(bi,{children:ie.jsx(yi,{})})})]})}),xi=({icon:e,label:t,active:n,onClick:i})=>ie.jsxs("button",{className:"w-full flex items-center justify-center lg:justify-start px-4 py-3 rounded-lg transition-all duration-200 "+(n?"bg-blue-600 text-white shadow-lg shadow-blue-900/20":"text-slate-400 hover:bg-slate-800 hover:text-white"),onClick:i,children:[e,ie.jsx("span",{className:"ml-3 font-medium hidden lg:block",children:t})]}),wi=document.getElementById("root");if(!wi)throw new Error("Could not find root element to mount to");ue.createRoot(wi).render(ie.jsx(i.StrictMode,{children:ie.jsx(_i,{})}));export{ke as b,ie as j};
